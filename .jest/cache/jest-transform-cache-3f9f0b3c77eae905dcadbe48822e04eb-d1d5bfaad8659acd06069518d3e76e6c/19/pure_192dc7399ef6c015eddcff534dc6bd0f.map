{"version":3,"sources":["pure.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_exportNames","render","cleanup","act","fireEvent","enumerable","get","_actCompat","default","_fireEvent","React","_interopRequireWildcard","_reactDom","_dom","keys","forEach","key","prototype","hasOwnProperty","call","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","set","configure","asyncWrapper","cb","asyncAct","result","eventWrapper","mountedContainers","Set","ui","container","baseElement","queries","hydrate","WrapperComponent","wrapper","document","body","appendChild","createElement","add","wrapUiIfNeeded","innerElement","debug","el","maxLength","options","Array","isArray","e","console","log","prettyDOM","unmount","unmountComponentAtNode","rerender","rerenderUi","asFragment","createRange","createContextualFragment","innerHTML","template","content","getQueriesForElement","cleanupAtContainer","parentNode","removeChild","delete"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  render: true,\n  cleanup: true,\n  act: true,\n  fireEvent: true\n};\nexports.render = render;\nexports.cleanup = cleanup;\nObject.defineProperty(exports, \"act\", {\n  enumerable: true,\n  get: function () {\n    return _actCompat.default;\n  }\n});\nObject.defineProperty(exports, \"fireEvent\", {\n  enumerable: true,\n  get: function () {\n    return _fireEvent.fireEvent;\n  }\n});\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _dom = require(\"@testing-library/dom\");\n\nObject.keys(_dom).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  if (key in exports && exports[key] === _dom[key]) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _dom[key];\n    }\n  });\n});\n\nvar _actCompat = _interopRequireWildcard(require(\"./act-compat\"));\n\nvar _fireEvent = require(\"./fire-event\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n(0, _dom.configure)({\n  asyncWrapper: async cb => {\n    let result;\n    await (0, _actCompat.asyncAct)(async () => {\n      result = await cb();\n    });\n    return result;\n  },\n  eventWrapper: cb => {\n    let result;\n    (0, _actCompat.default)(() => {\n      result = cb();\n    });\n    return result;\n  }\n});\nconst mountedContainers = new Set();\n\nfunction render(ui, {\n  container,\n  baseElement = container,\n  queries,\n  hydrate = false,\n  wrapper: WrapperComponent\n} = {}) {\n  if (!baseElement) {\n    // default to document.body instead of documentElement to avoid output of potentially-large\n    // head elements (such as JSS style blocks) in debug output\n    baseElement = document.body;\n  }\n\n  if (!container) {\n    container = baseElement.appendChild(document.createElement('div'));\n  } // we'll add it to the mounted containers regardless of whether it's actually\n  // added to document.body so the cleanup method works regardless of whether\n  // they're passing us a custom container or not.\n\n\n  mountedContainers.add(container);\n\n  const wrapUiIfNeeded = innerElement => WrapperComponent ? /*#__PURE__*/React.createElement(WrapperComponent, null, innerElement) : innerElement;\n\n  (0, _actCompat.default)(() => {\n    if (hydrate) {\n      _reactDom.default.hydrate(wrapUiIfNeeded(ui), container);\n    } else {\n      _reactDom.default.render(wrapUiIfNeeded(ui), container);\n    }\n  });\n  return {\n    container,\n    baseElement,\n    debug: (el = baseElement, maxLength, options) => Array.isArray(el) ? // eslint-disable-next-line no-console\n    el.forEach(e => console.log((0, _dom.prettyDOM)(e, maxLength, options))) : // eslint-disable-next-line no-console,\n    console.log((0, _dom.prettyDOM)(el, maxLength, options)),\n    unmount: () => {\n      (0, _actCompat.default)(() => {\n        _reactDom.default.unmountComponentAtNode(container);\n      });\n    },\n    rerender: rerenderUi => {\n      render(wrapUiIfNeeded(rerenderUi), {\n        container,\n        baseElement\n      }); // Intentionally do not return anything to avoid unnecessarily complicating the API.\n      // folks can use all the same utilities we return in the first place that are bound to the container\n    },\n    asFragment: () => {\n      /* istanbul ignore else (old jsdom limitation) */\n      if (typeof document.createRange === 'function') {\n        return document.createRange().createContextualFragment(container.innerHTML);\n      } else {\n        const template = document.createElement('template');\n        template.innerHTML = container.innerHTML;\n        return template.content;\n      }\n    },\n    ...(0, _dom.getQueriesForElement)(baseElement, queries)\n  };\n}\n\nfunction cleanup() {\n  mountedContainers.forEach(cleanupAtContainer);\n} // maybe one day we'll expose this (perhaps even as a utility returned by render).\n// but let's wait until someone asks for it.\n\n\nfunction cleanupAtContainer(container) {\n  (0, _actCompat.default)(() => {\n    _reactDom.default.unmountComponentAtNode(container);\n  });\n\n  if (container.parentNode === document.body) {\n    document.body.removeChild(container);\n  }\n\n  mountedContainers.delete(container);\n} // just re-export everything from dom-testing-library\n// NOTE: we're not going to export asyncAct because that's our own compatibility\n// thing for people using react-dom@16.8.0. Anyone else doesn't need it and\n// people should just upgrade anyway.\n\n/* eslint func-name-matching:0 */"]}