6ebffccd1fd5a6984c58f4ee4e5285bb
var $ = require("../internals/export");

var getBuiltIn = require("../internals/get-built-in");

var fails = require("../internals/fails");

var $stringify = getBuiltIn('JSON', 'stringify');
var re = /[\uD800-\uDFFF]/g;
var low = /^[\uD800-\uDBFF]$/;
var hi = /^[\uDC00-\uDFFF]$/;

var fix = function fix(match, offset, string) {
  var prev = string.charAt(offset - 1);
  var next = string.charAt(offset + 1);

  if (low.test(match) && !hi.test(next) || hi.test(match) && !low.test(prev)) {
    return "\\u" + match.charCodeAt(0).toString(16);
  }

  return match;
};

var FORCED = fails(function () {
  return $stringify("\uDF06\uD834") !== "\"\\udf06\\ud834\"" || $stringify("\uDEAD") !== "\"\\udead\"";
});

if ($stringify) {
  $({
    target: 'JSON',
    stat: true,
    forced: FORCED
  }, {
    stringify: function stringify(it, replacer, space) {
      var result = $stringify.apply(null, arguments);
      return typeof result == 'string' ? result.replace(re, fix) : result;
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVzLmpzb24uc3RyaW5naWZ5LmpzIl0sIm5hbWVzIjpbIiQiLCJyZXF1aXJlIiwiZ2V0QnVpbHRJbiIsImZhaWxzIiwiJHN0cmluZ2lmeSIsInJlIiwibG93IiwiaGkiLCJmaXgiLCJtYXRjaCIsIm9mZnNldCIsInN0cmluZyIsInByZXYiLCJjaGFyQXQiLCJuZXh0IiwidGVzdCIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsIkZPUkNFRCIsInRhcmdldCIsInN0YXQiLCJmb3JjZWQiLCJzdHJpbmdpZnkiLCJpdCIsInJlcGxhY2VyIiwic3BhY2UiLCJyZXN1bHQiLCJhcHBseSIsImFyZ3VtZW50cyIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBTyx1QkFBZjs7QUFDQSxJQUFJQyxVQUFVLEdBQUdELE9BQU8sNkJBQXhCOztBQUNBLElBQUlFLEtBQUssR0FBR0YsT0FBTyxzQkFBbkI7O0FBRUEsSUFBSUcsVUFBVSxHQUFHRixVQUFVLENBQUMsTUFBRCxFQUFTLFdBQVQsQ0FBM0I7QUFDQSxJQUFJRyxFQUFFLEdBQUcsa0JBQVQ7QUFDQSxJQUFJQyxHQUFHLEdBQUcsbUJBQVY7QUFDQSxJQUFJQyxFQUFFLEdBQUcsbUJBQVQ7O0FBRUEsSUFBSUMsR0FBRyxHQUFHLFNBQU5BLEdBQU0sQ0FBVUMsS0FBVixFQUFpQkMsTUFBakIsRUFBeUJDLE1BQXpCLEVBQWlDO0FBQ3pDLE1BQUlDLElBQUksR0FBR0QsTUFBTSxDQUFDRSxNQUFQLENBQWNILE1BQU0sR0FBRyxDQUF2QixDQUFYO0FBQ0EsTUFBSUksSUFBSSxHQUFHSCxNQUFNLENBQUNFLE1BQVAsQ0FBY0gsTUFBTSxHQUFHLENBQXZCLENBQVg7O0FBQ0EsTUFBS0osR0FBRyxDQUFDUyxJQUFKLENBQVNOLEtBQVQsS0FBbUIsQ0FBQ0YsRUFBRSxDQUFDUSxJQUFILENBQVFELElBQVIsQ0FBckIsSUFBd0NQLEVBQUUsQ0FBQ1EsSUFBSCxDQUFRTixLQUFSLEtBQWtCLENBQUNILEdBQUcsQ0FBQ1MsSUFBSixDQUFTSCxJQUFULENBQS9ELEVBQWdGO0FBQzlFLFdBQU8sUUFBUUgsS0FBSyxDQUFDTyxVQUFOLENBQWlCLENBQWpCLEVBQW9CQyxRQUFwQixDQUE2QixFQUE3QixDQUFmO0FBQ0Q7O0FBQUMsU0FBT1IsS0FBUDtBQUNILENBTkQ7O0FBUUEsSUFBSVMsTUFBTSxHQUFHZixLQUFLLENBQUMsWUFBWTtBQUM3QixTQUFPQyxVQUFVLENBQUMsY0FBRCxDQUFWLEtBQStCLG9CQUEvQixJQUNGQSxVQUFVLENBQUMsUUFBRCxDQUFWLEtBQXlCLGFBRDlCO0FBRUQsQ0FIaUIsQ0FBbEI7O0FBS0EsSUFBSUEsVUFBSixFQUFnQjtBQUlkSixFQUFBQSxDQUFDLENBQUM7QUFBRW1CLElBQUFBLE1BQU0sRUFBRSxNQUFWO0FBQWtCQyxJQUFBQSxJQUFJLEVBQUUsSUFBeEI7QUFBOEJDLElBQUFBLE1BQU0sRUFBRUg7QUFBdEMsR0FBRCxFQUFpRDtBQUVoREksSUFBQUEsU0FBUyxFQUFFLFNBQVNBLFNBQVQsQ0FBbUJDLEVBQW5CLEVBQXVCQyxRQUF2QixFQUFpQ0MsS0FBakMsRUFBd0M7QUFDakQsVUFBSUMsTUFBTSxHQUFHdEIsVUFBVSxDQUFDdUIsS0FBWCxDQUFpQixJQUFqQixFQUF1QkMsU0FBdkIsQ0FBYjtBQUNBLGFBQU8sT0FBT0YsTUFBUCxJQUFpQixRQUFqQixHQUE0QkEsTUFBTSxDQUFDRyxPQUFQLENBQWV4QixFQUFmLEVBQW1CRyxHQUFuQixDQUE1QixHQUFzRGtCLE1BQTdEO0FBQ0Q7QUFMK0MsR0FBakQsQ0FBRDtBQU9EIiwic291cmNlc0NvbnRlbnQiOlsidmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgZ2V0QnVpbHRJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9nZXQtYnVpbHQtaW4nKTtcbnZhciBmYWlscyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mYWlscycpO1xuXG52YXIgJHN0cmluZ2lmeSA9IGdldEJ1aWx0SW4oJ0pTT04nLCAnc3RyaW5naWZ5Jyk7XG52YXIgcmUgPSAvW1xcdUQ4MDAtXFx1REZGRl0vZztcbnZhciBsb3cgPSAvXltcXHVEODAwLVxcdURCRkZdJC87XG52YXIgaGkgPSAvXltcXHVEQzAwLVxcdURGRkZdJC87XG5cbnZhciBmaXggPSBmdW5jdGlvbiAobWF0Y2gsIG9mZnNldCwgc3RyaW5nKSB7XG4gIHZhciBwcmV2ID0gc3RyaW5nLmNoYXJBdChvZmZzZXQgLSAxKTtcbiAgdmFyIG5leHQgPSBzdHJpbmcuY2hhckF0KG9mZnNldCArIDEpO1xuICBpZiAoKGxvdy50ZXN0KG1hdGNoKSAmJiAhaGkudGVzdChuZXh0KSkgfHwgKGhpLnRlc3QobWF0Y2gpICYmICFsb3cudGVzdChwcmV2KSkpIHtcbiAgICByZXR1cm4gJ1xcXFx1JyArIG1hdGNoLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpO1xuICB9IHJldHVybiBtYXRjaDtcbn07XG5cbnZhciBGT1JDRUQgPSBmYWlscyhmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAkc3RyaW5naWZ5KCdcXHVERjA2XFx1RDgzNCcpICE9PSAnXCJcXFxcdWRmMDZcXFxcdWQ4MzRcIidcbiAgICB8fCAkc3RyaW5naWZ5KCdcXHVERUFEJykgIT09ICdcIlxcXFx1ZGVhZFwiJztcbn0pO1xuXG5pZiAoJHN0cmluZ2lmeSkge1xuICAvLyBgSlNPTi5zdHJpbmdpZnlgIG1ldGhvZFxuICAvLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWpzb24uc3RyaW5naWZ5XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXdlbGwtZm9ybWVkLXN0cmluZ2lmeVxuICAkKHsgdGFyZ2V0OiAnSlNPTicsIHN0YXQ6IHRydWUsIGZvcmNlZDogRk9SQ0VEIH0sIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMgLS0gcmVxdWlyZWQgZm9yIGAubGVuZ3RoYFxuICAgIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0LCByZXBsYWNlciwgc3BhY2UpIHtcbiAgICAgIHZhciByZXN1bHQgPSAkc3RyaW5naWZ5LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gdHlwZW9mIHJlc3VsdCA9PSAnc3RyaW5nJyA/IHJlc3VsdC5yZXBsYWNlKHJlLCBmaXgpIDogcmVzdWx0O1xuICAgIH1cbiAgfSk7XG59XG4iXX0=