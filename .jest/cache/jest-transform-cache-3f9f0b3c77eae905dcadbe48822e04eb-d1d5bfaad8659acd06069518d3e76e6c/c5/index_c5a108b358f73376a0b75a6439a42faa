c401f2a120e09675136c7666483a9841
'use strict';

var os = require('os');

var hasFlag = require('has-flag');

var env = process.env;
var forceColor;

if (hasFlag('no-color') || hasFlag('no-colors') || hasFlag('color=false')) {
  forceColor = false;
} else if (hasFlag('color') || hasFlag('colors') || hasFlag('color=true') || hasFlag('color=always')) {
  forceColor = true;
}

if ('FORCE_COLOR' in env) {
  forceColor = env.FORCE_COLOR.length === 0 || parseInt(env.FORCE_COLOR, 10) !== 0;
}

function translateLevel(level) {
  if (level === 0) {
    return false;
  }

  return {
    level: level,
    hasBasic: true,
    has256: level >= 2,
    has16m: level >= 3
  };
}

function supportsColor(stream) {
  if (forceColor === false) {
    return 0;
  }

  if (hasFlag('color=16m') || hasFlag('color=full') || hasFlag('color=truecolor')) {
    return 3;
  }

  if (hasFlag('color=256')) {
    return 2;
  }

  if (stream && !stream.isTTY && forceColor !== true) {
    return 0;
  }

  var min = forceColor ? 1 : 0;

  if (process.platform === 'win32') {
    var osRelease = os.release().split('.');

    if (Number(process.versions.node.split('.')[0]) >= 8 && Number(osRelease[0]) >= 10 && Number(osRelease[2]) >= 10586) {
      return Number(osRelease[2]) >= 14931 ? 3 : 2;
    }

    return 1;
  }

  if ('CI' in env) {
    if (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(function (sign) {
      return sign in env;
    }) || env.CI_NAME === 'codeship') {
      return 1;
    }

    return min;
  }

  if ('TEAMCITY_VERSION' in env) {
    return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;
  }

  if (env.COLORTERM === 'truecolor') {
    return 3;
  }

  if ('TERM_PROGRAM' in env) {
    var version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);

    switch (env.TERM_PROGRAM) {
      case 'iTerm.app':
        return version >= 3 ? 3 : 2;

      case 'Apple_Terminal':
        return 2;
    }
  }

  if (/-256(color)?$/i.test(env.TERM)) {
    return 2;
  }

  if (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {
    return 1;
  }

  if ('COLORTERM' in env) {
    return 1;
  }

  if (env.TERM === 'dumb') {
    return min;
  }

  return min;
}

function getSupportLevel(stream) {
  var level = supportsColor(stream);
  return translateLevel(level);
}

module.exports = {
  supportsColor: getSupportLevel,
  stdout: getSupportLevel(process.stdout),
  stderr: getSupportLevel(process.stderr)
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm9zIiwicmVxdWlyZSIsImhhc0ZsYWciLCJlbnYiLCJwcm9jZXNzIiwiZm9yY2VDb2xvciIsIkZPUkNFX0NPTE9SIiwibGVuZ3RoIiwicGFyc2VJbnQiLCJ0cmFuc2xhdGVMZXZlbCIsImxldmVsIiwiaGFzQmFzaWMiLCJoYXMyNTYiLCJoYXMxNm0iLCJzdXBwb3J0c0NvbG9yIiwic3RyZWFtIiwiaXNUVFkiLCJtaW4iLCJwbGF0Zm9ybSIsIm9zUmVsZWFzZSIsInJlbGVhc2UiLCJzcGxpdCIsIk51bWJlciIsInZlcnNpb25zIiwibm9kZSIsInNvbWUiLCJzaWduIiwiQ0lfTkFNRSIsInRlc3QiLCJURUFNQ0lUWV9WRVJTSU9OIiwiQ09MT1JURVJNIiwidmVyc2lvbiIsIlRFUk1fUFJPR1JBTV9WRVJTSU9OIiwiVEVSTV9QUk9HUkFNIiwiVEVSTSIsImdldFN1cHBvcnRMZXZlbCIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdGRvdXQiLCJzdGRlcnIiXSwibWFwcGluZ3MiOiJBQUFBOztBQUNBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUQsQ0FBbEI7O0FBQ0EsSUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsVUFBRCxDQUF2Qjs7QUFFQSxJQUFNRSxHQUFHLEdBQUdDLE9BQU8sQ0FBQ0QsR0FBcEI7QUFFQSxJQUFJRSxVQUFKOztBQUNBLElBQUlILE9BQU8sQ0FBQyxVQUFELENBQVAsSUFDSEEsT0FBTyxDQUFDLFdBQUQsQ0FESixJQUVIQSxPQUFPLENBQUMsYUFBRCxDQUZSLEVBRXlCO0FBQ3hCRyxFQUFBQSxVQUFVLEdBQUcsS0FBYjtBQUNBLENBSkQsTUFJTyxJQUFJSCxPQUFPLENBQUMsT0FBRCxDQUFQLElBQ1ZBLE9BQU8sQ0FBQyxRQUFELENBREcsSUFFVkEsT0FBTyxDQUFDLFlBQUQsQ0FGRyxJQUdWQSxPQUFPLENBQUMsY0FBRCxDQUhELEVBR21CO0FBQ3pCRyxFQUFBQSxVQUFVLEdBQUcsSUFBYjtB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QWpDLENBQXVDLEdBQXZDLEVBQTRDLENBQTVDLENBQUQsRUFBaUQsRUFBakQsQ0FBeEI7O0FBRUEsWUFBUWxCLEdBQUcsQ0FBQzhCLFlBQVo7QUFDQyxXQUFLLFdBQUw7QUFDQyxlQUFPRixPQUFPLElBQUksQ0FBWCxHQUFlLENBQWYsR0FBbUIsQ0FBMUI7O0FBQ0QsV0FBSyxnQkFBTDtBQUNDLGVBQU8sQ0FBUDtBQUpGO0FBT0E7O0FBRUQsTUFBSSxpQkFBaUJILElBQWpCLENBQXNCekIsR0FBRyxDQUFDK0IsSUFBMUIsQ0FBSixFQUFxQztBQUNwQyxXQUFPLENBQVA7QUFDQTs7QUFFRCxNQUFJLDhEQUE4RE4sSUFBOUQsQ0FBbUV6QixHQUFHLENBQUMrQixJQUF2RSxDQUFKLEVBQWtGO0FBQ2pGLFdBQU8sQ0FBUDtBQUNBOztBQUVELE1BQUksZUFBZS9CLEdBQW5CLEVBQXdCO0FBQ3ZCLFdBQU8sQ0FBUDtBQUNBOztBQUVELE1BQUlBLEdBQUcsQ0FBQytCLElBQUosS0FBYSxNQUFqQixFQUF5QjtBQUN4QixXQUFPakIsR0FBUDtBQUNBOztBQUVELFNBQU9BLEdBQVA7QUFDQTs7QUFFRCxTQUFTa0IsZUFBVCxDQUF5QnBCLE1BQXpCLEVBQWlDO0FBQ2hDLE1BQU1MLEtBQUssR0FBR0ksYUFBYSxDQUFDQyxNQUFELENBQTNCO0FBQ0EsU0FBT04sY0FBYyxDQUFDQyxLQUFELENBQXJCO0FBQ0E7O0FBRUQwQixNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDaEJ2QixFQUFBQSxhQUFhLEVBQUVxQixlQURDO0FBRWhCRyxFQUFBQSxNQUFNLEVBQUVILGVBQWUsQ0FBQy9CLE9BQU8sQ0FBQ2tDLE1BQVQsQ0FGUDtBQUdoQkMsRUFBQUEsTUFBTSxFQUFFSixlQUFlLENBQUMvQixPQUFPLENBQUNtQyxNQUFUO0FBSFAsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XG5jb25zdCBoYXNGbGFnID0gcmVxdWlyZSgnaGFzLWZsYWcnKTtcblxuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnY7XG5cbmxldCBmb3JjZUNvbG9yO1xuaWYgKGhhc0ZsYWcoJ25vLWNvbG9yJykgfHxcblx0aGFzRmxhZygnbm8tY29sb3JzJykgfHxcblx0aGFzRmxhZygnY29sb3I9ZmFsc2UnKSkge1xuXHRmb3JjZUNvbG9yID0gZmFsc2U7XG59IGVsc2UgaWYgKGhhc0ZsYWcoJ2NvbG9yJykgfHxcblx0aGFzRmxhZygnY29sb3JzJykgfHxcblx0aGFzRmxhZygnY29sb3I9dHJ1ZScpIHx8XG5cdGhhc0ZsYWcoJ2NvbG9yPWFsd2F5cycpKSB7XG5cdGZvcmNlQ29sb3IgPSB0cnVlO1xufVxuaWYgKCdGT1JDRV9DT0xPUicgaW4gZW52KSB7XG5cdGZvcmNlQ29sb3IgPSBlbnYuRk9SQ0VfQ09MT1IubGVuZ3RoID09PSAwIHx8IHBhcnNlSW50KGVudi5GT1JDRV9DT0xPUiwgMTApICE9PSAwO1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGVMZXZlbChsZXZlbCkge1xuXHRpZiAobGV2ZWwgPT09IDApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGxldmVsLFxuXHRcdGhhc0Jhc2ljOiB0cnVlLFxuXHRcdGhhczI1NjogbGV2ZWwgPj0gMixcblx0XHRoYXMxNm06IGxldmVsID49IDNcblx0fTtcbn1cblxuZnVuY3Rpb24gc3VwcG9ydHNDb2xvcihzdHJlYW0pIHtcblx0aWYgKGZvcmNlQ29sb3IgPT09IGZhbHNlKSB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRpZiAoaGFzRmxhZygnY29sb3I9MTZtJykgfHxcblx0XHRoYXNGbGFnKCdjb2xvcj1mdWxsJykgfHxcblx0XHRoYXNGbGFnKCdjb2xvcj10cnVlY29sb3InKSkge1xuXHRcdHJldHVybiAzO1xuXHR9XG5cblx0aWYgKGhhc0ZsYWcoJ2NvbG9yPTI1NicpKSB7XG5cdFx0cmV0dXJuIDI7XG5cdH1cblxuXHRpZiAoc3RyZWFtICYmICFzdHJlYW0uaXNUVFkgJiYgZm9yY2VDb2xvciAhPT0gdHJ1ZSkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0Y29uc3QgbWluID0gZm9yY2VDb2xvciA/IDEgOiAwO1xuXG5cdGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInKSB7XG5cdFx0Ly8gTm9kZS5qcyA3LjUuMCBpcyB0aGUgZmlyc3QgdmVyc2lvbiBvZiBOb2RlLmpzIHRvIGluY2x1ZGUgYSBwYXRjaCB0b1xuXHRcdC8vIGxpYnV2IHRoYXQgZW5hYmxlcyAyNTYgY29sb3Igb3V0cHV0IG9uIFdpbmRvd3MuIEFueXRoaW5nIGVhcmxpZXIgYW5kIGl0XG5cdFx0Ly8gd29uJ3Qgd29yay4gSG93ZXZlciwgaGVyZSB3ZSB0YXJnZXQgTm9kZS5qcyA4IGF0IG1pbmltdW0gYXMgaXQgaXMgYW4gTFRTXG5cdFx0Ly8gcmVsZWFzZSwgYW5kIE5vZGUuanMgNyBpcyBub3QuIFdpbmRvd3MgMTAgYnVpbGQgMTA1ODYgaXMgdGhlIGZpcnN0IFdpbmRvd3Ncblx0XHQvLyByZWxlYXNlIHRoYXQgc3VwcG9ydHMgMjU2IGNvbG9ycy4gV2luZG93cyAxMCBidWlsZCAxNDkzMSBpcyB0aGUgZmlyc3QgcmVsZWFzZVxuXHRcdC8vIHRoYXQgc3VwcG9ydHMgMTZtL1RydWVDb2xvci5cblx0XHRjb25zdCBvc1JlbGVhc2UgPSBvcy5yZWxlYXNlKCkuc3BsaXQoJy4nKTtcblx0XHRpZiAoXG5cdFx0XHROdW1iZXIocHJvY2Vzcy52ZXJzaW9ucy5ub2RlLnNwbGl0KCcuJylbMF0pID49IDggJiZcblx0XHRcdE51bWJlcihvc1JlbGVhc2VbMF0pID49IDEwICYmXG5cdFx0XHROdW1iZXIob3NSZWxlYXNlWzJdKSA+PSAxMDU4NlxuXHRcdCkge1xuXHRcdFx0cmV0dXJuIE51bWJlcihvc1JlbGVhc2VbMl0pID49IDE0OTMxID8gMyA6IDI7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIDE7XG5cdH1cblxuXHRpZiAoJ0NJJyBpbiBlbnYpIHtcblx0XHRpZiAoWydUUkFWSVMnLCAnQ0lSQ0xFQ0knLCAnQVBQVkVZT1InLCAnR0lUTEFCX0NJJ10uc29tZShzaWduID0+IHNpZ24gaW4gZW52KSB8fCBlbnYuQ0lfTkFNRSA9PT0gJ2NvZGVzaGlwJykge1xuXHRcdFx0cmV0dXJuIDE7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1pbjtcblx0fVxuXG5cdGlmICgnVEVBTUNJVFlfVkVSU0lPTicgaW4gZW52KSB7XG5cdFx0cmV0dXJuIC9eKDlcXC4oMCpbMS05XVxcZCopXFwufFxcZHsyLH1cXC4pLy50ZXN0KGVudi5URUFNQ0lUWV9WRVJTSU9OKSA/IDEgOiAwO1xuXHR9XG5cblx0aWYgKGVudi5DT0xPUlRFUk0gPT09ICd0cnVlY29sb3InKSB7XG5cdFx0cmV0dXJuIDM7XG5cdH1cblxuXHRpZiAoJ1RFUk1fUFJPR1JBTScgaW4gZW52KSB7XG5cdFx0Y29uc3QgdmVyc2lvbiA9IHBhcnNlSW50KChlbnYuVEVSTV9QUk9HUkFNX1ZFUlNJT04gfHwgJycpLnNwbGl0KCcuJylbMF0sIDEwKTtcblxuXHRcdHN3aXRjaCAoZW52LlRFUk1fUFJPR1JBTSkge1xuXHRcdFx0Y2FzZSAnaVRlcm0uYXBwJzpcblx0XHRcdFx0cmV0dXJuIHZlcnNpb24gPj0gMyA/IDMgOiAyO1xuXHRcdFx0Y2FzZSAnQXBwbGVfVGVybWluYWwnOlxuXHRcdFx0XHRyZXR1cm4gMjtcblx0XHRcdC8vIE5vIGRlZmF1bHRcblx0XHR9XG5cdH1cblxuXHRpZiAoLy0yNTYoY29sb3IpPyQvaS50ZXN0KGVudi5URVJNKSkge1xuXHRcdHJldHVybiAyO1xuXHR9XG5cblx0aWYgKC9ec2NyZWVufF54dGVybXxednQxMDB8XnZ0MjIwfF5yeHZ0fGNvbG9yfGFuc2l8Y3lnd2lufGxpbnV4L2kudGVzdChlbnYuVEVSTSkpIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXG5cdGlmICgnQ09MT1JURVJNJyBpbiBlbnYpIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXG5cdGlmIChlbnYuVEVSTSA9PT0gJ2R1bWInKSB7XG5cdFx0cmV0dXJuIG1pbjtcblx0fVxuXG5cdHJldHVybiBtaW47XG59XG5cbmZ1bmN0aW9uIGdldFN1cHBvcnRMZXZlbChzdHJlYW0pIHtcblx0Y29uc3QgbGV2ZWwgPSBzdXBwb3J0c0NvbG9yKHN0cmVhbSk7XG5cdHJldHVybiB0cmFuc2xhdGVMZXZlbChsZXZlbCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRzdXBwb3J0c0NvbG9yOiBnZXRTdXBwb3J0TGV2ZWwsXG5cdHN0ZG91dDogZ2V0U3VwcG9ydExldmVsKHByb2Nlc3Muc3Rkb3V0KSxcblx0c3RkZXJyOiBnZXRTdXBwb3J0TGV2ZWwocHJvY2Vzcy5zdGRlcnIpXG59O1xuIl19