bef233ebc1d43af099299a796af81fe7
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Pressability = _interopRequireDefault(require("../../Pressability/Pressability"));

var _PressabilityDebug = require("../../Pressability/PressabilityDebug");

var _ViewNativeComponent = require("react-native/Libraries/Components/View/ViewNativeComponent");

var _ReactNative = _interopRequireDefault(require("react-native/Libraries/Renderer/shims/ReactNative"));

var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));

var _View = _interopRequireDefault(require("../../Components/View/View"));

var _processColor = _interopRequireDefault(require("../../StyleSheet/processColor"));

var React = _interopRequireWildcard(require("react"));

var _invariant = _interopRequireDefault(require("invariant"));

var _excluded = ["onBlur", "onFocus"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TouchableNativeFeedback = function (_React$Component) {
  (0, _inherits2.default)(TouchableNativeFeedback, _React$Component);

  var _super = _createSuper(TouchableNativeFeedback);

  function TouchableNativeFeedback() {
    var _this;

    (0, _classCallCheck2.default)(this, TouchableNativeFeedback);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    _this.state = {
      pressability: new _Pressability.default(_this._createPressabilityConfig())
    };
    return _this;
  }

  (0, _createClass2.default)(TouchableNativeFeedback, [{
    key: "_createPressabilityConfig",
    value: function _createPressabilityConfig() {
      var _this2 = this;

      return {
        cancelable: !this.props.rejectResponderTermination,
        disabled: this.props.disabled,
        hitSlop: this.props.hitSlop,
        delayLongPress: this.props.delayLongPress,
        delayPressIn: this.props.delayPressIn,
        delayPressOut: this.props.delayPressOut,
        minPressDuration: 0,
        pressRectOffset: this.props.pressRetentionOffset,
        android_disableSound: this.props.touchSoundDisabled,
        onLongPress: this.props.onLongPress,
        onPress: this.props.onPress,
        onPressIn: function onPressIn(event) {
          if (_Platform.default.OS === 'android') {
            _this2._dispatchPressedStateChange(true);

            _this2._dispatchHotspotUpdate(event);
          }

          if (_this2.props.onPressIn != null) {
            _this2.props.onPressIn(event);
          }
        },
        onPressMove: function onPressMove(event) {
          if (_Platform.default.OS === 'android') {
            _this2._dispatchHotspotUpdate(event);
          }
        },
        onPressOut: function onPressOut(event) {
          if (_Platform.default.OS === 'android') {
            _this2._dispatchPressedStateChange(false);
          }

          if (_this2.props.onPressOut != null) {
            _this2.props.onPressOut(event);
          }
        }
      };
    }
  }, {
    key: "_dispatchPressedStateChange",
    value: function _dispatchPressedStateChange(pressed) {
      if (_Platform.default.OS === 'android') {
        var hostComponentRef = _ReactNative.default.findHostInstance_DEPRECATED(this);

        if (hostComponentRef == null) {
          console.warn('Touchable: Unable to find HostComponent instance. ' + 'Has your Touchable component been unmounted?');
        } else {
          _ViewNativeComponent.Commands.setPressed(hostComponentRef, pressed);
        }
      }
    }
  }, {
    key: "_dispatchHotspotUpdate",
    value: function _dispatchHotspotUpdate(event) {
      if (_Platform.default.OS === 'android') {
        var _event$nativeEvent = event.nativeEvent,
            locationX = _event$nativeEvent.locationX,
            locationY = _event$nativeEvent.locationY;

        var hostComponentRef = _ReactNative.default.findHostInstance_DEPRECATED(this);

        if (hostComponentRef == null) {
          console.warn('Touchable: Unable to find HostComponent instance. ' + 'Has your Touchable component been unmounted?');
        } else {
          _ViewNativeComponent.Commands.hotspotUpdate(hostComponentRef, locationX != null ? locationX : 0, locationY != null ? locationY : 0);
        }
      }
    }
  }, {
    key: "render",
    value: function render() {
      var element = React.Children.only(this.props.children);
      var children = [element.props.children];

      if (__DEV__) {
        if (element.type === _View.default) {
          children.push(React.createElement(_PressabilityDebug.PressabilityDebugView, {
            color: "brown",
            hitSlop: this.props.hitSlop
          }));
        }
      }

      var _this$state$pressabil = this.state.pressability.getEventHandlers(),
          onBlur = _this$state$pressabil.onBlur,
          onFocus = _this$state$pressabil.onFocus,
          eventHandlersWithoutBlurAndFocus = (0, _objectWithoutProperties2.default)(_this$state$pressabil, _excluded);

      return React.cloneElement.apply(React, [element, (0, _extends2.default)({}, eventHandlersWithoutBlurAndFocus, getBackgroundProp(this.props.background === undefined ? TouchableNativeFeedback.SelectableBackground() : this.props.background, this.props.useForeground === true), {
        accessible: this.props.accessible !== false,
        accessibilityHint: this.props.accessibilityHint,
        accessibilityLabel: this.props.accessibilityLabel,
        accessibilityRole: this.props.accessibilityRole,
        accessibilityState: this.props.accessibilityState,
        accessibilityActions: this.props.accessibilityActions,
        onAccessibilityAction: this.props.onAccessibilityAction,
        accessibilityValue: this.props.accessibilityValue,
        importantForAccessibility: this.props.importantForAccessibility,
        accessibilityLiveRegion: this.props.accessibilityLiveRegion,
        accessibilityViewIsModal: this.props.accessibilityViewIsModal,
        accessibilityElementsHidden: this.props.accessibilityElementsHidden,
        hasTVPreferredFocus: this.props.hasTVPreferredFocus,
        hitSlop: this.props.hitSlop,
        focusable: this.props.focusable !== false && this.props.onPress !== undefined && !this.props.disabled,
        nativeID: this.props.nativeID,
        nextFocusDown: this.props.nextFocusDown,
        nextFocusForward: this.props.nextFocusForward,
        nextFocusLeft: this.props.nextFocusLeft,
        nextFocusRight: this.props.nextFocusRight,
        nextFocusUp: this.props.nextFocusUp,
        onLayout: this.props.onLayout,
        testID: this.props.testID
      })].concat(children));
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      this.state.pressability.configure(this._createPressabilityConfig());
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.state.pressability.reset();
    }
  }]);
  return TouchableNativeFeedback;
}(React.Component);

TouchableNativeFeedback.SelectableBackground = function (rippleRadius) {
  return {
    type: 'ThemeAttrAndroid',
    attribute: 'selectableItemBackground',
    rippleRadius: rippleRadius
  };
};

TouchableNativeFeedback.SelectableBackgroundBorderless = function (rippleRadius) {
  return {
    type: 'ThemeAttrAndroid',
    attribute: 'selectableItemBackgroundBorderless',
    rippleRadius: rippleRadius
  };
};

TouchableNativeFeedback.Ripple = function (color, borderless, rippleRadius) {
  var processedColor = (0, _processColor.default)(color);
  (0, _invariant.default)(processedColor == null || typeof processedColor === 'number', 'Unexpected color given for Ripple color');
  return {
    type: 'RippleAndroid',
    color: processedColor,
    borderless: borderless,
    rippleRadius: rippleRadius
  };
};

TouchableNativeFeedback.canUseNativeForeground = function () {
  return _Platform.default.OS === 'android' && _Platform.default.Version >= 23;
};

var getBackgroundProp = _Platform.default.OS === 'android' ? function (background, useForeground) {
  return useForeground && TouchableNativeFeedback.canUseNativeForeground() ? {
    nativeForegroundAndroid: background
  } : {
    nativeBackgroundAndroid: background
  };
} : function (background, useForeground) {
  return null;
};
module.exports = TouchableNativeFeedback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLmpzIl0sIm5hbWVzIjpbIlRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrIiwic3RhdGUiLCJwcmVzc2FiaWxpdHkiLCJQcmVzc2FiaWxpdHkiLCJfY3JlYXRlUHJlc3NhYmlsaXR5Q29uZmlnIiwiY2FuY2VsYWJsZSIsInByb3BzIiwicmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24iLCJkaXNhYmxlZCIsImhpdFNsb3AiLCJkZWxheUxvbmdQcmVzcyIsImRlbGF5UHJlc3NJbiIsImRlbGF5UHJlc3NPdXQiLCJtaW5QcmVzc0R1cmF0aW9uIiwicHJlc3NSZWN0T2Zmc2V0IiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJhbmRyb2lkX2Rpc2FibGVTb3VuZCIsInRvdWNoU291bmREaXNhYmxlZCIsIm9uTG9uZ1ByZXNzIiwib25QcmVzcyIsIm9uUHJlc3NJbiIsImV2ZW50IiwiUGxhdGZvcm0iLCJPUyIsIl9kaXNwYXRjaFByZXNzZWRTdGF0ZUNoYW5nZSIsIl9kaXNwYXRjaEhvdHNwb3RVcGRhdGUiLCJvblByZXNzTW92ZSIsIm9uUHJlc3NPdXQiLCJwcmVzc2VkIiwiaG9zdENvbXBvbmVudFJlZiIsIlJlYWN0TmF0aXZlIiwiZmluZEhvc3RJbnN0YW5jZV9ERVBSRUNBVEVEIiwiY29uc29sZSIsIndhcm4iLCJDb21tYW5kcyIsInNldFByZXNzZWQiLCJuYXRpdmVFdmVudCIsImxvY2F0aW9uWCIsImxvY2F0aW9uWSIsImhvdHNwb3RVcGRhdGUiLCJlbGVtZW50IiwiUmVhY3QiLCJDaGlsZHJlbiIsIm9ubHkiLCJjaGlsZHJlbiIsIl9fREVWX18iLCJ0eXBlIiwiVmlldyIsInB1c2giLCJnZXRFdmVudEhhbmRsZXJzIiwib25CbHVyIiwib25Gb2N1cyIsImV2ZW50SGFuZGxlcnNXaXRob3V0Qmx1ckFuZEZvY3VzIiwiY2xvbmVFbGVtZW50IiwiZ2V0QmFja2dyb3VuZFByb3AiLCJiYWNrZ3JvdW5kIiwidW5kZWZpbmVkIiwiU2VsZWN0YWJsZUJhY2tncm91bmQiLCJ1c2VGb3JlZ3JvdW5kIiwiYWNjZXNzaWJsZSIsImFjY2Vzc2liaWxpdHlIaW50IiwiYWNjZXNzaWJpbGl0eUxhYmVsIiwiYWNjZXNzaWJpbGl0eVJvbGUiLCJhY2Nlc3NpYmlsaXR5U3RhdGUiLCJhY2Nlc3NpYmlsaXR5QWN0aW9ucyIsIm9uQWNjZXNzaWJpbGl0eUFjdGlvbiIsImFjY2Vzc2liaWxpdHlWYWx1ZSIsImltcG9ydGFudEZvckFjY2Vzc2liaWxpdHkiLCJhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbiIsImFjY2Vzc2liaWxpdHlWaWV3SXNNb2RhbCIsImFjY2Vzc2liaWxpdHlFbGVtZW50c0hpZGRlbiIsImhhc1RWUHJlZmVycmVkRm9jdXMiLCJmb2N1c2FibGUiLCJuYXRpdmVJRCIsIm5leHRGb2N1c0Rvd24iLCJuZXh0Rm9jdXNGb3J3YXJkIiwibmV4dEZvY3VzTGVmdCIsIm5leHRGb2N1c1JpZ2h0IiwibmV4dEZvY3VzVXAiLCJvbkxheW91dCIsInRlc3RJRCIsInByZXZQcm9wcyIsInByZXZTdGF0ZSIsImNvbmZpZ3VyZSIsInJlc2V0IiwiQ29tcG9uZW50IiwicmlwcGxlUmFkaXVzIiwiYXR0cmlidXRlIiwiU2VsZWN0YWJsZUJhY2tncm91bmRCb3JkZXJsZXNzIiwiUmlwcGxlIiwiY29sb3IiLCJib3JkZXJsZXNzIiwicHJvY2Vzc2VkQ29sb3IiLCJjYW5Vc2VOYXRpdmVGb3JlZ3JvdW5kIiwiVmVyc2lvbiIsIm5hdGl2ZUZvcmVncm91bmRBbmRyb2lkIiwibmF0aXZlQmFja2dyb3VuZEFuZHJvaWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBR0E7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7OztJQTBFTUEsdUI7Ozs7Ozs7Ozs7Ozs7OztVQW1FSkMsSyxHQUFlO0FBQ2JDLE1BQUFBLFlBQVksRUFBRSxJQUFJQyxxQkFBSixD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LEVBQXFDTCxZQUFyQyxFQUErRDtBQUNuRSxNQUFNTSxjQUFjLEdBQUcsMkJBQWFGLEtBQWIsQ0FBdkI7QUFDQSwwQkFDRUUsY0FBYyxJQUFJLElBQWxCLElBQTBCLE9BQU9BLGNBQVAsS0FBMEIsUUFEdEQsRUFFRSx5Q0FGRjtBQUlBLFNBQU87QUFDTDlDLElBQUFBLElBQUksRUFBRSxlQUREO0FBRUw0QyxJQUFBQSxLQUFLLEVBQUVFLGNBRkY7QUFHTEQsSUFBQUEsVUFBVSxFQUFWQSxVQUhLO0FBSUxMLElBQUFBLFlBQVksRUFBWkE7QUFKSyxHQUFQO0FBTUQsQzs7QUEzREd0Rix1QixDQWdFRzZGLHNCLEdBQXdDO0FBQUEsU0FDN0N2RSxrQkFBU0MsRUFBVCxLQUFnQixTQUFoQixJQUE2QkQsa0JBQVN3RSxPQUFULElBQW9CLEVBREo7QUFBQSxDOztBQW1KakQsSUFBTXhDLGlCQUFpQixHQUNyQmhDLGtCQUFTQyxFQUFULEtBQWdCLFNBQWhCLEdBQ0ksVUFBQ2dDLFVBQUQsRUFBYUcsYUFBYjtBQUFBLFNBQ0VBLGFBQWEsSUFBSTFELHVCQUF1QixDQUFDNkYsc0JBQXhCLEVBQWpCLEdBQ0k7QUFBQ0UsSUFBQUEsdUJBQXVCLEVBQUV4QztBQUExQixHQURKLEdBRUk7QUFBQ3lDLElBQUFBLHVCQUF1QixFQUFFekM7QUFBMUIsR0FITjtBQUFBLENBREosR0FLSSxVQUFDQSxVQUFELEVBQWFHLGFBQWI7QUFBQSxTQUErQixJQUEvQjtBQUFBLENBTk47QUFRQXVDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxHLHVCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUHJlc3NhYmlsaXR5LCB7XG4gIHR5cGUgUHJlc3NhYmlsaXR5Q29uZmlnLFxufSBmcm9tICcuLi8uLi9QcmVzc2FiaWxpdHkvUHJlc3NhYmlsaXR5JztcbmltcG9ydCB7UHJlc3NhYmlsaXR5RGVidWdWaWV3fSBmcm9tICcuLi8uLi9QcmVzc2FiaWxpdHkvUHJlc3NhYmlsaXR5RGVidWcnO1xuaW1wb3J0IHR5cGVvZiBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2sgZnJvbSAnLi9Ub3VjaGFibGVXaXRob3V0RmVlZGJhY2snO1xuaW1wb3J0IHtDb21tYW5kc30gZnJvbSAncmVhY3QtbmF0aXZlL0xpYnJhcmllcy9Db21wb25lbnRzL1ZpZXcvVmlld05hdGl2ZUNvbXBvbmVudCc7XG5pbXBvcnQgUmVhY3ROYXRpdmUgZnJvbSAncmVhY3QtbmF0aXZlL0xpYnJhcmllcy9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZSc7XG5pbXBvcnQgdHlwZSB7UHJlc3NFdmVudH0gZnJvbSAncmVhY3QtbmF0aXZlL0xpYnJhcmllcy9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgUGxhdGZvcm0gZnJvbSAnLi4vLi4vVXRpbGl0aWVzL1BsYXRmb3JtJztcbmltcG9ydCBWaWV3IGZyb20gJy4uLy4uL0NvbXBvbmVudHMvVmlldy9WaWV3JztcbmltcG9ydCBwcm9jZXNzQ29sb3IgZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9wcm9jZXNzQ29sb3InO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC4uLlJlYWN0LkVsZW1lbnRDb25maWc8VG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrPixcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB0aGUgdHlwZSBvZiBiYWNrZ3JvdW5kIGRyYXdhYmxlIHRoYXQncyBnb2luZyB0byBiZSB1c2VkIHRvXG4gICAqIGRpc3BsYXkgZmVlZGJhY2suIEl0IHRha2VzIGFuIG9iamVjdCB3aXRoIGB0eXBlYCBwcm9wZXJ0eSBhbmQgZXh0cmEgZGF0YVxuICAgKiBkZXBlbmRpbmcgb24gdGhlIGB0eXBlYC4gSXQncyByZWNvbW1lbmRlZCB0byB1c2Ugb25lIG9mIHRoZSBzdGF0aWNcbiAgICogbWV0aG9kcyB0byBnZW5lcmF0ZSB0aGF0IGRpY3Rpb25hcnkuXG4gICAqL1xuICBiYWNrZ3JvdW5kPzogPyhcbiAgICB8ICRSZWFkT25seTx7fFxuICAgICAgICB0eXBlOiAnVGhlbWVBdHRyQW5kcm9pZCcsXG4gICAgICAgIGF0dHJpYnV0ZTpcbiAgICAgICAgICB8ICdzZWxlY3RhYmxlSXRlbUJhY2tncm91bmQnXG4gICAgICAgICAgfCAnc2VsZWN0YWJsZUl0ZW1CYWNrZ3JvdW5kQm9yZGVybGVzcycsXG4gICAgICAgIHJpcHBsZVJhZGl1czogP251bWJlcixcbiAgICAgIHx9PlxuICAgIHwgJFJlYWRPbmx5PHt8XG4gICAgICAgIHR5cGU6ICdSaXBwbGVBbmRyb2lkJyxcbiAgICAgICAgY29sb3I6ID9udW1iZXIsXG4gICAgICAgIGJvcmRlcmxlc3M6IGJvb2xlYW4sXG4gICAgICAgIHJpcHBsZVJhZGl1czogP251bWJlcixcbiAgICAgIHx9PlxuICApLFxuXG4gIC8qKlxuICAgKiBUViBwcmVmZXJyZWQgZm9jdXMgKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgKi9cbiAgaGFzVFZQcmVmZXJyZWRGb2N1cz86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBUViBuZXh0IGZvY3VzIGRvd24gKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgKi9cbiAgbmV4dEZvY3VzRG93bj86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIFRWIG5leHQgZm9jdXMgZm9yd2FyZCAoc2VlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBWaWV3IGNvbXBvbmVudCkuXG4gICAqL1xuICBuZXh0Rm9jdXNGb3J3YXJkPzogP251bWJlcixcblxuICAvKipcbiAgICogVFYgbmV4dCBmb2N1cyBsZWZ0IChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICovXG4gIG5leHRGb2N1c0xlZnQ/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBUViBuZXh0IGZvY3VzIHJpZ2h0IChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICovXG4gIG5leHRGb2N1c1JpZ2h0PzogP251bWJlcixcblxuICAvKipcbiAgICogVFYgbmV4dCBmb2N1cyB1cCAoc2VlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBWaWV3IGNvbXBvbmVudCkuXG4gICAqL1xuICBuZXh0Rm9jdXNVcD86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIHRvIGFkZCB0aGUgcmlwcGxlIGVmZmVjdCB0byB0aGUgZm9yZWdyb3VuZCBvZiB0aGUgdmlldywgaW5zdGVhZFxuICAgKiBvZiB0aGUgYmFja2dyb3VuZC4gVGhpcyBpcyB1c2VmdWwgaWYgb25lIG9mIHlvdXIgY2hpbGQgdmlld3MgaGFzIGFcbiAgICogYmFja2dyb3VuZCBvZiBpdHMgb3duLCBvciB5b3UncmUgZS5nLiBkaXNwbGF5aW5nIGltYWdlcywgYW5kIHlvdSBkb24ndCB3YW50XG4gICAqIHRoZSByaXBwbGUgdG8gYmUgY292ZXJlZCBieSB0aGVtLlxuICAgKlxuICAgKiBDaGVjayBUb3VjaGFibGVOYXRpdmVGZWVkYmFjay5jYW5Vc2VOYXRpdmVGb3JlZ3JvdW5kKCkgZmlyc3QsIGFzIHRoaXMgaXNcbiAgICogb25seSBhdmFpbGFibGUgb24gQW5kcm9pZCA2LjAgYW5kIGFib3ZlLiBJZiB5b3UgdHJ5IHRvIHVzZSB0aGlzIG9uIG9sZGVyXG4gICAqIHZlcnNpb25zLCB0aGlzIHdpbGwgZmFsbGJhY2sgdG8gYmFja2dyb3VuZC5cbiAgICovXG4gIHVzZUZvcmVncm91bmQ/OiA/Ym9vbGVhbixcbnx9PjtcblxudHlwZSBTdGF0ZSA9ICRSZWFkT25seTx7fFxuICBwcmVzc2FiaWxpdHk6IFByZXNzYWJpbGl0eSxcbnx9PjtcblxuY2xhc3MgVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdmFsdWUgZm9yIHRoZSBgYmFja2dyb3VuZGAgcHJvcCB0aGF0IHVzZXMgdGhlIEFuZHJvaWQgdGhlbWUnc1xuICAgKiBkZWZhdWx0IGJhY2tncm91bmQgZm9yIHNlbGVjdGFibGUgZWxlbWVudHMuXG4gICAqL1xuICBzdGF0aWMgU2VsZWN0YWJsZUJhY2tncm91bmQ6IChcbiAgICByaXBwbGVSYWRpdXM6ID9udW1iZXIsXG4gICkgPT4gJFJlYWRPbmx5PHt8XG4gICAgYXR0cmlidXRlOiAnc2VsZWN0YWJsZUl0ZW1CYWNrZ3JvdW5kJyxcbiAgICB0eXBlOiAnVGhlbWVBdHRyQW5kcm9pZCcsXG4gICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICB8fT4gPSAocmlwcGxlUmFkaXVzOiA/bnVtYmVyKSA9PiAoe1xuICAgIHR5cGU6ICdUaGVtZUF0dHJBbmRyb2lkJyxcbiAgICBhdHRyaWJ1dGU6ICdzZWxlY3RhYmxlSXRlbUJhY2tncm91bmQnLFxuICAgIHJpcHBsZVJhZGl1cyxcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB2YWx1ZSBmb3IgdGhlIGBiYWNrZ3JvdW5kYCBwcm9wIHRoYXQgdXNlcyB0aGUgQW5kcm9pZCB0aGVtZSdzXG4gICAqIGRlZmF1bHQgYmFja2dyb3VuZCBmb3IgYm9yZGVybGVzcyBzZWxlY3RhYmxlIGVsZW1lbnRzLiBSZXF1aXJlcyBBUEkgMjErLlxuICAgKi9cbiAgc3RhdGljIFNlbGVjdGFibGVCYWNrZ3JvdW5kQm9yZGVybGVzczogKFxuICAgIHJpcHBsZVJhZGl1czogP251bWJlcixcbiAgKSA9PiAkUmVhZE9ubHk8e3xcbiAgICBhdHRyaWJ1dGU6ICdzZWxlY3RhYmxlSXRlbUJhY2tncm91bmRCb3JkZXJsZXNzJyxcbiAgICB0eXBlOiAnVGhlbWVBdHRyQW5kcm9pZCcsXG4gICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICB8fT4gPSAocmlwcGxlUmFkaXVzOiA/bnVtYmVyKSA9PiAoe1xuICAgIHR5cGU6ICdUaGVtZUF0dHJBbmRyb2lkJyxcbiAgICBhdHRyaWJ1dGU6ICdzZWxlY3RhYmxlSXRlbUJhY2tncm91bmRCb3JkZXJsZXNzJyxcbiAgICByaXBwbGVSYWRpdXMsXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdmFsdWUgZm9yIHRoZSBgYmFja2dyb3VuZGAgcHJvcCB0aGF0IHVzZXMgdGhlIEFuZHJvaWQgcmlwcGxlIHdpdGhcbiAgICogdGhlIHN1cHBsaWVkIGNvbG9yLiBJZiBgYm9yZGVybGVzc2AgaXMgdHJ1ZSwgdGhlIHJpcHBsZSB3aWxsIHJlbmRlciBvdXRzaWRlXG4gICAqIG9mIHRoZSB2aWV3IGJvdW5kcy4gUmVxdWlyZXMgQVBJIDIxKy5cbiAgICovXG4gIHN0YXRpYyBSaXBwbGU6IChcbiAgICBjb2xvcjogc3RyaW5nLFxuICAgIGJvcmRlcmxlc3M6IGJvb2xlYW4sXG4gICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICApID0+ICRSZWFkT25seTx7fFxuICAgIGJvcmRlcmxlc3M6IGJvb2xlYW4sXG4gICAgY29sb3I6ID9udW1iZXIsXG4gICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICAgIHR5cGU6ICdSaXBwbGVBbmRyb2lkJyxcbiAgfH0+ID0gKGNvbG9yOiBzdHJpbmcsIGJvcmRlcmxlc3M6IGJvb2xlYW4sIHJpcHBsZVJhZGl1czogP251bWJlcikgPT4ge1xuICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGNvbG9yKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBwcm9jZXNzZWRDb2xvciA9PSBudWxsIHx8IHR5cGVvZiBwcm9jZXNzZWRDb2xvciA9PT0gJ251bWJlcicsXG4gICAgICAnVW5leHBlY3RlZCBjb2xvciBnaXZlbiBmb3IgUmlwcGxlIGNvbG9yJyxcbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnUmlwcGxlQW5kcm9pZCcsXG4gICAgICBjb2xvcjogcHJvY2Vzc2VkQ29sb3IsXG4gICAgICBib3JkZXJsZXNzLFxuICAgICAgcmlwcGxlUmFkaXVzLFxuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgYHVzZUZvcmVncm91bmRgIGlzIHN1cHBvcnRlZC5cbiAgICovXG4gIHN0YXRpYyBjYW5Vc2VOYXRpdmVGb3JlZ3JvdW5kOiAoKSA9PiBib29sZWFuID0gKCkgPT5cbiAgICBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnICYmIFBsYXRmb3JtLlZlcnNpb24gPj0gMjM7XG5cbiAgc3RhdGU6IFN0YXRlID0ge1xuICAgIHByZXNzYWJpbGl0eTogbmV3IFByZXNzYWJpbGl0eSh0aGlzLl9jcmVhdGVQcmVzc2FiaWxpdHlDb25maWcoKSksXG4gIH07XG5cbiAgX2NyZWF0ZVByZXNzYWJpbGl0eUNvbmZpZygpOiBQcmVzc2FiaWxpdHlDb25maWcge1xuICAgIHJldHVybiB7XG4gICAgICBjYW5jZWxhYmxlOiAhdGhpcy5wcm9wcy5yZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbixcbiAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgaGl0U2xvcDogdGhpcy5wcm9wcy5oaXRTbG9wLFxuICAgICAgZGVsYXlMb25nUHJlc3M6IHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MsXG4gICAgICBkZWxheVByZXNzSW46IHRoaXMucHJvcHMuZGVsYXlQcmVzc0luLFxuICAgICAgZGVsYXlQcmVzc091dDogdGhpcy5wcm9wcy5kZWxheVByZXNzT3V0LFxuICAgICAgbWluUHJlc3NEdXJhdGlvbjogMCxcbiAgICAgIHByZXNzUmVjdE9mZnNldDogdGhpcy5wcm9wcy5wcmVzc1JldGVudGlvbk9mZnNldCxcbiAgICAgIGFuZHJvaWRfZGlzYWJsZVNvdW5kOiB0aGlzLnByb3BzLnRvdWNoU291bmREaXNhYmxlZCxcbiAgICAgIG9uTG9uZ1ByZXNzOiB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzLFxuICAgICAgb25QcmVzczogdGhpcy5wcm9wcy5vblByZXNzLFxuICAgICAgb25QcmVzc0luOiBldmVudCA9PiB7XG4gICAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hQcmVzc2VkU3RhdGVDaGFuZ2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hIb3RzcG90VXBkYXRlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblByZXNzSW4gIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QcmVzc0luKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJlc3NNb3ZlOiBldmVudCA9PiB7XG4gICAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hIb3RzcG90VXBkYXRlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJlc3NPdXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgICB0aGlzLl9kaXNwYXRjaFByZXNzZWRTdGF0ZUNoYW5nZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25QcmVzc091dCAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblByZXNzT3V0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgX2Rpc3BhdGNoUHJlc3NlZFN0YXRlQ2hhbmdlKHByZXNzZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgY29uc3QgaG9zdENvbXBvbmVudFJlZiA9IFJlYWN0TmF0aXZlLmZpbmRIb3N0SW5zdGFuY2VfREVQUkVDQVRFRCh0aGlzKTtcbiAgICAgIGlmIChob3N0Q29tcG9uZW50UmVmID09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdUb3VjaGFibGU6IFVuYWJsZSB0byBmaW5kIEhvc3RDb21wb25lbnQgaW5zdGFuY2UuICcgK1xuICAgICAgICAgICAgJ0hhcyB5b3VyIFRvdWNoYWJsZSBjb21wb25lbnQgYmVlbiB1bm1vdW50ZWQ/JyxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIENvbW1hbmRzLnNldFByZXNzZWQoaG9zdENvbXBvbmVudFJlZiwgcHJlc3NlZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX2Rpc3BhdGNoSG90c3BvdFVwZGF0ZShldmVudDogUHJlc3NFdmVudCk6IHZvaWQge1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zdCB7bG9jYXRpb25YLCBsb2NhdGlvbll9ID0gZXZlbnQubmF0aXZlRXZlbnQ7XG4gICAgICBjb25zdCBob3N0Q29tcG9uZW50UmVmID0gUmVhY3ROYXRpdmUuZmluZEhvc3RJbnN0YW5jZV9ERVBSRUNBVEVEKHRoaXMpO1xuICAgICAgaWYgKGhvc3RDb21wb25lbnRSZWYgPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1RvdWNoYWJsZTogVW5hYmxlIHRvIGZpbmQgSG9zdENvbXBvbmVudCBpbnN0YW5jZS4gJyArXG4gICAgICAgICAgICAnSGFzIHlvdXIgVG91Y2hhYmxlIGNvbXBvbmVudCBiZWVuIHVubW91bnRlZD8nLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ29tbWFuZHMuaG90c3BvdFVwZGF0ZShcbiAgICAgICAgICBob3N0Q29tcG9uZW50UmVmLFxuICAgICAgICAgIGxvY2F0aW9uWCA/PyAwLFxuICAgICAgICAgIGxvY2F0aW9uWSA/PyAwLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuQ2hpbGRyZW4ub25seSh0aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtlbGVtZW50LnByb3BzLmNoaWxkcmVuXTtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gVmlldykge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICAgIDxQcmVzc2FiaWxpdHlEZWJ1Z1ZpZXcgY29sb3I9XCJicm93blwiIGhpdFNsb3A9e3RoaXMucHJvcHMuaGl0U2xvcH0gLz4sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQkFDS1dBUkQtQ09NUEFUSUJJTElUWTogRm9jdXMgYW5kIGJsdXIgZXZlbnRzIHdlcmUgbmV2ZXIgc3VwcG9ydGVkIGJlZm9yZVxuICAgIC8vIGFkb3B0aW5nIGBQcmVzc2FiaWxpdHlgLCBzbyBwcmVzZXJ2ZSB0aGF0IGJlaGF2aW9yLlxuICAgIGNvbnN0IHtcbiAgICAgIG9uQmx1cixcbiAgICAgIG9uRm9jdXMsXG4gICAgICAuLi5ldmVudEhhbmRsZXJzV2l0aG91dEJsdXJBbmRGb2N1c1xuICAgIH0gPSB0aGlzLnN0YXRlLnByZXNzYWJpbGl0eS5nZXRFdmVudEhhbmRsZXJzKCk7XG5cbiAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KFxuICAgICAgZWxlbWVudCxcbiAgICAgIHtcbiAgICAgICAgLi4uZXZlbnRIYW5kbGVyc1dpdGhvdXRCbHVyQW5kRm9jdXMsXG4gICAgICAgIC4uLmdldEJhY2tncm91bmRQcm9wKFxuICAgICAgICAgIHRoaXMucHJvcHMuYmFja2dyb3VuZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IFRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLlNlbGVjdGFibGVCYWNrZ3JvdW5kKClcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy5iYWNrZ3JvdW5kLFxuICAgICAgICAgIHRoaXMucHJvcHMudXNlRm9yZWdyb3VuZCA9PT0gdHJ1ZSxcbiAgICAgICAgKSxcbiAgICAgICAgYWNjZXNzaWJsZTogdGhpcy5wcm9wcy5hY2Nlc3NpYmxlICE9PSBmYWxzZSxcbiAgICAgICAgYWNjZXNzaWJpbGl0eUhpbnQ6IHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUhpbnQsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlSb2xlLFxuICAgICAgICBhY2Nlc3NpYmlsaXR5U3RhdGU6IHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlLFxuICAgICAgICBhY2Nlc3NpYmlsaXR5QWN0aW9uczogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5QWN0aW9ucyxcbiAgICAgICAgb25BY2Nlc3NpYmlsaXR5QWN0aW9uOiB0aGlzLnByb3BzLm9uQWNjZXNzaWJpbGl0eUFjdGlvbixcbiAgICAgICAgYWNjZXNzaWJpbGl0eVZhbHVlOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlWYWx1ZSxcbiAgICAgICAgaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eTogdGhpcy5wcm9wcy5pbXBvcnRhbnRGb3JBY2Nlc3NpYmlsaXR5LFxuICAgICAgICBhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbjogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbixcbiAgICAgICAgYWNjZXNzaWJpbGl0eVZpZXdJc01vZGFsOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlWaWV3SXNNb2RhbCxcbiAgICAgICAgYWNjZXNzaWJpbGl0eUVsZW1lbnRzSGlkZGVuOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlFbGVtZW50c0hpZGRlbixcbiAgICAgICAgaGFzVFZQcmVmZXJyZWRGb2N1czogdGhpcy5wcm9wcy5oYXNUVlByZWZlcnJlZEZvY3VzLFxuICAgICAgICBoaXRTbG9wOiB0aGlzLnByb3BzLmhpdFNsb3AsXG4gICAgICAgIGZvY3VzYWJsZTpcbiAgICAgICAgICB0aGlzLnByb3BzLmZvY3VzYWJsZSAhPT0gZmFsc2UgJiZcbiAgICAgICAgICB0aGlzLnByb3BzLm9uUHJlc3MgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICF0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICBuYXRpdmVJRDogdGhpcy5wcm9wcy5uYXRpdmVJRCxcbiAgICAgICAgbmV4dEZvY3VzRG93bjogdGhpcy5wcm9wcy5uZXh0Rm9jdXNEb3duLFxuICAgICAgICBuZXh0Rm9jdXNGb3J3YXJkOiB0aGlzLnByb3BzLm5leHRGb2N1c0ZvcndhcmQsXG4gICAgICAgIG5leHRGb2N1c0xlZnQ6IHRoaXMucHJvcHMubmV4dEZvY3VzTGVmdCxcbiAgICAgICAgbmV4dEZvY3VzUmlnaHQ6IHRoaXMucHJvcHMubmV4dEZvY3VzUmlnaHQsXG4gICAgICAgIG5leHRGb2N1c1VwOiB0aGlzLnByb3BzLm5leHRGb2N1c1VwLFxuICAgICAgICBvbkxheW91dDogdGhpcy5wcm9wcy5vbkxheW91dCxcbiAgICAgICAgdGVzdElEOiB0aGlzLnByb3BzLnRlc3RJRCxcbiAgICAgIH0sXG4gICAgICAuLi5jaGlsZHJlbixcbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMsIHByZXZTdGF0ZTogU3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlLnByZXNzYWJpbGl0eS5jb25maWd1cmUodGhpcy5fY3JlYXRlUHJlc3NhYmlsaXR5Q29uZmlnKCkpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0ZS5wcmVzc2FiaWxpdHkucmVzZXQoKTtcbiAgfVxufVxuXG5jb25zdCBnZXRCYWNrZ3JvdW5kUHJvcCA9XG4gIFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCdcbiAgICA/IChiYWNrZ3JvdW5kLCB1c2VGb3JlZ3JvdW5kKSA9PlxuICAgICAgICB1c2VGb3JlZ3JvdW5kICYmIFRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLmNhblVzZU5hdGl2ZUZvcmVncm91bmQoKVxuICAgICAgICAgID8ge25hdGl2ZUZvcmVncm91bmRBbmRyb2lkOiBiYWNrZ3JvdW5kfVxuICAgICAgICAgIDoge25hdGl2ZUJhY2tncm91bmRBbmRyb2lkOiBiYWNrZ3JvdW5kfVxuICAgIDogKGJhY2tncm91bmQsIHVzZUZvcmVncm91bmQpID0+IG51bGw7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2s7XG4iXX0=