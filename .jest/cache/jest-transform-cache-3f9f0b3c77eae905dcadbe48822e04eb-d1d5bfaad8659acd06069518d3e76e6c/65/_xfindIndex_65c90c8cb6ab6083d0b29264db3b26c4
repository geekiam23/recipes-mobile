978e84499e8eb56dd080af974c495165
var _curry2 = require("./_curry2");

var _reduced = require("./_reduced");

var _xfBase = require("./_xfBase");

var XFindIndex = function () {
  function XFindIndex(f, xf) {
    this.xf = xf;
    this.f = f;
    this.idx = -1;
    this.found = false;
  }

  XFindIndex.prototype['@@transducer/init'] = _xfBase.init;

  XFindIndex.prototype['@@transducer/result'] = function (result) {
    if (!this.found) {
      result = this.xf['@@transducer/step'](result, -1);
    }

    return this.xf['@@transducer/result'](result);
  };

  XFindIndex.prototype['@@transducer/step'] = function (result, input) {
    this.idx += 1;

    if (this.f(input)) {
      this.found = true;
      result = _reduced(this.xf['@@transducer/step'](result, this.idx));
    }

    return result;
  };

  return XFindIndex;
}();

var _xfindIndex = _curry2(function _xfindIndex(f, xf) {
  return new XFindIndex(f, xf);
});

module.exports = _xfindIndex;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl94ZmluZEluZGV4LmpzIl0sIm5hbWVzIjpbIl9jdXJyeTIiLCJyZXF1aXJlIiwiX3JlZHVjZWQiLCJfeGZCYXNlIiwiWEZpbmRJbmRleCIsImYiLCJ4ZiIsImlkeCIsImZvdW5kIiwicHJvdG90eXBlIiwiaW5pdCIsInJlc3VsdCIsImlucHV0IiwiX3hmaW5kSW5kZXgiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQWdCQyxPQUFPLGFBQWxDOztBQUVBLElBQUlDLFFBQVEsR0FBZ0JELE9BQU8sY0FBbkM7O0FBRUEsSUFBSUUsT0FBTyxHQUFnQkYsT0FBTyxhQUFsQzs7QUFFQSxJQUFJRyxVQUFVLEdBQWdCLFlBQVk7QUFFeEMsV0FBU0EsVUFBVCxDQUFvQkMsQ0FBcEIsRUFBdUJDLEVBQXZCLEVBQTJCO0FBQ3pCLFNBQUtBLEVBQUwsR0FBVUEsRUFBVjtBQUNBLFNBQUtELENBQUwsR0FBU0EsQ0FBVDtBQUNBLFNBQUtFLEdBQUwsR0FBVyxDQUFDLENBQVo7QUFDQSxTQUFLQyxLQUFMLEdBQWEsS0FBYjtBQUNEOztBQUNESixFQUFBQSxVQUFVLENBQUNLLFNBQVgsQ0FBcUIsbUJBQXJCLElBQTRDTixPQUFPLENBQUNPLElBQXBEOztBQUNBTixFQUFBQSxVQUFVLENBQUNLLFNBQVgsQ0FBcUIscUJBQXJCLElBQThDLFVBQVVFLE1BQVYsRUFBa0I7QUFDOUQsUUFBSSxDQUFDLEtBQUtILEtBQVYsRUFBaUI7QUFDZkcsTUFBQUEsTUFBTSxHQUFHLEtBQUtMLEVBQUwsQ0FBUSxtQkFBUixFQUE2QkssTUFBN0IsRUFBcUMsQ0FBQyxDQUF0QyxDQUFUO0FBQ0Q7O0FBQ0QsV0FBTyxLQUFLTCxFQUFMLENBQVEscUJBQVIsRUFBK0JLLE1BQS9CLENBQVA7QUFDRCxHQUxEOztBQU1BUCxFQUFBQSxVQUFVLENBQUNLLFNBQVgsQ0FBcUIsbUJBQXJCLElBQTRDLFVBQVVFLE1BQVYsRUFBa0JDLEtBQWxCLEVBQXlCO0FBQ25FLFNBQUtMLEdBQUwsSUFBWSxDQUFaOztBQUNBLFFBQUksS0FBS0YsQ0FBTCxDQUFPTyxLQUFQLENBQUosRUFBbUI7QUFDakIsV0FBS0osS0FBTCxHQUFhLElBQWI7QUFDQUcsTUFBQUEsTUFBTSxHQUFHVCxRQUFRLENBQUMsS0FBS0ksRUFBTCxDQUFRLG1CQUFSLEVBQTZCSyxNQUE3QixFQUFxQyxLQUFLSixHQUExQyxDQUFELENBQWpCO0FBQ0Q7O0FBQ0QsV0FBT0ksTUFBUDtBQUNELEdBUEQ7O0FBU0EsU0FBT1AsVUFBUDtBQUNELENBekI2QixFQUE5Qjs7QUEyQkEsSUFBSVMsV0FBVyxHQUFnQmIsT0FBTyxDQUFDLFNBQVNhLFdBQVQsQ0FBcUJSLENBQXJCLEVBQXdCQyxFQUF4QixFQUE0QjtBQUNqRSxTQUFPLElBQUlGLFVBQUosQ0FBZUMsQ0FBZixFQUFrQkMsRUFBbEIsQ0FBUDtBQUNELENBRnFDLENBQXRDOztBQUdBUSxNQUFNLENBQUNDLE9BQVAsR0FBaUJGLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9jdXJyeTIgPSAvKiNfX1BVUkVfXyovcmVxdWlyZSgnLi9fY3VycnkyJyk7XG5cbnZhciBfcmVkdWNlZCA9IC8qI19fUFVSRV9fKi9yZXF1aXJlKCcuL19yZWR1Y2VkJyk7XG5cbnZhciBfeGZCYXNlID0gLyojX19QVVJFX18qL3JlcXVpcmUoJy4vX3hmQmFzZScpO1xuXG52YXIgWEZpbmRJbmRleCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG5cbiAgZnVuY3Rpb24gWEZpbmRJbmRleChmLCB4Zikge1xuICAgIHRoaXMueGYgPSB4ZjtcbiAgICB0aGlzLmYgPSBmO1xuICAgIHRoaXMuaWR4ID0gLTE7XG4gICAgdGhpcy5mb3VuZCA9IGZhbHNlO1xuICB9XG4gIFhGaW5kSW5kZXgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICBYRmluZEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIGlmICghdGhpcy5mb3VuZCkge1xuICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIC0xKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICB9O1xuICBYRmluZEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgdGhpcy5pZHggKz0gMTtcbiAgICBpZiAodGhpcy5mKGlucHV0KSkge1xuICAgICAgdGhpcy5mb3VuZCA9IHRydWU7XG4gICAgICByZXN1bHQgPSBfcmVkdWNlZCh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5pZHgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXR1cm4gWEZpbmRJbmRleDtcbn0oKTtcblxudmFyIF94ZmluZEluZGV4ID0gLyojX19QVVJFX18qL19jdXJyeTIoZnVuY3Rpb24gX3hmaW5kSW5kZXgoZiwgeGYpIHtcbiAgcmV0dXJuIG5ldyBYRmluZEluZGV4KGYsIHhmKTtcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfeGZpbmRJbmRleDsiXX0=