{"version":3,"sources":["events.js"],"names":["Object","defineProperty","exports","value","fireEvent","createEvent","_config","require","_helpers","_eventMap","element","event","getConfig","eventWrapper","Error","type","dispatchEvent","eventName","node","init","EventType","defaultInit","eventInit","target","files","targetProperties","undefined","setNativeValue","configurable","enumerable","writable","window","getWindowFromNode","EventConstructor","Event","document","bubbles","cancelable","detail","otherInit","initEvent","keys","forEach","eventKey","dataTransferProperties","dataTransferKey","dataTransferValue","DataTransfer","getOwnPropertyNames","reduce","acc","propName","eventMap","key","toLowerCase","getOwnPropertyDescriptor","valueSetter","set","prototype","getPrototypeOf","prototypeValueSetter","call","eventAliasMap","aliasKey"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fireEvent = fireEvent;\nexports.createEvent = createEvent;\n\nvar _config = require(\"./config\");\n\nvar _helpers = require(\"./helpers\");\n\nvar _eventMap = require(\"./event-map\");\n\nfunction fireEvent(element, event) {\n  return (0, _config.getConfig)().eventWrapper(() => {\n    if (!event) {\n      throw new Error(`Unable to fire an event - please provide an event object.`);\n    }\n\n    if (!element) {\n      throw new Error(`Unable to fire a \"${event.type}\" event - please provide a DOM element.`);\n    }\n\n    return element.dispatchEvent(event);\n  });\n}\n\nfunction createEvent(eventName, node, init, {\n  EventType = 'Event',\n  defaultInit = {}\n} = {}) {\n  if (!node) {\n    throw new Error(`Unable to fire a \"${eventName}\" event - please provide a DOM element.`);\n  }\n\n  const eventInit = { ...defaultInit,\n    ...init\n  };\n  const {\n    target: {\n      value,\n      files,\n      ...targetProperties\n    } = {}\n  } = eventInit;\n\n  if (value !== undefined) {\n    setNativeValue(node, value);\n  }\n\n  if (files !== undefined) {\n    // input.files is a read-only property so this is not allowed:\n    // input.files = [file]\n    // so we have to use this workaround to set the property\n    Object.defineProperty(node, 'files', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: files\n    });\n  }\n\n  Object.assign(node, targetProperties);\n  const window = (0, _helpers.getWindowFromNode)(node);\n  const EventConstructor = window[EventType] || window.Event;\n  let event;\n  /* istanbul ignore else  */\n\n  if (typeof EventConstructor === 'function') {\n    event = new EventConstructor(eventName, eventInit);\n  } else {\n    // IE11 polyfill from https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n    event = window.document.createEvent(EventType);\n    const {\n      bubbles,\n      cancelable,\n      detail,\n      ...otherInit\n    } = eventInit;\n    event.initEvent(eventName, bubbles, cancelable, detail);\n    Object.keys(otherInit).forEach(eventKey => {\n      event[eventKey] = otherInit[eventKey];\n    });\n  } // DataTransfer is not supported in jsdom: https://github.com/jsdom/jsdom/issues/1568\n\n\n  const dataTransferProperties = ['dataTransfer', 'clipboardData'];\n  dataTransferProperties.forEach(dataTransferKey => {\n    const dataTransferValue = eventInit[dataTransferKey];\n\n    if (typeof dataTransferValue === 'object') {\n      /* istanbul ignore if  */\n      if (typeof window.DataTransfer === 'function') {\n        Object.defineProperty(event, dataTransferKey, {\n          value: Object.getOwnPropertyNames(dataTransferValue).reduce((acc, propName) => {\n            Object.defineProperty(acc, propName, {\n              value: dataTransferValue[propName]\n            });\n            return acc;\n          }, new window.DataTransfer())\n        });\n      } else {\n        Object.defineProperty(event, dataTransferKey, {\n          value: dataTransferValue\n        });\n      }\n    }\n  });\n  return event;\n}\n\nObject.keys(_eventMap.eventMap).forEach(key => {\n  const {\n    EventType,\n    defaultInit\n  } = _eventMap.eventMap[key];\n  const eventName = key.toLowerCase();\n\n  createEvent[key] = (node, init) => createEvent(eventName, node, init, {\n    EventType,\n    defaultInit\n  });\n\n  fireEvent[key] = (node, init) => fireEvent(node, createEvent[key](node, init));\n}); // function written after some investigation here:\n// https://github.com/facebook/react/issues/10135#issuecomment-401496776\n\nfunction setNativeValue(element, value) {\n  const {\n    set: valueSetter\n  } = Object.getOwnPropertyDescriptor(element, 'value') || {};\n  const prototype = Object.getPrototypeOf(element);\n  const {\n    set: prototypeValueSetter\n  } = Object.getOwnPropertyDescriptor(prototype, 'value') || {};\n\n  if (prototypeValueSetter && valueSetter !== prototypeValueSetter) {\n    prototypeValueSetter.call(element, value);\n  }\n  /* istanbul ignore next (I don't want to bother) */\n  else if (valueSetter) {\n      valueSetter.call(element, value);\n    } else {\n      throw new Error('The given element does not have a value setter');\n    }\n}\n\nObject.keys(_eventMap.eventAliasMap).forEach(aliasKey => {\n  const key = _eventMap.eventAliasMap[aliasKey];\n\n  fireEvent[aliasKey] = (...args) => fireEvent[key](...args);\n});\n/* eslint complexity:[\"error\", 9] */"]}