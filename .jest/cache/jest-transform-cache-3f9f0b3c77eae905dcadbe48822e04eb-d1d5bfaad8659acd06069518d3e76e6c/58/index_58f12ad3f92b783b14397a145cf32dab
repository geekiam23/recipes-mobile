3d0479d90dbad9e2d0ad8c87ede503e6
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.shouldHighlight = shouldHighlight;
exports.getChalk = getChalk;
exports.default = highlight;

var _jsTokens = require("js-tokens");

var _helperValidatorIdentifier = require("@babel/helper-validator-identifier");

var _chalk = require("chalk");

var sometimesKeywords = new Set(["as", "async", "from", "get", "of", "set"]);

function getDefs(chalk) {
  return {
    keyword: chalk.cyan,
    capitalized: chalk.yellow,
    jsxIdentifier: chalk.yellow,
    punctuator: chalk.yellow,
    number: chalk.magenta,
    string: chalk.green,
    regex: chalk.magenta,
    comment: chalk.grey,
    invalid: chalk.white.bgRed.bold
  };
}

var NEWLINE = /\r\n|[\n\r\u2028\u2029]/;
var BRACKET = /^[()[\]{}]$/;
var tokenize;
{
  var JSX_TAG = /^[a-z][\w-]*$/i;

  var getTokenType = function getTokenType(token, offset, text) {
    if (token.type === "name") {
      if ((0, _helperValidatorIdentifier.isKeyword)(token.value) || (0, _helperValidatorIdentifier.isStrictReservedWord)(token.value, true) || sometimesKeywords.has(token.value)) {
        return "keyword";
      }

      if (JSX_TAG.test(token.value) && (text[offset - 1] === "<" || text.substr(offset - 2, 2) == "</")) {
        return "jsxIdentifier";
      }

      if (token.value[0] !== token.value[0].toLowerCase()) {
        return "capitalized";
      }
    }

    if (token.type === "punctuator" && BRACKET.test(token.value)) {
      return "bracket";
    }

    if (token.type === "invalid" && (token.value === "@" || token.value === "#")) {
      return "punctuator";
    }

    return token.type;
  };

  tokenize = _regenerator.default.mark(function tokenize(text) {
    var match, token;
    return _regenerator.default.wrap(function tokenize$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!(match = _jsTokens.default.exec(text))) {
              _context.next = 6;
              break;
            }

            token = _jsTokens.matchToToken(match);
            _context.next = 4;
            return {
              type: getTokenType(token, match.index, text),
              value: token.value
            };

          case 4:
            _context.next = 0;
            break;

          case 6:
          case "end":
            return _context.stop();
        }
      }
    }, tokenize);
  });
}

function highlightTokens(defs, text) {
  var highlighted = "";

  var _loop = function _loop(type, value) {
    var colorize = defs[type];

    if (colorize) {
      highlighted += value.split(NEWLINE).map(function (str) {
        return colorize(str);
      }).join("\n");
    } else {
      highlighted += value;
    }
  };

  for (var _iterator = _createForOfIteratorHelperLoose(tokenize(text)), _step; !(_step = _iterator()).done;) {
    var _ref = _step.value;
    var type = _ref.type;
    var value = _ref.value;

    _loop(type, value);
  }

  return highlighted;
}

function shouldHighlight(options) {
  return !!_chalk.supportsColor || options.forceColor;
}

function getChalk(options) {
  return options.forceColor ? new _chalk.constructor({
    enabled: true,
    level: 1
  }) : _chalk;
}

function highlight(code) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if (shouldHighlight(options)) {
    var chalk = getChalk(options);
    var defs = getDefs(chalk);
    return highlightTokens(defs, code);
  } else {
    return code;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwic2hvdWxkSGlnaGxpZ2h0IiwiZ2V0Q2hhbGsiLCJkZWZhdWx0IiwiaGlnaGxpZ2h0IiwiX2pzVG9rZW5zIiwicmVxdWlyZSIsIl9oZWxwZXJWYWxpZGF0b3JJZGVudGlmaWVyIiwiX2NoYWxrIiwic29tZXRpbWVzS2V5d29yZHMiLCJTZXQiLCJnZXREZWZzIiwiY2hhbGsiLCJrZXl3b3JkIiwiY3lhbiIsImNhcGl0YWxpemVkIiwieWVsbG93IiwianN4SWRlbnRpZmllciIsInB1bmN0dWF0b3IiLCJudW1iZXIiLCJtYWdlbnRhIiwic3RyaW5nIiwiZ3JlZW4iLCJyZWdleCIsImNvbW1lbnQiLCJncmV5IiwiaW52YWxpZCIsIndoaXRlIiwiYmdSZWQiLCJib2xkIiwiTkVXTElORSIsIkJSQUNLRVQiLCJ0b2tlbml6ZSIsIkpTWF9UQUciLCJnZXRUb2tlblR5cGUiLCJ0b2tlbiIsIm9mZnNldCIsInRleHQiLCJ0eXBlIiwiaXNLZXl3b3JkIiwiaXNTdHJpY3RSZXNlcnZlZFdvcmQiLCJoYXMiLCJ0ZXN0Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsImV4ZWMiLCJtYXRjaFRvVG9rZW4iLCJpbmRleCIsImhpZ2hsaWdodFRva2VucyIsImRlZnMiLCJoaWdobGlnaHRlZCIsImNvbG9yaXplIiwic3BsaXQiLCJtYXAiLCJzdHIiLCJqb2luIiwib3B0aW9ucyIsInN1cHBvcnRzQ29sb3IiLCJmb3JjZUNvbG9yIiwiY29uc3RydWN0b3IiLCJlbmFibGVkIiwibGV2ZWwiLCJjb2RlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0FBRUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLEVBQUFBLEtBQUssRUFBRTtBQURvQyxDQUE3QztBQUdBRCxPQUFPLENBQUNFLGVBQVIsR0FB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Q0FIYix3Q0FHcUI7QUFBQTtBQUFBLFFBRm5CQyxJQUVtQixRQUZuQkEsSUFFbUI7QUFBQSxRQURuQnRDLEtBQ21CLFFBRG5CQSxLQUNtQjs7QUFBQSxVQUZuQnNDLElBRW1CLEVBRG5CdEMsS0FDbUI7QUFRcEI7O0FBRUQsU0FBT21ELFdBQVA7QUFDRDs7QUFFRCxTQUFTbEQsZUFBVCxDQUF5QndELE9BQXpCLEVBQWtDO0FBQ2hDLFNBQU8sQ0FBQyxDQUFDakQsTUFBTSxDQUFDa0QsYUFBVCxJQUEwQkQsT0FBTyxDQUFDRSxVQUF6QztBQUNEOztBQUVELFNBQVN6RCxRQUFULENBQWtCdUQsT0FBbEIsRUFBMkI7QUFDekIsU0FBT0EsT0FBTyxDQUFDRSxVQUFSLEdBQXFCLElBQUluRCxNQUFNLENBQUNvRCxXQUFYLENBQXVCO0FBQ2pEQyxJQUFBQSxPQUFPLEVBQUUsSUFEd0M7QUFFakRDLElBQUFBLEtBQUssRUFBRTtBQUYwQyxHQUF2QixDQUFyQixHQUdGdEQsTUFITDtBQUlEOztBQUVELFNBQVNKLFNBQVQsQ0FBbUIyRCxJQUFuQixFQUF1QztBQUFBLE1BQWROLE9BQWMsdUVBQUosRUFBSTs7QUFDckMsTUFBSXhELGVBQWUsQ0FBQ3dELE9BQUQsQ0FBbkIsRUFBOEI7QUFDNUIsUUFBTTdDLEtBQUssR0FBR1YsUUFBUSxDQUFDdUQsT0FBRCxDQUF0QjtBQUNBLFFBQU1QLElBQUksR0FBR3ZDLE9BQU8sQ0FBQ0MsS0FBRCxDQUFwQjtBQUNBLFdBQU9xQyxlQUFlLENBQUNDLElBQUQsRUFBT2EsSUFBUCxDQUF0QjtBQUNELEdBSkQsTUFJTztBQUNMLFdBQU9BLElBQVA7QUFDRDtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnNob3VsZEhpZ2hsaWdodCA9IHNob3VsZEhpZ2hsaWdodDtcbmV4cG9ydHMuZ2V0Q2hhbGsgPSBnZXRDaGFsaztcbmV4cG9ydHMuZGVmYXVsdCA9IGhpZ2hsaWdodDtcblxudmFyIF9qc1Rva2VucyA9IHJlcXVpcmUoXCJqcy10b2tlbnNcIik7XG5cbnZhciBfaGVscGVyVmFsaWRhdG9ySWRlbnRpZmllciA9IHJlcXVpcmUoXCJAYmFiZWwvaGVscGVyLXZhbGlkYXRvci1pZGVudGlmaWVyXCIpO1xuXG52YXIgX2NoYWxrID0gcmVxdWlyZShcImNoYWxrXCIpO1xuXG5jb25zdCBzb21ldGltZXNLZXl3b3JkcyA9IG5ldyBTZXQoW1wiYXNcIiwgXCJhc3luY1wiLCBcImZyb21cIiwgXCJnZXRcIiwgXCJvZlwiLCBcInNldFwiXSk7XG5cbmZ1bmN0aW9uIGdldERlZnMoY2hhbGspIHtcbiAgcmV0dXJuIHtcbiAgICBrZXl3b3JkOiBjaGFsay5jeWFuLFxuICAgIGNhcGl0YWxpemVkOiBjaGFsay55ZWxsb3csXG4gICAganN4SWRlbnRpZmllcjogY2hhbGsueWVsbG93LFxuICAgIHB1bmN0dWF0b3I6IGNoYWxrLnllbGxvdyxcbiAgICBudW1iZXI6IGNoYWxrLm1hZ2VudGEsXG4gICAgc3RyaW5nOiBjaGFsay5ncmVlbixcbiAgICByZWdleDogY2hhbGsubWFnZW50YSxcbiAgICBjb21tZW50OiBjaGFsay5ncmV5LFxuICAgIGludmFsaWQ6IGNoYWxrLndoaXRlLmJnUmVkLmJvbGRcbiAgfTtcbn1cblxuY29uc3QgTkVXTElORSA9IC9cXHJcXG58W1xcblxcclxcdTIwMjhcXHUyMDI5XS87XG5jb25zdCBCUkFDS0VUID0gL15bKClbXFxde31dJC87XG5sZXQgdG9rZW5pemU7XG57XG4gIGNvbnN0IEpTWF9UQUcgPSAvXlthLXpdW1xcdy1dKiQvaTtcblxuICBjb25zdCBnZXRUb2tlblR5cGUgPSBmdW5jdGlvbiAodG9rZW4sIG9mZnNldCwgdGV4dCkge1xuICAgIGlmICh0b2tlbi50eXBlID09PSBcIm5hbWVcIikge1xuICAgICAgaWYgKCgwLCBfaGVscGVyVmFsaWRhdG9ySWRlbnRpZmllci5pc0tleXdvcmQpKHRva2VuLnZhbHVlKSB8fCAoMCwgX2hlbHBlclZhbGlkYXRvcklkZW50aWZpZXIuaXNTdHJpY3RSZXNlcnZlZFdvcmQpKHRva2VuLnZhbHVlLCB0cnVlKSB8fCBzb21ldGltZXNLZXl3b3Jkcy5oYXModG9rZW4udmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKEpTWF9UQUcudGVzdCh0b2tlbi52YWx1ZSkgJiYgKHRleHRbb2Zmc2V0IC0gMV0gPT09IFwiPFwiIHx8IHRleHQuc3Vic3RyKG9mZnNldCAtIDIsIDIpID09IFwiPC9cIikpIHtcbiAgICAgICAgcmV0dXJuIFwianN4SWRlbnRpZmllclwiO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4udmFsdWVbMF0gIT09IHRva2VuLnZhbHVlWzBdLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgcmV0dXJuIFwiY2FwaXRhbGl6ZWRcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJwdW5jdHVhdG9yXCIgJiYgQlJBQ0tFVC50ZXN0KHRva2VuLnZhbHVlKSkge1xuICAgICAgcmV0dXJuIFwiYnJhY2tldFwiO1xuICAgIH1cblxuICAgIGlmICh0b2tlbi50eXBlID09PSBcImludmFsaWRcIiAmJiAodG9rZW4udmFsdWUgPT09IFwiQFwiIHx8IHRva2VuLnZhbHVlID09PSBcIiNcIikpIHtcbiAgICAgIHJldHVybiBcInB1bmN0dWF0b3JcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW4udHlwZTtcbiAgfTtcblxuICB0b2tlbml6ZSA9IGZ1bmN0aW9uKiAodGV4dCkge1xuICAgIGxldCBtYXRjaDtcblxuICAgIHdoaWxlIChtYXRjaCA9IF9qc1Rva2Vucy5kZWZhdWx0LmV4ZWModGV4dCkpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gX2pzVG9rZW5zLm1hdGNoVG9Ub2tlbihtYXRjaCk7XG5cbiAgICAgIHlpZWxkIHtcbiAgICAgICAgdHlwZTogZ2V0VG9rZW5UeXBlKHRva2VuLCBtYXRjaC5pbmRleCwgdGV4dCksXG4gICAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGhpZ2hsaWdodFRva2VucyhkZWZzLCB0ZXh0KSB7XG4gIGxldCBoaWdobGlnaHRlZCA9IFwiXCI7XG5cbiAgZm9yIChjb25zdCB7XG4gICAgdHlwZSxcbiAgICB2YWx1ZVxuICB9IG9mIHRva2VuaXplKHRleHQpKSB7XG4gICAgY29uc3QgY29sb3JpemUgPSBkZWZzW3R5cGVdO1xuXG4gICAgaWYgKGNvbG9yaXplKSB7XG4gICAgICBoaWdobGlnaHRlZCArPSB2YWx1ZS5zcGxpdChORVdMSU5FKS5tYXAoc3RyID0+IGNvbG9yaXplKHN0cikpLmpvaW4oXCJcXG5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZ2hsaWdodGVkICs9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBoaWdobGlnaHRlZDtcbn1cblxuZnVuY3Rpb24gc2hvdWxkSGlnaGxpZ2h0KG9wdGlvbnMpIHtcbiAgcmV0dXJuICEhX2NoYWxrLnN1cHBvcnRzQ29sb3IgfHwgb3B0aW9ucy5mb3JjZUNvbG9yO1xufVxuXG5mdW5jdGlvbiBnZXRDaGFsayhvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmZvcmNlQ29sb3IgPyBuZXcgX2NoYWxrLmNvbnN0cnVjdG9yKHtcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGxldmVsOiAxXG4gIH0pIDogX2NoYWxrO1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHQoY29kZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGlmIChzaG91bGRIaWdobGlnaHQob3B0aW9ucykpIHtcbiAgICBjb25zdCBjaGFsayA9IGdldENoYWxrKG9wdGlvbnMpO1xuICAgIGNvbnN0IGRlZnMgPSBnZXREZWZzKGNoYWxrKTtcbiAgICByZXR1cm4gaGlnaGxpZ2h0VG9rZW5zKGRlZnMsIGNvZGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb2RlO1xuICB9XG59Il19