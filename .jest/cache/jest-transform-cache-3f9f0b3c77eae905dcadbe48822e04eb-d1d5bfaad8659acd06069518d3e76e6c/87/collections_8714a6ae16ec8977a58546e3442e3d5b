774138108e455cb132c1e975836e1c69
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.printIteratorEntries = printIteratorEntries;
exports.printIteratorValues = printIteratorValues;
exports.printListItems = printListItems;
exports.printObjectProperties = printObjectProperties;

var getKeysOfEnumerableProperties = function getKeysOfEnumerableProperties(object) {
  var keys = Object.keys(object).sort();

  if (Object.getOwnPropertySymbols) {
    Object.getOwnPropertySymbols(object).forEach(function (symbol) {
      if (Object.getOwnPropertyDescriptor(object, symbol).enumerable) {
        keys.push(symbol);
      }
    });
  }

  return keys;
};

function printIteratorEntries(iterator, config, indentation, depth, refs, printer) {
  var separator = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : ': ';
  var result = '';
  var current = iterator.next();

  if (!current.done) {
    result += config.spacingOuter;
    var indentationNext = indentation + config.indent;

    while (!current.done) {
      var name = printer(current.value[0], config, indentationNext, depth, refs);
      var value = printer(current.value[1], config, indentationNext, depth, refs);
      result += indentationNext + name + separator + value;
      current = iterator.next();

      if (!current.done) {
        result += ',' + config.spacingInner;
      } else if (!config.min) {
        result += ',';
      }
    }

    result += config.spacingOuter + indentation;
  }

  return result;
}

function printIteratorValues(iterator, config, indentation, depth, refs, printer) {
  var result = '';
  var current = iterator.next();

  if (!current.done) {
    result += config.spacingOuter;
    var indentationNext = indentation + config.indent;

    while (!current.done) {
      result += indentationNext + printer(current.value, config, indentationNext, depth, refs);
      current = iterator.next();

      if (!current.done) {
        result += ',' + config.spacingInner;
      } else if (!config.min) {
        result += ',';
      }
    }

    result += config.spacingOuter + indentation;
  }

  return result;
}

function printListItems(list, config, indentation, depth, refs, printer) {
  var result = '';

  if (list.length) {
    result += config.spacingOuter;
    var indentationNext = indentation + config.indent;

    for (var i = 0; i < list.length; i++) {
      result += indentationNext + printer(list[i], config, indentationNext, depth, refs);

      if (i < list.length - 1) {
        result += ',' + config.spacingInner;
      } else if (!config.min) {
        result += ',';
      }
    }

    result += config.spacingOuter + indentation;
  }

  return result;
}

function printObjectProperties(val, config, indentation, depth, refs, printer) {
  var result = '';
  var keys = getKeysOfEnumerableProperties(val);

  if (keys.length) {
    result += config.spacingOuter;
    var indentationNext = indentation + config.indent;

    for (var i = 0; i < keys.length; i++) {
      var key = keys[i];
      var name = printer(key, config, indentationNext, depth, refs);
      var value = printer(val[key], config, indentationNext, depth, refs);
      result += indentationNext + name + ': ' + value;

      if (i < keys.length - 1) {
        result += ',' + config.spacingInner;
      } else if (!config.min) {
        result += ',';
      }
    }

    result += config.spacingOuter + indentation;
  }

  return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicHJpbnRJdGVyYXRvckVudHJpZXMiLCJwcmludEl0ZXJhdG9yVmFsdWVzIiwicHJpbnRMaXN0SXRlbXMiLCJwcmludE9iamVjdFByb3BlcnRpZXMiLCJnZXRLZXlzT2ZFbnVtZXJhYmxlUHJvcGVydGllcyIsIm9iamVjdCIsImtleXMiLCJzb3J0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZm9yRWFjaCIsInN5bWJvbCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiaXRlcmF0b3IiLCJjb25maWciLCJpbmRlbnRhdGlvbiIsImRlcHRoIiwicmVmcyIsInByaW50ZXIiLCJzZXBhcmF0b3IiLCJyZXN1bHQiLCJjdXJyZW50IiwibmV4dCIsImRvbmUiLCJzcGFjaW5nT3V0ZXIiLCJpbmRlbnRhdGlvbk5leHQiLCJpbmRlbnQiLCJuYW1lIiwic3BhY2luZ0lubmVyIiwibWluIiwibGlzdCIsImxlbmd0aCIsImkiLCJ2YWwiLCJrZXkiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQzNDQyxFQUFBQSxLQUFLLEVBQUU7QUFEb0MsQ0FBN0M7QUFHQUQsT0FBTyxDQUFDRSxvQkFBUixHQUErQkEsb0JBQS9CO0FBQ0FGLE9BQU8sQ0FBQ0csbUJBQVIsR0FBOEJBLG1CQUE5QjtBQUNBSCxPQUFPLENBQUNJLGNBQVIsR0FBeUJBLGNBQXpCO0FBQ0FKLE9BQU8sQ0FBQ0sscUJBQVIsR0FBZ0NBLHFCQUFoQzs7QUFTQSxJQUFNQyw2QkFBNkIsR0FBRyxTQUFoQ0EsNkJBQWdDLENBQUFDLE1BQU0sRUFBSTtBQUM5QyxNQUFNQyxJQUFJLEdBQUdWLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZRCxNQUFaLEVBQW9CRSxJQUFw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WixFQUFpQjtBQUN0QlQsUUFBQUEsTUFBTSxJQUFJLEdBQVY7QUFDRDtBQUNGOztBQUVEQSxJQUFBQSxNQUFNLElBQUlOLE1BQU0sQ0FBQ1UsWUFBUCxHQUFzQlQsV0FBaEM7QUFDRDs7QUFFRCxTQUFPSyxNQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5wcmludEl0ZXJhdG9yRW50cmllcyA9IHByaW50SXRlcmF0b3JFbnRyaWVzO1xuZXhwb3J0cy5wcmludEl0ZXJhdG9yVmFsdWVzID0gcHJpbnRJdGVyYXRvclZhbHVlcztcbmV4cG9ydHMucHJpbnRMaXN0SXRlbXMgPSBwcmludExpc3RJdGVtcztcbmV4cG9ydHMucHJpbnRPYmplY3RQcm9wZXJ0aWVzID0gcHJpbnRPYmplY3RQcm9wZXJ0aWVzO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuY29uc3QgZ2V0S2V5c09mRW51bWVyYWJsZVByb3BlcnRpZXMgPSBvYmplY3QgPT4ge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KS5zb3J0KCk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCkuZm9yRWFjaChzeW1ib2wgPT4ge1xuICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW1ib2wpLmVudW1lcmFibGUpIHtcbiAgICAgICAga2V5cy5wdXNoKHN5bWJvbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ga2V5cztcbn07XG4vKipcbiAqIFJldHVybiBlbnRyaWVzIChmb3IgZXhhbXBsZSwgb2YgYSBtYXApXG4gKiB3aXRoIHNwYWNpbmcsIGluZGVudGF0aW9uLCBhbmQgY29tbWFcbiAqIHdpdGhvdXQgc3Vycm91bmRpbmcgcHVuY3R1YXRpb24gKGZvciBleGFtcGxlLCBicmFjZXMpXG4gKi9cblxuZnVuY3Rpb24gcHJpbnRJdGVyYXRvckVudHJpZXMoIC8vIEZsb3cgMC41MS4wOiBwcm9wZXJ0eSBgQEBpdGVyYXRvcmAgb2YgJEl0ZXJhdG9yIG5vdCBmb3VuZCBpbiBPYmplY3RcbiAgLy8gVG8gYWxsb3cgc2ltcGxpc3RpYyBnZXRSZWNvcmRJdGVyYXRvciBpbiBpbW11dGFibGUuanNcbiAgaXRlcmF0b3IsXG4gIGNvbmZpZyxcbiAgaW5kZW50YXRpb24sXG4gIGRlcHRoLFxuICByZWZzLFxuICBwcmludGVyLCAvLyBUb28gYmFkLCBzbyBzYWQgdGhhdCBzZXBhcmF0b3IgZm9yIEVDTUFTY3JpcHQgTWFwIGhhcyBiZWVuICcgPT4gJ1xuICAvLyBXaGF0IGEgZGlzdHJhY3RpbmcgZGlmZiBpZiB5b3UgY2hhbmdlIGEgZGF0YSBzdHJ1Y3R1cmUgdG8vZnJvbVxuICBzZXBhcmF0b3IgPSAnOiAnXG4pIHtcbiAgbGV0IHJlc3VsdCA9ICcnO1xuICBsZXQgY3VycmVudCA9IGl0ZXJhdG9yLm5leHQoKTtcblxuICBpZiAoIWN1cnJlbnQuZG9uZSkge1xuICAgIHJlc3VsdCArPSBjb25maWcuc3BhY2luZ091dGVyO1xuICAgIGNvbnN0IGluZGVudGF0aW9uTmV4dCA9IGluZGVudGF0aW9uICsgY29uZmlnLmluZGVudDtcblxuICAgIHdoaWxlICghY3VycmVudC5kb25lKSB7XG4gICAgICBjb25zdCBuYW1lID0gcHJpbnRlcihcbiAgICAgICAgY3VycmVudC52YWx1ZVswXSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBpbmRlbnRhdGlvbk5leHQsXG4gICAgICAgIGRlcHRoLFxuICAgICAgICByZWZzXG4gICAgICApO1xuICAgICAgY29uc3QgdmFsdWUgPSBwcmludGVyKFxuICAgICAgICBjdXJyZW50LnZhbHVlWzFdLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIGluZGVudGF0aW9uTmV4dCxcbiAgICAgICAgZGVwdGgsXG4gICAgICAgIHJlZnNcbiAgICAgICk7XG4gICAgICByZXN1bHQgKz0gaW5kZW50YXRpb25OZXh0ICsgbmFtZSArIHNlcGFyYXRvciArIHZhbHVlO1xuICAgICAgY3VycmVudCA9IGl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgaWYgKCFjdXJyZW50LmRvbmUpIHtcbiAgICAgICAgcmVzdWx0ICs9ICcsJyArIGNvbmZpZy5zcGFjaW5nSW5uZXI7XG4gICAgICB9IGVsc2UgaWYgKCFjb25maWcubWluKSB7XG4gICAgICAgIHJlc3VsdCArPSAnLCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVzdWx0ICs9IGNvbmZpZy5zcGFjaW5nT3V0ZXIgKyBpbmRlbnRhdGlvbjtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIFJldHVybiB2YWx1ZXMgKGZvciBleGFtcGxlLCBvZiBhIHNldClcbiAqIHdpdGggc3BhY2luZywgaW5kZW50YXRpb24sIGFuZCBjb21tYVxuICogd2l0aG91dCBzdXJyb3VuZGluZyBwdW5jdHVhdGlvbiAoYnJhY2VzIG9yIGJyYWNrZXRzKVxuICovXG5cbmZ1bmN0aW9uIHByaW50SXRlcmF0b3JWYWx1ZXMoXG4gIGl0ZXJhdG9yLFxuICBjb25maWcsXG4gIGluZGVudGF0aW9uLFxuICBkZXB0aCxcbiAgcmVmcyxcbiAgcHJpbnRlclxuKSB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgbGV0IGN1cnJlbnQgPSBpdGVyYXRvci5uZXh0KCk7XG5cbiAgaWYgKCFjdXJyZW50LmRvbmUpIHtcbiAgICByZXN1bHQgKz0gY29uZmlnLnNwYWNpbmdPdXRlcjtcbiAgICBjb25zdCBpbmRlbnRhdGlvbk5leHQgPSBpbmRlbnRhdGlvbiArIGNvbmZpZy5pbmRlbnQ7XG5cbiAgICB3aGlsZSAoIWN1cnJlbnQuZG9uZSkge1xuICAgICAgcmVzdWx0ICs9XG4gICAgICAgIGluZGVudGF0aW9uTmV4dCArXG4gICAgICAgIHByaW50ZXIoY3VycmVudC52YWx1ZSwgY29uZmlnLCBpbmRlbnRhdGlvbk5leHQsIGRlcHRoLCByZWZzKTtcbiAgICAgIGN1cnJlbnQgPSBpdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgIGlmICghY3VycmVudC5kb25lKSB7XG4gICAgICAgIHJlc3VsdCArPSAnLCcgKyBjb25maWcuc3BhY2luZ0lubmVyO1xuICAgICAgfSBlbHNlIGlmICghY29uZmlnLm1pbikge1xuICAgICAgICByZXN1bHQgKz0gJywnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlc3VsdCArPSBjb25maWcuc3BhY2luZ091dGVyICsgaW5kZW50YXRpb247XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBSZXR1cm4gaXRlbXMgKGZvciBleGFtcGxlLCBvZiBhbiBhcnJheSlcbiAqIHdpdGggc3BhY2luZywgaW5kZW50YXRpb24sIGFuZCBjb21tYVxuICogd2l0aG91dCBzdXJyb3VuZGluZyBwdW5jdHVhdGlvbiAoZm9yIGV4YW1wbGUsIGJyYWNrZXRzKVxuICoqL1xuXG5mdW5jdGlvbiBwcmludExpc3RJdGVtcyhsaXN0LCBjb25maWcsIGluZGVudGF0aW9uLCBkZXB0aCwgcmVmcywgcHJpbnRlcikge1xuICBsZXQgcmVzdWx0ID0gJyc7XG5cbiAgaWYgKGxpc3QubGVuZ3RoKSB7XG4gICAgcmVzdWx0ICs9IGNvbmZpZy5zcGFjaW5nT3V0ZXI7XG4gICAgY29uc3QgaW5kZW50YXRpb25OZXh0ID0gaW5kZW50YXRpb24gKyBjb25maWcuaW5kZW50O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHQgKz1cbiAgICAgICAgaW5kZW50YXRpb25OZXh0ICtcbiAgICAgICAgcHJpbnRlcihsaXN0W2ldLCBjb25maWcsIGluZGVudGF0aW9uTmV4dCwgZGVwdGgsIHJlZnMpO1xuXG4gICAgICBpZiAoaSA8IGxpc3QubGVuZ3RoIC0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJywnICsgY29uZmlnLnNwYWNpbmdJbm5lcjtcbiAgICAgIH0gZWxzZSBpZiAoIWNvbmZpZy5taW4pIHtcbiAgICAgICAgcmVzdWx0ICs9ICcsJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQgKz0gY29uZmlnLnNwYWNpbmdPdXRlciArIGluZGVudGF0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogUmV0dXJuIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0XG4gKiB3aXRoIHNwYWNpbmcsIGluZGVudGF0aW9uLCBhbmQgY29tbWFcbiAqIHdpdGhvdXQgc3Vycm91bmRpbmcgcHVuY3R1YXRpb24gKGZvciBleGFtcGxlLCBicmFjZXMpXG4gKi9cblxuZnVuY3Rpb24gcHJpbnRPYmplY3RQcm9wZXJ0aWVzKHZhbCwgY29uZmlnLCBpbmRlbnRhdGlvbiwgZGVwdGgsIHJlZnMsIHByaW50ZXIpIHtcbiAgbGV0IHJlc3VsdCA9ICcnO1xuICBjb25zdCBrZXlzID0gZ2V0S2V5c09mRW51bWVyYWJsZVByb3BlcnRpZXModmFsKTtcblxuICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICByZXN1bHQgKz0gY29uZmlnLnNwYWNpbmdPdXRlcjtcbiAgICBjb25zdCBpbmRlbnRhdGlvbk5leHQgPSBpbmRlbnRhdGlvbiArIGNvbmZpZy5pbmRlbnQ7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICBjb25zdCBuYW1lID0gcHJpbnRlcihrZXksIGNvbmZpZywgaW5kZW50YXRpb25OZXh0LCBkZXB0aCwgcmVmcyk7XG4gICAgICBjb25zdCB2YWx1ZSA9IHByaW50ZXIodmFsW2tleV0sIGNvbmZpZywgaW5kZW50YXRpb25OZXh0LCBkZXB0aCwgcmVmcyk7XG4gICAgICByZXN1bHQgKz0gaW5kZW50YXRpb25OZXh0ICsgbmFtZSArICc6ICcgKyB2YWx1ZTtcblxuICAgICAgaWYgKGkgPCBrZXlzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcmVzdWx0ICs9ICcsJyArIGNvbmZpZy5zcGFjaW5nSW5uZXI7XG4gICAgICB9IGVsc2UgaWYgKCFjb25maWcubWluKSB7XG4gICAgICAgIHJlc3VsdCArPSAnLCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVzdWx0ICs9IGNvbmZpZy5zcGFjaW5nT3V0ZXIgKyBpbmRlbnRhdGlvbjtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iXX0=