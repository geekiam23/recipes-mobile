2ef1e885ebb8a58b4a37a8ad5a37aa30
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault2(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault2(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault2(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault2(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault2(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault2(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault2(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _invariant = _interopRequireDefault(require("invariant"));

var _reactNative = require("react-native");

var _gestureHandlers = require("../handlers/gestureHandlers");

var _State = require("../State");

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var DRAG_TOSS = 0.05;
var IDLE = 'Idle';
var DRAGGING = 'Dragging';
var SETTLING = 'Settling';

var DrawerLayout = function (_React$Component) {
  (0, _inherits2.default)(DrawerLayout, _React$Component);

  var _super = _createSuper(DrawerLayout);

  function DrawerLayout(_props) {
    var _this;

    (0, _classCallCheck2.default)(this, DrawerLayout);
    _this = _super.call(this, _props);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "openValue", void 0);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "onGestureEvent", void 0);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "accessibilityIsModalView", React.createRef());

    _defineProperty((0, _assertThisInitialized2.default)(_this), "pointerEventsView", React.createRef());

    _defineProperty((0, _assertThisInitialized2.default)(_this), "panGestureHandler", React.createRef());

    _defineProperty((0, _assertThisInitialized2.default)(_this), "drawerShown", false);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "updateAnimatedEvent", function (props, state) {
      var drawerPosition = props.drawerPosition,
          drawerWidth = props.drawerWidth,
          drawerType = props.drawerType;
      var dragXValue = state.dragX,
          touchXValue = state.touchX,
          drawerTranslation = state.drawerTranslation,
          containerWidth = state.containerWidth;
      var dragX = dragXValue;
      var touchX = touchXValue;

      if (drawerPosition !== 'left') {
        dragX = _reactNative.Animated.multiply(new _reactNative.Animated.Value(-1), dragXValue);
        touchX = _reactNative.Animated.add(new _reactNative.Animated.Value(containerWidth), _reactNative.Animated.multiply(new _reactNative.Animated.Value(-1), touchXValue));
        touchXValue.setValue(containerWidth);
      } else {
        touchXValue.setValue(0);
      }

      var translationX = dragX;

      if (drawerType === 'front') {
        var startPositionX = _reactNative.Animated.add(touchX, _reactNative.Animated.multiply(new _reactNative.Animated.Value(-1), dragX));

        var dragOffsetFromOnStartPosition = startPositionX.interpolate({
          inputRange: [drawerWidth - 1, drawerWidth, drawerWidth + 1],
          outputRange: [0, 0, 1]
        });
        translationX = _reactNative.Animated.add(dragX, dragOffsetFromOnStartPosition);
      }

      _this.openValue = _reactNative.Animated.add(translationX, drawerTranslation).interpolate({
        inputRange: [0, drawerWidth],
        outputRange: [0, 1],
        extrapolate: 'clamp'
      });
      var gestureOptions = {
        useNativeDriver: props.useNativeAnimations
      };

      if (_this.props.onDrawerSlide) {
        gestureOptions.listener = function (ev) {
          var _this$props$onDrawerS, _this$props;

          var translationX = Math.floor(Math.abs(ev.nativeEvent.translationX));
          var position = translationX / _this.state.containerWidth;
          (_this$props$onDrawerS = (_this$props = _this.props).onDrawerSlide) === null || _this$props$onDrawerS === void 0 ? void 0 : _this$props$onDrawerS.call(_this$props, position);
        };
      }

      _this.onGestureEvent = _reactNative.Animated.event([{
        nativeEvent: {
          translationX: dragXValue,
          x: touchXValue
        }
      }], gestureOptions);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "handleContainerLayout", function (_ref) {
      var nativeEvent = _ref.nativeEvent;

      _this.setState({
        containerWidth: nativeEvent.layout.width
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "emitStateChanged", function (newState, drawerWillShow) {
      var _this$props$onDrawerS2, _this$props2;

      (_this$props$onDrawerS2 = (_this$props2 = _this.props).onDrawerStateChanged) === null || _this$props$onDrawerS2 === void 0 ? void 0 : _this$props$onDrawerS2.call(_this$props2, newState, drawerWillShow);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "openingHandlerStateChange", function (_ref2) {
      var nativeEvent = _ref2.nativeEvent;

      if (nativeEvent.oldState === _State.State.ACTIVE) {
        _this.handleRelease({
          nativeEvent: nativeEvent
        });
      } else if (nativeEvent.state === _State.State.ACTIVE) {
        _this.emitStateChanged(DRAGGING, false);

        if (_this.props.keyboardDismissMode === 'on-drag') {
          _reactNative.Keyboard.dismiss();
        }

        if (_this.props.hideStatusBar) {
          _reactNative.StatusBar.setHidden(true, _this.props.statusBarAnimation || 'slide');
        }
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "onTapHandlerStateChange", function (_ref3) {
      var nativeEvent = _ref3.nativeEvent;

      if (_this.drawerShown && nativeEvent.oldState === _State.State.ACTIVE && _this.props.drawerLockMode !== 'locked-open') {
        _this.closeDrawer();
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "handleRelease", function (_ref4) {
      var nativeEvent = _ref4.nativeEvent;
      var _this$props6 = _this.props,
          drawerWidth = _this$props6.drawerWidth,
          drawerPosition = _this$props6.drawerPosition,
          drawerType = _this$props6.drawerType;
      var containerWidth = _this.state.containerWidth;
      var dragX = nativeEvent.translationX,
          velocityX = nativeEvent.velocityX,
          touchX = nativeEvent.x;

      if (drawerPosition !== 'left') {
        dragX = -dragX;
        touchX = containerWidth - touchX;
        velocityX = -velocityX;
      }

      var gestureStartX = touchX - dragX;
      var dragOffsetBasedOnStart = 0;

      if (drawerType === 'front') {
        dragOffsetBasedOnStart = gestureStartX > drawerWidth ? gestureStartX - drawerWidth : 0;
      }

      var startOffsetX = dragX + dragOffsetBasedOnStart + (_this.drawerShown ? drawerWidth : 0);
      var projOffsetX = startOffsetX + DRAG_TOSS * velocityX;
      var shouldOpen = projOffsetX > drawerWidth / 2;

      if (shouldOpen) {
        _this.animateDrawer(startOffsetX, drawerWidth, velocityX);
      } else {
        _this.animateDrawer(startOffsetX, 0, velocityX);
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "updateShowing", function (showing) {
      var _this$accessibilityIs, _this$pointerEventsVi, _this$panGestureHandl;

      _this.drawerShown = showing;
      (_this$accessibilityIs = _this.accessibilityIsModalView.current) === null || _this$accessibilityIs === void 0 ? void 0 : _this$accessibilityIs.setNativeProps({
        accessibilityViewIsModal: showing
      });
      (_this$pointerEventsVi = _this.pointerEventsView.current) === null || _this$pointerEventsVi === void 0 ? void 0 : _this$pointerEventsVi.setNativeProps({
        pointerEvents: showing ? 'auto' : 'none'
      });
      var _this$props7 = _this.props,
          drawerPosition = _this$props7.drawerPosition,
          minSwipeDistance = _this$props7.minSwipeDistance,
          edgeWidth = _this$props7.edgeWidth;
      var fromLeft = drawerPosition === 'left';
      var gestureOrientation = (fromLeft ? 1 : -1) * (_this.drawerShown ? -1 : 1);
      var hitSlop = fromLeft ? {
        left: 0,
        width: showing ? undefined : edgeWidth
      } : {
        right: 0,
        width: showing ? undefined : edgeWidth
      };
      (_this$panGestureHandl = _this.panGestureHandler.current) === null || _this$panGestureHandl === void 0 ? void 0 : _this$panGestureHandl.setNativeProps({
        hitSlop: hitSlop,
        activeOffsetX: gestureOrientation * minSwipeDistance
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "animateDrawer", function (fromValue, toValue, velocity, speed) {
      _this.state.dragX.setValue(0);

      _this.state.touchX.setValue(_this.props.drawerPosition === 'left' ? 0 : _this.state.containerWidth);

      if (fromValue != null) {
        var nextFramePosition = fromValue;

        if (_this.props.useNativeAnimations) {
          if (fromValue < toValue && velocity > 0) {
            nextFramePosition = Math.min(fromValue + velocity / 60.0, toValue);
          } else if (fromValue > toValue && velocity < 0) {
            nextFramePosition = Math.max(fromValue + velocity / 60.0, toValue);
          }
        }

        _this.state.drawerTranslation.setValue(nextFramePosition);
      }

      var willShow = toValue !== 0;

      _this.updateShowing(willShow);

      _this.emitStateChanged(SETTLING, willShow);

      if (_this.props.hideStatusBar) {
        _reactNative.StatusBar.setHidden(willShow, _this.props.statusBarAnimation || 'slide');
      }

      _reactNative.Animated.spring(_this.state.drawerTranslation, {
        velocity: velocity,
        bounciness: 0,
        toValue: toValue,
        useNativeDriver: _this.props.useNativeAnimations,
        speed: speed !== null && speed !== void 0 ? speed : undefined
      }).start(function (_ref5) {
        var finished = _ref5.finished;

        if (finished) {
          _this.emitStateChanged(IDLE, willShow);

          if (willShow) {
            var _this$props$onDrawerO, _this$props3;

            (_this$props$onDrawerO = (_this$props3 = _this.props).onDrawerOpen) === null || _this$props$onDrawerO === void 0 ? void 0 : _this$props$onDrawerO.call(_this$props3);
          } else {
            var _this$props$onDrawerC, _this$props4;

            (_this$props$onDrawerC = (_this$props4 = _this.props).onDrawerClose) === null || _this$props$onDrawerC === void 0 ? void 0 : _this$props$onDrawerC.call(_this$props4);
          }
        }
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "openDrawer", function () {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _this.animateDrawer(undefined, _this.props.drawerWidth, options.velocity ? options.velocity : 0);

      _this.forceUpdate();
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "closeDrawer", function () {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _this.animateDrawer(undefined, 0, options.velocity ? options.velocity : 0);

      _this.forceUpdate();
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "renderOverlay", function () {
      (0, _invariant.default)(_this.openValue, 'should be set');

      var overlayOpacity = _this.openValue.interpolate({
        inputRange: [0, 1],
        outputRange: [0, 1],
        extrapolate: 'clamp'
      });

      var dynamicOverlayStyles = {
        opacity: overlayOpacity,
        backgroundColor: _this.props.overlayColor
      };
      return React.createElement(_gestureHandlers.TapGestureHandler, {
        onHandlerStateChange: _this.onTapHandlerStateChange
      }, React.createElement(_reactNative.Animated.View, {
        pointerEvents: _this.drawerShown ? 'auto' : 'none',
        ref: _this.pointerEventsView,
        style: [styles.overlay, dynamicOverlayStyles]
      }));
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "renderDrawer", function () {
      var _this$props8 = _this.props,
          drawerBackgroundColor = _this$props8.drawerBackgroundColor,
          drawerWidth = _this$props8.drawerWidth,
          drawerPosition = _this$props8.drawerPosition,
          drawerType = _this$props8.drawerType,
          drawerContainerStyle = _this$props8.drawerContainerStyle,
          contentContainerStyle = _this$props8.contentContainerStyle;
      var fromLeft = drawerPosition === 'left';
      var drawerSlide = drawerType !== 'back';
      var containerSlide = drawerType !== 'front';
      var reverseContentDirection = _reactNative.I18nManager.isRTL ? fromLeft : !fromLeft;
      var dynamicDrawerStyles = {
        backgroundColor: drawerBackgroundColor,
        width: drawerWidth
      };
      var openValue = _this.openValue;
      (0, _invariant.default)(openValue, 'should be set');
      var containerStyles;

      if (containerSlide) {
        var containerTranslateX = openValue.interpolate({
          inputRange: [0, 1],
          outputRange: fromLeft ? [0, drawerWidth] : [0, -drawerWidth],
          extrapolate: 'clamp'
        });
        containerStyles = {
          transform: [{
            translateX: containerTranslateX
          }]
        };
      }

      var drawerTranslateX = 0;

      if (drawerSlide) {
        var closedDrawerOffset = fromLeft ? -drawerWidth : drawerWidth;
        drawerTranslateX = openValue.interpolate({
          inputRange: [0, 1],
          outputRange: [closedDrawerOffset, 0],
          extrapolate: 'clamp'
        });
      }

      var drawerStyles = {
        transform: [{
          translateX: drawerTranslateX
        }],
        flexDirection: reverseContentDirection ? 'row-reverse' : 'row'
      };
      return React.createElement(_reactNative.Animated.View, {
        style: styles.main,
        onLayout: _this.handleContainerLayout
      }, React.createElement(_reactNative.Animated.View, {
        style: [drawerType === 'front' ? styles.containerOnBack : styles.containerInFront, containerStyles, contentContainerStyle],
        importantForAccessibility: _this.drawerShown ? 'no-hide-descendants' : 'yes'
      }, typeof _this.props.children === 'function' ? _this.props.children(_this.openValue) : _this.props.children, _this.renderOverlay()), React.createElement(_reactNative.Animated.View, {
        pointerEvents: "box-none",
        ref: _this.accessibilityIsModalView,
        accessibilityViewIsModal: _this.drawerShown,
        style: [styles.drawerContainer, drawerStyles, drawerContainerStyle]
      }, React.createElement(_reactNative.View, {
        style: dynamicDrawerStyles
      }, _this.props.renderNavigationView(_this.openValue))));
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "setPanGestureRef", function (ref) {
      var _this$props$onGesture, _this$props5;

      _this.panGestureHandler.current = ref;
      (_this$props$onGesture = (_this$props5 = _this.props).onGestureRef) === null || _this$props$onGesture === void 0 ? void 0 : _this$props$onGesture.call(_this$props5, ref);
    });

    var _dragX = new _reactNative.Animated.Value(0);

    var _touchX = new _reactNative.Animated.Value(0);

    var _drawerTranslation = new _reactNative.Animated.Value(0);

    _this.state = {
      dragX: _dragX,
      touchX: _touchX,
      drawerTranslation: _drawerTranslation,
      containerWidth: 0
    };

    _this.updateAnimatedEvent(_props, _this.state);

    return _this;
  }

  (0, _createClass2.default)(DrawerLayout, [{
    key: "UNSAFE_componentWillUpdate",
    value: function UNSAFE_componentWillUpdate(props, state) {
      if (this.props.drawerPosition !== props.drawerPosition || this.props.drawerWidth !== props.drawerWidth || this.props.drawerType !== props.drawerType || this.state.containerWidth !== state.containerWidth) {
        this.updateAnimatedEvent(props, state);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props9 = this.props,
          drawerPosition = _this$props9.drawerPosition,
          drawerLockMode = _this$props9.drawerLockMode,
          edgeWidth = _this$props9.edgeWidth,
          minSwipeDistance = _this$props9.minSwipeDistance;
      var fromLeft = drawerPosition === 'left';
      var gestureOrientation = (fromLeft ? 1 : -1) * (this.drawerShown ? -1 : 1);
      var hitSlop = fromLeft ? {
        left: 0,
        width: this.drawerShown ? undefined : edgeWidth
      } : {
        right: 0,
        width: this.drawerShown ? undefined : edgeWidth
      };
      return React.createElement(_gestureHandlers.PanGestureHandler, {
        ref: this.setPanGestureRef,
        hitSlop: hitSlop,
        activeOffsetX: gestureOrientation * minSwipeDistance,
        failOffsetY: [-15, 15],
        onGestureEvent: this.onGestureEvent,
        onHandlerStateChange: this.openingHandlerStateChange,
        enableTrackpadTwoFingerGesture: this.props.enableTrackpadTwoFingerGesture,
        enabled: drawerLockMode !== 'locked-closed' && drawerLockMode !== 'locked-open'
      }, this.renderDrawer());
    }
  }]);
  return DrawerLayout;
}(React.Component);

exports.default = DrawerLayout;

_defineProperty(DrawerLayout, "defaultProps", {
  drawerWidth: 200,
  drawerPosition: 'left',
  useNativeAnimations: true,
  drawerType: 'front',
  edgeWidth: 20,
  minSwipeDistance: 3,
  overlayColor: 'rgba(0, 0, 0, 0.7)',
  drawerLockMode: 'unlocked',
  enableTrackpadTwoFingerGesture: false
});

_defineProperty(DrawerLayout, "positions", {
  Left: 'left',
  Right: 'right'
});

var styles = _reactNative.StyleSheet.create({
  drawerContainer: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    zIndex: 1001,
    flexDirection: 'row'
  }),
  containerInFront: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    zIndex: 1002
  }),
  containerOnBack: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject),
  main: {
    flex: 1,
    zIndex: 0,
    overflow: 'hidden'
  },
  overlay: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    zIndex: 1000
  })
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRyYXdlckxheW91dC50c3giXSwibmFtZXMiOlsiRFJBR19UT1NTIiwiSURMRSIsIkRSQUdHSU5HIiwiU0VUVExJTkciLCJEcmF3ZXJMYXlvdXQiLCJDb21wb25lbnQiLCJkcmF3ZXJXaWR0aCIsImRyYXdlclBvc2l0aW9uIiwidXNlTmF0aXZlQW5pbWF0aW9ucyIsImRyYXdlclR5cGUiLCJlZGdlV2lkdGgiLCJtaW5Td2lwZURpc3RhbmNlIiwib3ZlcmxheUNvbG9yIiwiZHJhd2VyTG9ja01vZGUiLCJlbmFibGVUcmFja3BhZFR3b0Zpbmdlckdlc3R1cmUiLCJjb25zdHJ1Y3RvciIsImRyYWdYIiwiQW5pbWF0ZWQiLCJ0b3VjaFgiLCJkcmF3ZXJUcmFuc2xhdGlvbiIsImNvbnRhaW5lcldpZHRoIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUiLCJwcm9wcyIsInN0YXRlIiwiUmVhY3QiLCJMZWZ0IiwiUmlnaHQiLCJ0b3VjaFhWYWx1ZSIsInRyYW5zbGF0aW9uWCIsInN0YXJ0UG9zaXRpb25YIiwiZHJhZ09mZnNldEZyb21PblN0YXJ0UG9zaXRpb24iLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJleHRyYXBvbGF0ZSIsImdlc3R1cmVPcHRpb25zIiwidXNlTmF0aXZlRHJpdmVyIiwiZXYiLCJNYXRoIiwicG9zaXRpb24iLCJuYXRpdmVFdmVudCIsIngiLCJ3aWR0aCIsIlN0YXRlIiwiS2V5Ym9hcmQiLCJTdGF0dXNCYXIiLCJ2ZWxvY2l0eVgiLCJnZXN0dXJlU3RhcnRYIiwiZHJhZ09mZnNldEJhc2VkT25TdGFydCIsInN0YXJ0T2Zmc2V0WCIsInByb2pPZmZzZXRYIiwic2hvdWxkT3BlbiIsInNob3dpbmciLCJhY2Nlc3NpYmlsaXR5Vmlld0lzTW9kYWwiLCJwb2ludGVyRXZlbnRzIiwiZnJvbUxlZnQiLCJnZXN0dXJlT3JpZW50YXRpb24iLCJoaXRTbG9wIiwibGVmdCIsInJpZ2h0IiwiYWN0aXZlT2Zmc2V0WCIsImZyb21WYWx1ZSIsIm5leHRGcmFtZVBvc2l0aW9uIiwidmVsb2NpdHkiLCJ3aWxsU2hvdyIsInRvVmFsdWUiLCJib3VuY2luZXNzIiwic3BlZWQiLCJ1bmRlZmluZWQiLCJmaW5pc2hlZCIsIm9wdGlvbnMiLCJvdmVybGF5T3BhY2l0eSIsImR5bmFtaWNPdmVybGF5U3R5bGVzIiwib3BhY2l0eSIsImJhY2tncm91bmRDb2xvciIsIm9uVGFwSGFuZGxlclN0YXRlQ2hhbmdlIiwic3R5bGVzIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwiZHJhd2VyU2xpZGUiLCJjb250YWluZXJTbGlkZSIsInJldmVyc2VDb250ZW50RGlyZWN0aW9uIiwiSTE4bk1hbmFnZXIiLCJkeW5hbWljRHJhd2VyU3R5bGVzIiwib3BlblZhbHVlIiwiY29udGFpbmVyVHJhbnNsYXRlWCIsImNvbnRhaW5lclN0eWxlcyIsInRyYW5zZm9ybSIsInRyYW5zbGF0ZVgiLCJkcmF3ZXJUcmFuc2xhdGVYIiwiY2xvc2VkRHJhd2VyT2Zmc2V0IiwiZHJhd2VyU3R5bGVzIiwiZmxleERpcmVjdGlvbiIsImhhbmRsZUNvbnRhaW5lckxheW91dCIsInJlZiIsInJlbmRlciIsImRyYXdlckNvbnRhaW5lciIsIlN0eWxlU2hlZXQiLCJ6SW5kZXgiLCJjb250YWluZXJJbkZyb250IiwiY29udGFpbmVyT25CYWNrIiwiYWJzb2x1dGVGaWxsT2JqZWN0IiwibWFpbiIsImZsZXgiLCJvdmVyZmxvdyIsIm92ZXJsYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBLElBQUEsS0FBQSxHQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUVBLElBQUEsVUFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBY0EsSUFBQSxnQkFBQSxHQUFBLE9BQUEsK0JBQUE7O0FBUUEsSUFBQSxNQUFBLEdBQUEsT0FBQSxZQUFB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QUU7QUFGSDtBQWxCd0IsQ0FBbEIsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgY29tcG9uZW50IGlzIGJhc2VkIG9uIFJOJ3MgRHJhd2VyTGF5b3V0QW5kcm9pZCBBUElcbi8vXG4vLyBJdCBwZXJoYXBzIGRlc2VydmVzIHRvIGJlIHB1dCBpbiBhIHNlcGFyYXRlIHJlcG8sIGJ1dCBzaW5jZSBpdCByZWxpZXNcbi8vIG9uIHJlYWN0LW5hdGl2ZS1nZXN0dXJlLWhhbmRsZXIgbGlicmFyeSB3aGljaCBpc24ndCB2ZXJ5IHBvcHVsYXIgYXQgdGhlXG4vLyBtb21lbnQgSSBkZWNpZGVkIHRvIGtlZXAgaXQgaGVyZSBmb3IgdGhlIHRpbWUgYmVpbmcuIEl0IHdpbGwgYWxsb3cgdXNcbi8vIHRvIG1vdmUgZmFzdGVyIGFuZCBmaXggaXNzdWVzIHRoYXQgbWF5IGFyaXNlIGluIGdlc3R1cmUgaGFuZGxlciBsaWJyYXJ5XG4vLyB0aGF0IGNvdWxkIGJlIGZvdW5kIHdoZW4gdXNpbmcgdGhlIGRyYXdlciBjb21wb25lbnRcblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0IHtcbiAgQW5pbWF0ZWQsXG4gIFN0eWxlU2hlZXQsXG4gIFZpZXcsXG4gIEtleWJvYXJkLFxuICBTdGF0dXNCYXIsXG4gIEkxOG5NYW5hZ2VyLFxuICBTdGF0dXNCYXJBbmltYXRpb24sXG4gIFN0eWxlUHJvcCxcbiAgVmlld1N0eWxlLFxuICBMYXlvdXRDaGFuZ2VFdmVudCxcbiAgTmF0aXZlU3ludGhldGljRXZlbnQsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCB7XG4gIEdlc3R1cmVFdmVudCxcbiAgUGFuR2VzdHVyZUhhbmRsZXIsXG4gIFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkLFxuICBUYXBHZXN0dXJlSGFuZGxlcixcbiAgSGFuZGxlclN0YXRlQ2hhbmdlRXZlbnQsXG4gIFRhcEdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkLFxufSBmcm9tICcuLi9oYW5kbGVycy9nZXN0dXJlSGFuZGxlcnMnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9TdGF0ZSc7XG5cbmNvbnN0IERSQUdfVE9TUyA9IDAuMDU7XG5cbmNvbnN0IElETEU6IERyYXdlclN0YXRlID0gJ0lkbGUnO1xuY29uc3QgRFJBR0dJTkc6IERyYXdlclN0YXRlID0gJ0RyYWdnaW5nJztcbmNvbnN0IFNFVFRMSU5HOiBEcmF3ZXJTdGF0ZSA9ICdTZXR0bGluZyc7XG5cbmV4cG9ydCB0eXBlIERyYXdlclBvc2l0aW9uID0gJ2xlZnQnIHwgJ3JpZ2h0JztcblxuZXhwb3J0IHR5cGUgRHJhd2VyU3RhdGUgPSAnSWRsZScgfCAnRHJhZ2dpbmcnIHwgJ1NldHRsaW5nJztcblxuZXhwb3J0IHR5cGUgRHJhd2VyVHlwZSA9ICdmcm9udCcgfCAnYmFjaycgfCAnc2xpZGUnO1xuXG5leHBvcnQgdHlwZSBEcmF3ZXJMb2NrTW9kZSA9ICd1bmxvY2tlZCcgfCAnbG9ja2VkLWNsb3NlZCcgfCAnbG9ja2VkLW9wZW4nO1xuXG5leHBvcnQgdHlwZSBEcmF3ZXJLZXlib2FyZERpc21pc3NNb2RlID0gJ25vbmUnIHwgJ29uLWRyYWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERyYXdlckxheW91dFByb3BzIHtcbiAgcmVuZGVyTmF2aWdhdGlvblZpZXc6IChcbiAgICBwcm9ncmVzc0FuaW1hdGVkVmFsdWU6IEFuaW1hdGVkLlZhbHVlXG4gICkgPT4gUmVhY3QuUmVhY3ROb2RlO1xuICBkcmF3ZXJQb3NpdGlvbj86IERyYXdlclBvc2l0aW9uO1xuICBkcmF3ZXJXaWR0aD86IG51bWJlcjtcbiAgZHJhd2VyQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBkcmF3ZXJMb2NrTW9kZT86IERyYXdlckxvY2tNb2RlO1xuICBrZXlib2FyZERpc21pc3NNb2RlPzogRHJhd2VyS2V5Ym9hcmREaXNtaXNzTW9kZTtcbiAgb25EcmF3ZXJDbG9zZT86ICgpID0+IHZvaWQ7XG4gIG9uRHJhd2VyT3Blbj86ICgpID0+IHZvaWQ7XG4gIG9uRHJhd2VyU3RhdGVDaGFuZ2VkPzogKFxuICAgIG5ld1N0YXRlOiBEcmF3ZXJTdGF0ZSxcbiAgICBkcmF3ZXJXaWxsU2hvdzogYm9vbGVhblxuICApID0+IHZvaWQ7XG4gIHVzZU5hdGl2ZUFuaW1hdGlvbnM/OiBib29sZWFuO1xuXG4gIGRyYXdlclR5cGU/OiBEcmF3ZXJUeXBlO1xuICBlZGdlV2lkdGg/OiBudW1iZXI7XG4gIG1pblN3aXBlRGlzdGFuY2U/OiBudW1iZXI7XG4gIGhpZGVTdGF0dXNCYXI/OiBib29sZWFuO1xuICBzdGF0dXNCYXJBbmltYXRpb24/OiBTdGF0dXNCYXJBbmltYXRpb247XG4gIG92ZXJsYXlDb2xvcj86IHN0cmluZztcbiAgY29udGVudENvbnRhaW5lclN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIGRyYXdlckNvbnRhaW5lclN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIGVuYWJsZVRyYWNrcGFkVHdvRmluZ2VyR2VzdHVyZT86IGJvb2xlYW47XG4gIG9uRHJhd2VyU2xpZGU/OiAocG9zaXRpb246IG51bWJlcikgPT4gdm9pZDtcbiAgb25HZXN0dXJlUmVmPzogKHJlZjogUGFuR2VzdHVyZUhhbmRsZXIpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIERyYXdlckxheW91dFN0YXRlID0ge1xuICBkcmFnWDogQW5pbWF0ZWQuVmFsdWU7XG4gIHRvdWNoWDogQW5pbWF0ZWQuVmFsdWU7XG4gIGRyYXdlclRyYW5zbGF0aW9uOiBBbmltYXRlZC5WYWx1ZTtcbiAgY29udGFpbmVyV2lkdGg6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIERyYXdlck1vdmVtZW50T3B0aW9uID0ge1xuICB2ZWxvY2l0eT86IG51bWJlcjtcbiAgc3BlZWQ/OiBudW1iZXI7XG59O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJhd2VyTGF5b3V0IGV4dGVuZHMgQ29tcG9uZW50PFxuICBEcmF3ZXJMYXlvdXRQcm9wcyxcbiAgRHJhd2VyTGF5b3V0U3RhdGVcbj4ge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRyYXdlcldpZHRoOiAyMDAsXG4gICAgZHJhd2VyUG9zaXRpb246ICdsZWZ0JyxcbiAgICB1c2VOYXRpdmVBbmltYXRpb25zOiB0cnVlLFxuICAgIGRyYXdlclR5cGU6ICdmcm9udCcsXG4gICAgZWRnZVdpZHRoOiAyMCxcbiAgICBtaW5Td2lwZURpc3RhbmNlOiAzLFxuICAgIG92ZXJsYXlDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC43KScsXG4gICAgZHJhd2VyTG9ja01vZGU6ICd1bmxvY2tlZCcsXG4gICAgZW5hYmxlVHJhY2twYWRUd29GaW5nZXJHZXN0dXJlOiBmYWxzZSxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogRHJhd2VyTGF5b3V0UHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICBjb25zdCBkcmFnWCA9IG5ldyBBbmltYXRlZC5WYWx1ZSgwKTtcbiAgICBjb25zdCB0b3VjaFggPSBuZXcgQW5pbWF0ZWQuVmFsdWUoMCk7XG4gICAgY29uc3QgZHJhd2VyVHJhbnNsYXRpb24gPSBuZXcgQW5pbWF0ZWQuVmFsdWUoMCk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZHJhZ1gsXG4gICAgICB0b3VjaFgsXG4gICAgICBkcmF3ZXJUcmFuc2xhdGlvbixcbiAgICAgIGNvbnRhaW5lcldpZHRoOiAwLFxuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGVkRXZlbnQocHJvcHMsIHRoaXMuc3RhdGUpO1xuICB9XG5cbiAgVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUoXG4gICAgcHJvcHM6IERyYXdlckxheW91dFByb3BzLFxuICAgIHN0YXRlOiBEcmF3ZXJMYXlvdXRTdGF0ZVxuICApIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnByb3BzLmRyYXdlclBvc2l0aW9uICE9PSBwcm9wcy5kcmF3ZXJQb3NpdGlvbiB8fFxuICAgICAgdGhpcy5wcm9wcy5kcmF3ZXJXaWR0aCAhPT0gcHJvcHMuZHJhd2VyV2lkdGggfHxcbiAgICAgIHRoaXMucHJvcHMuZHJhd2VyVHlwZSAhPT0gcHJvcHMuZHJhd2VyVHlwZSB8fFxuICAgICAgdGhpcy5zdGF0ZS5jb250YWluZXJXaWR0aCAhPT0gc3RhdGUuY29udGFpbmVyV2lkdGhcbiAgICApIHtcbiAgICAgIHRoaXMudXBkYXRlQW5pbWF0ZWRFdmVudChwcm9wcywgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb3BlblZhbHVlPzogQW5pbWF0ZWQuQW5pbWF0ZWRJbnRlcnBvbGF0aW9uO1xuICBwcml2YXRlIG9uR2VzdHVyZUV2ZW50PzogKFxuICAgIGV2ZW50OiBHZXN0dXJlRXZlbnQ8UGFuR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQ+XG4gICkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBhY2Nlc3NpYmlsaXR5SXNNb2RhbFZpZXcgPSBSZWFjdC5jcmVhdGVSZWY8Vmlldz4oKTtcbiAgcHJpdmF0ZSBwb2ludGVyRXZlbnRzVmlldyA9IFJlYWN0LmNyZWF0ZVJlZjxWaWV3PigpO1xuICBwcml2YXRlIHBhbkdlc3R1cmVIYW5kbGVyID0gUmVhY3QuY3JlYXRlUmVmPFBhbkdlc3R1cmVIYW5kbGVyIHwgbnVsbD4oKTtcbiAgcHJpdmF0ZSBkcmF3ZXJTaG93biA9IGZhbHNlO1xuXG4gIHN0YXRpYyBwb3NpdGlvbnMgPSB7XG4gICAgTGVmdDogJ2xlZnQnLFxuICAgIFJpZ2h0OiAncmlnaHQnLFxuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlQW5pbWF0ZWRFdmVudCA9IChcbiAgICBwcm9wczogRHJhd2VyTGF5b3V0UHJvcHMsXG4gICAgc3RhdGU6IERyYXdlckxheW91dFN0YXRlXG4gICkgPT4ge1xuICAgIC8vIEV2ZW50IGRlZmluaXRpb24gaXMgYmFzZWQgb25cbiAgICBjb25zdCB7IGRyYXdlclBvc2l0aW9uLCBkcmF3ZXJXaWR0aCwgZHJhd2VyVHlwZSB9ID0gcHJvcHM7XG4gICAgY29uc3Qge1xuICAgICAgZHJhZ1g6IGRyYWdYVmFsdWUsXG4gICAgICB0b3VjaFg6IHRvdWNoWFZhbHVlLFxuICAgICAgZHJhd2VyVHJhbnNsYXRpb24sXG4gICAgICBjb250YWluZXJXaWR0aCxcbiAgICB9ID0gc3RhdGU7XG5cbiAgICBsZXQgZHJhZ1ggPSBkcmFnWFZhbHVlO1xuICAgIGxldCB0b3VjaFggPSB0b3VjaFhWYWx1ZTtcblxuICAgIGlmIChkcmF3ZXJQb3NpdGlvbiAhPT0gJ2xlZnQnKSB7XG4gICAgICAvLyBNb3N0IG9mIHRoZSBjb2RlIGlzIHdyaXR0ZW4gaW4gYSB3YXkgdG8gaGFuZGxlIGxlZnQtc2lkZSBkcmF3ZXIuXG4gICAgICAvLyBJbiBvcmRlciB0byBoYW5kbGUgcmlnaHQtc2lkZSBkcmF3ZXIgdGhlIG9ubHkgdGhpbmcgd2UgbmVlZCB0b1xuICAgICAgLy8gZG8gaXMgdG8gcmV2ZXJzZSBldmVudHMgY29taW5nIGZyb20gZ2VzdHVyZSBoYW5kbGVyIGluIGEgd2F5IHRoZXlcbiAgICAgIC8vIGVtdWxhdGUgbGVmdC1zaWRlIGRyYXdlciBnZXN0dXJlcy4gRS5nLiBkcmFnWCBpcyBzaW1wbHkgLWRyYWdYLCBhbmRcbiAgICAgIC8vIHRvdWNoWCBpcyBjYWx1bGNhdGVkIGJ5IHN1YnRyYWNpbmcgcmVhbCB0b3VjaFggZnJvbSB0aGUgd2lkdGggb2YgdGhlXG4gICAgICAvLyBjb250YWluZXIgKHN1Y2ggdGhhdCB3aGVuIHRvdWNoIGhhcHBlbnMgYXQgdGhlIHJpZ2h0IGVkZ2UgdGhlIHZhbHVlXG4gICAgICAvLyBpcyBzaW1wbHkgMClcbiAgICAgIGRyYWdYID0gQW5pbWF0ZWQubXVsdGlwbHkoXG4gICAgICAgIG5ldyBBbmltYXRlZC5WYWx1ZSgtMSksXG4gICAgICAgIGRyYWdYVmFsdWVcbiAgICAgICkgYXMgQW5pbWF0ZWQuVmFsdWU7IC8vIFRPRE8oVFMpOiAoZm9yIGFsbCBcImFzXCIgaW4gdGhpcyBmaWxlKSBtYWtlIHN1cmUgd2UgY2FuIG1hcCB0aGlzXG4gICAgICB0b3VjaFggPSBBbmltYXRlZC5hZGQoXG4gICAgICAgIG5ldyBBbmltYXRlZC5WYWx1ZShjb250YWluZXJXaWR0aCksXG4gICAgICAgIEFuaW1hdGVkLm11bHRpcGx5KG5ldyBBbmltYXRlZC5WYWx1ZSgtMSksIHRvdWNoWFZhbHVlKVxuICAgICAgKSBhcyBBbmltYXRlZC5WYWx1ZTsgLy8gVE9ETyhUUyk6IG1ha2Ugc3VyZSB3ZSBjYW4gbWFwIHRoaXM7XG4gICAgICB0b3VjaFhWYWx1ZS5zZXRWYWx1ZShjb250YWluZXJXaWR0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvdWNoWFZhbHVlLnNldFZhbHVlKDApO1xuICAgIH1cblxuICAgIC8vIFdoaWxlIGNsb3NpbmcgdGhlIGRyYXdlciB3aGVuIHVzZXIgc3RhcnRzIGdlc3R1cmUgb3V0c2lkZSBvZiBpdHMgYXJlYSAoaW4gZ3JleWVkXG4gICAgLy8gb3V0IHBhcnQgb2YgdGhlIHdpbmRvdyksIHdlIHdhbnQgdGhlIGRyYXdlciB0byBmb2xsb3cgb25seSBvbmNlIGZpbmdlciByZWFjaGVzIHRoZVxuICAgIC8vIGVkZ2Ugb2YgdGhlIGRyYXdlci5cbiAgICAvLyBFLmcuIG9uIHRoZSBkaWFncmFtIGJlbG93IGRyYXdlciBpcyBpbGx1c3RyYXRlIGJ5IFggc2lnbnMgYW5kIHRoZSBncmV5ZWQgb3V0IGFyZWEgYnlcbiAgICAvLyBkb3RzLiBUaGUgdG91Y2ggZ2VzdHVyZSBzdGFydHMgYXQgJyonIGFuZCBtb3ZlcyBsZWZ0LCB0b3VjaCBwYXRoIGlzIGluZGljYXRlZCBieVxuICAgIC8vIGFuIGFycm93IHBvaW50aW5nIGxlZnRcbiAgICAvLyAxKSArLS0tLS0tLS0tLS0tLS0tKyAyKSArLS0tLS0tLS0tLS0tLS0tKyAzKSArLS0tLS0tLS0tLS0tLS0tKyA0KSArLS0tLS0tLS0tLS0tLS0tK1xuICAgIC8vICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWHwuLi4uLi4uLi58XG4gICAgLy8gICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYfC4uLi4uLi4uLnxcbiAgICAvLyAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFh8Li4uLi4uLi4ufFxuICAgIC8vICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuPC0qLi58ICAgIHxYWFhYWFhYWHw8LS0qLi58ICAgIHxYWFhYWHw8LS0tLS0qLi58XG4gICAgLy8gICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYfC4uLi4uLi4uLnxcbiAgICAvLyAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFh8Li4uLi4uLi4ufFxuICAgIC8vICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWHwuLi4uLi4uLi58XG4gICAgLy8gICAgKy0tLS0tLS0tLS0tLS0tLSsgICAgKy0tLS0tLS0tLS0tLS0tLSsgICAgKy0tLS0tLS0tLS0tLS0tLSsgICAgKy0tLS0tLS0tLS0tLS0tLStcbiAgICAvL1xuICAgIC8vIEZvciB0aGUgYWJvdmUgdG8gd29yayBwcm9wZXJseSB3ZSBkZWZpbmUgYW5pbWF0ZWQgdmFsdWUgdGhhdCB3aWxsIGtlZXAgc3RhcnQgcG9zaXRpb25cbiAgICAvLyBvZiB0aGUgZ2VzdHVyZS4gVGhlbiB3ZSB1c2UgdGhhdCB2YWx1ZSB0byBjYWxjdWxhdGUgaG93IG11Y2ggd2UgbmVlZCB0byBzdWJ0cmFjdCBmcm9tXG4gICAgLy8gdGhlIGRyYWdYLiBJZiB0aGUgZ2VzdHVyZSBzdGFydGVkIG9uIHRoZSBncmV5ZWQgb3V0IGFyZWEgd2UgdGFrZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcbiAgICAvLyBlZGdlIG9mIHRoZSBkcmF3ZXIgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uLiBPdGhlcndpc2Ugd2UgZG9uJ3Qgc3VidHJhY3QgYXQgYWxsIGFuZCB0aGVcbiAgICAvLyBkcmF3ZXIgYmUgcHVsbGVkIGJhY2sgYXMgc29vbiBhcyB5b3Ugc3RhcnQgdGhlIHBhbi5cbiAgICAvL1xuICAgIC8vIFRoaXMgaXMgdXNlZCBvbmx5IHdoZW4gZHJhd2VyVHlwZSBpcyBcImZyb250XCJcbiAgICAvL1xuICAgIGxldCB0cmFuc2xhdGlvblggPSBkcmFnWDtcbiAgICBpZiAoZHJhd2VyVHlwZSA9PT0gJ2Zyb250Jykge1xuICAgICAgY29uc3Qgc3RhcnRQb3NpdGlvblggPSBBbmltYXRlZC5hZGQoXG4gICAgICAgIHRvdWNoWCxcbiAgICAgICAgQW5pbWF0ZWQubXVsdGlwbHkobmV3IEFuaW1hdGVkLlZhbHVlKC0xKSwgZHJhZ1gpXG4gICAgICApO1xuXG4gICAgICBjb25zdCBkcmFnT2Zmc2V0RnJvbU9uU3RhcnRQb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb25YLmludGVycG9sYXRlKHtcbiAgICAgICAgaW5wdXRSYW5nZTogW2RyYXdlcldpZHRoISAtIDEsIGRyYXdlcldpZHRoISwgZHJhd2VyV2lkdGghICsgMV0sXG4gICAgICAgIG91dHB1dFJhbmdlOiBbMCwgMCwgMV0sXG4gICAgICB9KTtcbiAgICAgIHRyYW5zbGF0aW9uWCA9IEFuaW1hdGVkLmFkZChcbiAgICAgICAgZHJhZ1gsXG4gICAgICAgIGRyYWdPZmZzZXRGcm9tT25TdGFydFBvc2l0aW9uXG4gICAgICApIGFzIEFuaW1hdGVkLlZhbHVlOyAvLyBUT0RPOiBhcyBhYm92ZVxuICAgIH1cblxuICAgIHRoaXMub3BlblZhbHVlID0gQW5pbWF0ZWQuYWRkKHRyYW5zbGF0aW9uWCwgZHJhd2VyVHJhbnNsYXRpb24pLmludGVycG9sYXRlKHtcbiAgICAgIGlucHV0UmFuZ2U6IFswLCBkcmF3ZXJXaWR0aCFdLFxuICAgICAgb3V0cHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgIGV4dHJhcG9sYXRlOiAnY2xhbXAnLFxuICAgIH0pO1xuXG4gICAgY29uc3QgZ2VzdHVyZU9wdGlvbnM6IHtcbiAgICAgIHVzZU5hdGl2ZURyaXZlcjogYm9vbGVhbjtcbiAgICAgIC8vIFRPRE86IG1ha2Ugc3VyZSBpdCBpcyBjb3JyZWN0XG4gICAgICBsaXN0ZW5lcj86IChcbiAgICAgICAgZXY6IE5hdGl2ZVN5bnRoZXRpY0V2ZW50PFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkPlxuICAgICAgKSA9PiB2b2lkO1xuICAgIH0gPSB7XG4gICAgICB1c2VOYXRpdmVEcml2ZXI6IHByb3BzLnVzZU5hdGl2ZUFuaW1hdGlvbnMhLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vbkRyYXdlclNsaWRlKSB7XG4gICAgICBnZXN0dXJlT3B0aW9ucy5saXN0ZW5lciA9IChldikgPT4ge1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvblggPSBNYXRoLmZsb29yKE1hdGguYWJzKGV2Lm5hdGl2ZUV2ZW50LnRyYW5zbGF0aW9uWCkpO1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRyYW5zbGF0aW9uWCAvIHRoaXMuc3RhdGUuY29udGFpbmVyV2lkdGg7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5vbkRyYXdlclNsaWRlPy4ocG9zaXRpb24pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLm9uR2VzdHVyZUV2ZW50ID0gQW5pbWF0ZWQuZXZlbnQoXG4gICAgICBbeyBuYXRpdmVFdmVudDogeyB0cmFuc2xhdGlvblg6IGRyYWdYVmFsdWUsIHg6IHRvdWNoWFZhbHVlIH0gfV0sXG4gICAgICBnZXN0dXJlT3B0aW9uc1xuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBoYW5kbGVDb250YWluZXJMYXlvdXQgPSAoeyBuYXRpdmVFdmVudCB9OiBMYXlvdXRDaGFuZ2VFdmVudCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBjb250YWluZXJXaWR0aDogbmF0aXZlRXZlbnQubGF5b3V0LndpZHRoIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgZW1pdFN0YXRlQ2hhbmdlZCA9IChcbiAgICBuZXdTdGF0ZTogRHJhd2VyU3RhdGUsXG4gICAgZHJhd2VyV2lsbFNob3c6IGJvb2xlYW5cbiAgKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkRyYXdlclN0YXRlQ2hhbmdlZD8uKG5ld1N0YXRlLCBkcmF3ZXJXaWxsU2hvdyk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvcGVuaW5nSGFuZGxlclN0YXRlQ2hhbmdlID0gKHtcbiAgICBuYXRpdmVFdmVudCxcbiAgfTogSGFuZGxlclN0YXRlQ2hhbmdlRXZlbnQ8UGFuR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQ+KSA9PiB7XG4gICAgaWYgKG5hdGl2ZUV2ZW50Lm9sZFN0YXRlID09PSBTdGF0ZS5BQ1RJVkUpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmVsZWFzZSh7IG5hdGl2ZUV2ZW50IH0pO1xuICAgIH0gZWxzZSBpZiAobmF0aXZlRXZlbnQuc3RhdGUgPT09IFN0YXRlLkFDVElWRSkge1xuICAgICAgdGhpcy5lbWl0U3RhdGVDaGFuZ2VkKERSQUdHSU5HLCBmYWxzZSk7XG4gICAgICBpZiAodGhpcy5wcm9wcy5rZXlib2FyZERpc21pc3NNb2RlID09PSAnb24tZHJhZycpIHtcbiAgICAgICAgS2V5Ym9hcmQuZGlzbWlzcygpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucHJvcHMuaGlkZVN0YXR1c0Jhcikge1xuICAgICAgICBTdGF0dXNCYXIuc2V0SGlkZGVuKHRydWUsIHRoaXMucHJvcHMuc3RhdHVzQmFyQW5pbWF0aW9uIHx8ICdzbGlkZScpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIG9uVGFwSGFuZGxlclN0YXRlQ2hhbmdlID0gKHtcbiAgICBuYXRpdmVFdmVudCxcbiAgfTogSGFuZGxlclN0YXRlQ2hhbmdlRXZlbnQ8VGFwR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQ+KSA9PiB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kcmF3ZXJTaG93biAmJlxuICAgICAgbmF0aXZlRXZlbnQub2xkU3RhdGUgPT09IFN0YXRlLkFDVElWRSAmJlxuICAgICAgdGhpcy5wcm9wcy5kcmF3ZXJMb2NrTW9kZSAhPT0gJ2xvY2tlZC1vcGVuJ1xuICAgICkge1xuICAgICAgdGhpcy5jbG9zZURyYXdlcigpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZVJlbGVhc2UgPSAoe1xuICAgIG5hdGl2ZUV2ZW50LFxuICB9OiBIYW5kbGVyU3RhdGVDaGFuZ2VFdmVudDxQYW5HZXN0dXJlSGFuZGxlckV2ZW50UGF5bG9hZD4pID0+IHtcbiAgICBjb25zdCB7IGRyYXdlcldpZHRoLCBkcmF3ZXJQb3NpdGlvbiwgZHJhd2VyVHlwZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGNvbnRhaW5lcldpZHRoIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCB7IHRyYW5zbGF0aW9uWDogZHJhZ1gsIHZlbG9jaXR5WCwgeDogdG91Y2hYIH0gPSBuYXRpdmVFdmVudDtcblxuICAgIGlmIChkcmF3ZXJQb3NpdGlvbiAhPT0gJ2xlZnQnKSB7XG4gICAgICAvLyBTZWUgZGVzY3JpcHRpb24gaW4gX3VwZGF0ZUFuaW1hdGVkRXZlbnQgYWJvdXQgd2h5IGV2ZW50cyBhcmUgZmxpcHBlZFxuICAgICAgLy8gZm9yIHJpZ2h0LXNpZGUgZHJhd2VyXG4gICAgICBkcmFnWCA9IC1kcmFnWDtcbiAgICAgIHRvdWNoWCA9IGNvbnRhaW5lcldpZHRoIC0gdG91Y2hYO1xuICAgICAgdmVsb2NpdHlYID0gLXZlbG9jaXR5WDtcbiAgICB9XG5cbiAgICBjb25zdCBnZXN0dXJlU3RhcnRYID0gdG91Y2hYIC0gZHJhZ1g7XG4gICAgbGV0IGRyYWdPZmZzZXRCYXNlZE9uU3RhcnQgPSAwO1xuXG4gICAgaWYgKGRyYXdlclR5cGUgPT09ICdmcm9udCcpIHtcbiAgICAgIGRyYWdPZmZzZXRCYXNlZE9uU3RhcnQgPVxuICAgICAgICBnZXN0dXJlU3RhcnRYID4gZHJhd2VyV2lkdGghID8gZ2VzdHVyZVN0YXJ0WCAtIGRyYXdlcldpZHRoISA6IDA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRPZmZzZXRYID1cbiAgICAgIGRyYWdYICsgZHJhZ09mZnNldEJhc2VkT25TdGFydCArICh0aGlzLmRyYXdlclNob3duID8gZHJhd2VyV2lkdGghIDogMCk7XG4gICAgY29uc3QgcHJvak9mZnNldFggPSBzdGFydE9mZnNldFggKyBEUkFHX1RPU1MgKiB2ZWxvY2l0eVg7XG5cbiAgICBjb25zdCBzaG91bGRPcGVuID0gcHJvak9mZnNldFggPiBkcmF3ZXJXaWR0aCEgLyAyO1xuXG4gICAgaWYgKHNob3VsZE9wZW4pIHtcbiAgICAgIHRoaXMuYW5pbWF0ZURyYXdlcihzdGFydE9mZnNldFgsIGRyYXdlcldpZHRoISwgdmVsb2NpdHlYKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hbmltYXRlRHJhd2VyKHN0YXJ0T2Zmc2V0WCwgMCwgdmVsb2NpdHlYKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVTaG93aW5nID0gKHNob3dpbmc6IGJvb2xlYW4pID0+IHtcbiAgICB0aGlzLmRyYXdlclNob3duID0gc2hvd2luZztcbiAgICB0aGlzLmFjY2Vzc2liaWxpdHlJc01vZGFsVmlldy5jdXJyZW50Py5zZXROYXRpdmVQcm9wcyh7XG4gICAgICBhY2Nlc3NpYmlsaXR5Vmlld0lzTW9kYWw6IHNob3dpbmcsXG4gICAgfSk7XG4gICAgdGhpcy5wb2ludGVyRXZlbnRzVmlldy5jdXJyZW50Py5zZXROYXRpdmVQcm9wcyh7XG4gICAgICBwb2ludGVyRXZlbnRzOiBzaG93aW5nID8gJ2F1dG8nIDogJ25vbmUnLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgZHJhd2VyUG9zaXRpb24sIG1pblN3aXBlRGlzdGFuY2UsIGVkZ2VXaWR0aCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBmcm9tTGVmdCA9IGRyYXdlclBvc2l0aW9uID09PSAnbGVmdCc7XG4gICAgLy8gZ2VzdHVyZU9yaWVudGF0aW9uIGlzIDEgaWYgdGhlIGV4cGVjdGVkIGdlc3R1cmUgaXMgZnJvbSBsZWZ0IHRvIHJpZ2h0IGFuZCAtMSBvdGhlcndpc2VcbiAgICAvLyBlLmcuIHdoZW4gZHJhd2VyIGlzIG9uIHRoZSBsZWZ0IGFuZCBpcyBjbG9zZWQgd2UgZXhwZWN0IGxlZnQgdG8gcmlnaHQgZ2VzdHVyZSwgdGh1c1xuICAgIC8vIG9yaWVudGF0aW9uIHdpbGwgYmUgMS5cbiAgICBjb25zdCBnZXN0dXJlT3JpZW50YXRpb24gPVxuICAgICAgKGZyb21MZWZ0ID8gMSA6IC0xKSAqICh0aGlzLmRyYXdlclNob3duID8gLTEgOiAxKTtcbiAgICAvLyBXaGVuIGRyYXdlciBpcyBjbG9zZWQgd2Ugd2FudCB0aGUgaGl0U2xvcCB0byBiZSBob3Jpem9udGFsbHkgc2hvcnRlclxuICAgIC8vIHRoYW4gdGhlIGNvbnRhaW5lciBzaXplIGJ5IHRoZSB2YWx1ZSBvZiBTTE9QLiBUaGlzIHdpbGwgbWFrZSBpdCBvbmx5XG4gICAgLy8gYWN0aXZhdGUgd2hlbiBnZXN0dXJlIGhhcHBlbnMgbm90IGZ1cnRoZXIgdGhhbiBTTE9QIGF3YXkgZnJvbSB0aGUgZWRnZVxuICAgIGNvbnN0IGhpdFNsb3AgPSBmcm9tTGVmdFxuICAgICAgPyB7IGxlZnQ6IDAsIHdpZHRoOiBzaG93aW5nID8gdW5kZWZpbmVkIDogZWRnZVdpZHRoIH1cbiAgICAgIDogeyByaWdodDogMCwgd2lkdGg6IHNob3dpbmcgPyB1bmRlZmluZWQgOiBlZGdlV2lkdGggfTtcbiAgICAvLyBAdHMtaWdub3JlIGludGVybmFsIEFQSSwgbWF5YmUgY291bGQgYmUgZml4ZWQgaW4gaGFuZGxlciB0eXBlc1xuICAgIHRoaXMucGFuR2VzdHVyZUhhbmRsZXIuY3VycmVudD8uc2V0TmF0aXZlUHJvcHMoe1xuICAgICAgaGl0U2xvcCxcbiAgICAgIGFjdGl2ZU9mZnNldFg6IGdlc3R1cmVPcmllbnRhdGlvbiAqIG1pblN3aXBlRGlzdGFuY2UhLFxuICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgYW5pbWF0ZURyYXdlciA9IChcbiAgICBmcm9tVmFsdWU6IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQsXG4gICAgdG9WYWx1ZTogbnVtYmVyLFxuICAgIHZlbG9jaXR5OiBudW1iZXIsXG4gICAgc3BlZWQ/OiBudW1iZXJcbiAgKSA9PiB7XG4gICAgdGhpcy5zdGF0ZS5kcmFnWC5zZXRWYWx1ZSgwKTtcbiAgICB0aGlzLnN0YXRlLnRvdWNoWC5zZXRWYWx1ZShcbiAgICAgIHRoaXMucHJvcHMuZHJhd2VyUG9zaXRpb24gPT09ICdsZWZ0JyA/IDAgOiB0aGlzLnN0YXRlLmNvbnRhaW5lcldpZHRoXG4gICAgKTtcblxuICAgIGlmIChmcm9tVmFsdWUgIT0gbnVsbCkge1xuICAgICAgbGV0IG5leHRGcmFtZVBvc2l0aW9uID0gZnJvbVZhbHVlO1xuICAgICAgaWYgKHRoaXMucHJvcHMudXNlTmF0aXZlQW5pbWF0aW9ucykge1xuICAgICAgICAvLyBXaGVuIHVzaW5nIG5hdGl2ZSBkcml2ZXIsIHdlIHByZWRpY3QgdGhlIG5leHQgcG9zaXRpb24gb2YgdGhlIGFuaW1hdGlvblxuICAgICAgICAvLyBiZWNhdXNlIGl0IHRha2VzIG9uZSBmcmFtZSBvZiBhIHJvdW5kdHJpcCB0byBwYXNzIFJFTEVBU0UgZXZlbnQgZnJvbVxuICAgICAgICAvLyBuYXRpdmUgZHJpdmVyIHRvIEpTIGJlZm9yZSB3ZSBjYW4gc3RhcnQgYW5pbWF0aW5nLiBXaXRob3V0IGl0LCBpdCBpcyBtb3JlXG4gICAgICAgIC8vIG5vdGljYWJsZSB0aGF0IHRoZSBmcmFtZSBpcyBkcm9wcGVkLlxuICAgICAgICBpZiAoZnJvbVZhbHVlIDwgdG9WYWx1ZSAmJiB2ZWxvY2l0eSA+IDApIHtcbiAgICAgICAgICBuZXh0RnJhbWVQb3NpdGlvbiA9IE1hdGgubWluKGZyb21WYWx1ZSArIHZlbG9jaXR5IC8gNjAuMCwgdG9WYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJvbVZhbHVlID4gdG9WYWx1ZSAmJiB2ZWxvY2l0eSA8IDApIHtcbiAgICAgICAgICBuZXh0RnJhbWVQb3NpdGlvbiA9IE1hdGgubWF4KGZyb21WYWx1ZSArIHZlbG9jaXR5IC8gNjAuMCwgdG9WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUuZHJhd2VyVHJhbnNsYXRpb24uc2V0VmFsdWUobmV4dEZyYW1lUG9zaXRpb24pO1xuICAgIH1cblxuICAgIGNvbnN0IHdpbGxTaG93ID0gdG9WYWx1ZSAhPT0gMDtcbiAgICB0aGlzLnVwZGF0ZVNob3dpbmcod2lsbFNob3cpO1xuICAgIHRoaXMuZW1pdFN0YXRlQ2hhbmdlZChTRVRUTElORywgd2lsbFNob3cpO1xuICAgIGlmICh0aGlzLnByb3BzLmhpZGVTdGF0dXNCYXIpIHtcbiAgICAgIFN0YXR1c0Jhci5zZXRIaWRkZW4od2lsbFNob3csIHRoaXMucHJvcHMuc3RhdHVzQmFyQW5pbWF0aW9uIHx8ICdzbGlkZScpO1xuICAgIH1cbiAgICBBbmltYXRlZC5zcHJpbmcodGhpcy5zdGF0ZS5kcmF3ZXJUcmFuc2xhdGlvbiwge1xuICAgICAgdmVsb2NpdHksXG4gICAgICBib3VuY2luZXNzOiAwLFxuICAgICAgdG9WYWx1ZSxcbiAgICAgIHVzZU5hdGl2ZURyaXZlcjogdGhpcy5wcm9wcy51c2VOYXRpdmVBbmltYXRpb25zISxcbiAgICAgIHNwZWVkOiBzcGVlZCA/PyB1bmRlZmluZWQsXG4gICAgfSkuc3RhcnQoKHsgZmluaXNoZWQgfSkgPT4ge1xuICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgIHRoaXMuZW1pdFN0YXRlQ2hhbmdlZChJRExFLCB3aWxsU2hvdyk7XG4gICAgICAgIGlmICh3aWxsU2hvdykge1xuICAgICAgICAgIHRoaXMucHJvcHMub25EcmF3ZXJPcGVuPy4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uRHJhd2VyQ2xvc2U/LigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgb3BlbkRyYXdlciA9IChvcHRpb25zOiBEcmF3ZXJNb3ZlbWVudE9wdGlvbiA9IHt9KSA9PiB7XG4gICAgdGhpcy5hbmltYXRlRHJhd2VyKFxuICAgICAgLy8gVE9ETzogZGVjaWRlIGlmIGl0IHNob3VsZCBiZSBudWxsIG9yIHVuZGVmaW5lZCBpcyB0aGUgcHJvcGVyIHZhbHVlXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLnByb3BzLmRyYXdlcldpZHRoISxcbiAgICAgIG9wdGlvbnMudmVsb2NpdHkgPyBvcHRpb25zLnZlbG9jaXR5IDogMFxuICAgICk7XG5cbiAgICAvLyBXZSBuZWVkIHRvIGZvcmNlIHRoZSB1cGRhdGUsIG90aGVyd2lzZSB0aGUgb3ZlcmxheSBpcyBub3QgcmVyZW5kZXJlZCBhbmQgaXQgd291bGQgbm90IGJlIGNsaWNrYWJsZVxuICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgfTtcblxuICBjbG9zZURyYXdlciA9IChvcHRpb25zOiBEcmF3ZXJNb3ZlbWVudE9wdGlvbiA9IHt9KSA9PiB7XG4gICAgLy8gVE9ETzogZGVjaWRlIGlmIGl0IHNob3VsZCBiZSBudWxsIG9yIHVuZGVmaW5lZCBpcyB0aGUgcHJvcGVyIHZhbHVlXG4gICAgdGhpcy5hbmltYXRlRHJhd2VyKHVuZGVmaW5lZCwgMCwgb3B0aW9ucy52ZWxvY2l0eSA/IG9wdGlvbnMudmVsb2NpdHkgOiAwKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gZm9yY2UgdGhlIHVwZGF0ZSwgb3RoZXJ3aXNlIHRoZSBvdmVybGF5IGlzIG5vdCByZXJlbmRlcmVkIGFuZCBpdCB3b3VsZCBiZSBzdGlsbCBjbGlja2FibGVcbiAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gIH07XG5cbiAgcHJpdmF0ZSByZW5kZXJPdmVybGF5ID0gKCkgPT4ge1xuICAgIC8qIE92ZXJsYXkgc3R5bGVzICovXG4gICAgaW52YXJpYW50KHRoaXMub3BlblZhbHVlLCAnc2hvdWxkIGJlIHNldCcpO1xuICAgIGNvbnN0IG92ZXJsYXlPcGFjaXR5ID0gdGhpcy5vcGVuVmFsdWUuaW50ZXJwb2xhdGUoe1xuICAgICAgaW5wdXRSYW5nZTogWzAsIDFdLFxuICAgICAgb3V0cHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgIGV4dHJhcG9sYXRlOiAnY2xhbXAnLFxuICAgIH0pO1xuICAgIGNvbnN0IGR5bmFtaWNPdmVybGF5U3R5bGVzID0ge1xuICAgICAgb3BhY2l0eTogb3ZlcmxheU9wYWNpdHksXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMucHJvcHMub3ZlcmxheUNvbG9yLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFRhcEdlc3R1cmVIYW5kbGVyIG9uSGFuZGxlclN0YXRlQ2hhbmdlPXt0aGlzLm9uVGFwSGFuZGxlclN0YXRlQ2hhbmdlfT5cbiAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICBwb2ludGVyRXZlbnRzPXt0aGlzLmRyYXdlclNob3duID8gJ2F1dG8nIDogJ25vbmUnfVxuICAgICAgICAgIHJlZj17dGhpcy5wb2ludGVyRXZlbnRzVmlld31cbiAgICAgICAgICBzdHlsZT17W3N0eWxlcy5vdmVybGF5LCBkeW5hbWljT3ZlcmxheVN0eWxlc119XG4gICAgICAgIC8+XG4gICAgICA8L1RhcEdlc3R1cmVIYW5kbGVyPlxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSByZW5kZXJEcmF3ZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgZHJhd2VyQmFja2dyb3VuZENvbG9yLFxuICAgICAgZHJhd2VyV2lkdGgsXG4gICAgICBkcmF3ZXJQb3NpdGlvbixcbiAgICAgIGRyYXdlclR5cGUsXG4gICAgICBkcmF3ZXJDb250YWluZXJTdHlsZSxcbiAgICAgIGNvbnRlbnRDb250YWluZXJTdHlsZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGZyb21MZWZ0ID0gZHJhd2VyUG9zaXRpb24gPT09ICdsZWZ0JztcbiAgICBjb25zdCBkcmF3ZXJTbGlkZSA9IGRyYXdlclR5cGUgIT09ICdiYWNrJztcbiAgICBjb25zdCBjb250YWluZXJTbGlkZSA9IGRyYXdlclR5cGUgIT09ICdmcm9udCc7XG5cbiAgICAvLyB3ZSByZWx5IG9uIHJvdyBhbmQgcm93LXJldmVyc2UgZmxleCBkaXJlY3Rpb25zIHRvIHBvc2l0aW9uIHRoZSBkcmF3ZXJcbiAgICAvLyBwcm9wZXJseS4gQXBwYXJlbnRseSBmb3IgUlRMIHRoZXNlIGFyZSBmbGlwcGVkIHdoaWNoIHJlcXVpcmVzIHVzIHRvIHVzZVxuICAgIC8vIHRoZSBvcHBvc2l0ZSBzZXR0aW5nIGZvciB0aGUgZHJhd2VyIHRvIGFwcGVhciBmcm9tIGxlZnQgb3IgcmlnaHQgYWNjb3JkaW5nXG4gICAgLy8gdG8gdGhlIGRyYXdlclBvc2l0aW9uIHByb3BcbiAgICBjb25zdCByZXZlcnNlQ29udGVudERpcmVjdGlvbiA9IEkxOG5NYW5hZ2VyLmlzUlRMID8gZnJvbUxlZnQgOiAhZnJvbUxlZnQ7XG5cbiAgICBjb25zdCBkeW5hbWljRHJhd2VyU3R5bGVzID0ge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiBkcmF3ZXJCYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB3aWR0aDogZHJhd2VyV2lkdGgsXG4gICAgfTtcbiAgICBjb25zdCBvcGVuVmFsdWUgPSB0aGlzLm9wZW5WYWx1ZTtcbiAgICBpbnZhcmlhbnQob3BlblZhbHVlLCAnc2hvdWxkIGJlIHNldCcpO1xuXG4gICAgbGV0IGNvbnRhaW5lclN0eWxlcztcbiAgICBpZiAoY29udGFpbmVyU2xpZGUpIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lclRyYW5zbGF0ZVggPSBvcGVuVmFsdWUuaW50ZXJwb2xhdGUoe1xuICAgICAgICBpbnB1dFJhbmdlOiBbMCwgMV0sXG4gICAgICAgIG91dHB1dFJhbmdlOiBmcm9tTGVmdCA/IFswLCBkcmF3ZXJXaWR0aCFdIDogWzAsIC1kcmF3ZXJXaWR0aCFdLFxuICAgICAgICBleHRyYXBvbGF0ZTogJ2NsYW1wJyxcbiAgICAgIH0pO1xuICAgICAgY29udGFpbmVyU3R5bGVzID0ge1xuICAgICAgICB0cmFuc2Zvcm06IFt7IHRyYW5zbGF0ZVg6IGNvbnRhaW5lclRyYW5zbGF0ZVggfV0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGxldCBkcmF3ZXJUcmFuc2xhdGVYOiBudW1iZXIgfCBBbmltYXRlZC5BbmltYXRlZEludGVycG9sYXRpb24gPSAwO1xuICAgIGlmIChkcmF3ZXJTbGlkZSkge1xuICAgICAgY29uc3QgY2xvc2VkRHJhd2VyT2Zmc2V0ID0gZnJvbUxlZnQgPyAtZHJhd2VyV2lkdGghIDogZHJhd2VyV2lkdGghO1xuICAgICAgZHJhd2VyVHJhbnNsYXRlWCA9IG9wZW5WYWx1ZS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgIGlucHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgICAgb3V0cHV0UmFuZ2U6IFtjbG9zZWREcmF3ZXJPZmZzZXQsIDBdLFxuICAgICAgICBleHRyYXBvbGF0ZTogJ2NsYW1wJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBkcmF3ZXJTdHlsZXM6IHtcbiAgICAgIHRyYW5zZm9ybTogeyB0cmFuc2xhdGVYOiBudW1iZXIgfCBBbmltYXRlZC5BbmltYXRlZEludGVycG9sYXRpb24gfVtdO1xuICAgICAgZmxleERpcmVjdGlvbjogJ3Jvdy1yZXZlcnNlJyB8ICdyb3cnO1xuICAgIH0gPSB7XG4gICAgICB0cmFuc2Zvcm06IFt7IHRyYW5zbGF0ZVg6IGRyYXdlclRyYW5zbGF0ZVggfV0sXG4gICAgICBmbGV4RGlyZWN0aW9uOiByZXZlcnNlQ29udGVudERpcmVjdGlvbiA/ICdyb3ctcmV2ZXJzZScgOiAncm93JyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxBbmltYXRlZC5WaWV3IHN0eWxlPXtzdHlsZXMubWFpbn0gb25MYXlvdXQ9e3RoaXMuaGFuZGxlQ29udGFpbmVyTGF5b3V0fT5cbiAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgZHJhd2VyVHlwZSA9PT0gJ2Zyb250J1xuICAgICAgICAgICAgICA/IHN0eWxlcy5jb250YWluZXJPbkJhY2tcbiAgICAgICAgICAgICAgOiBzdHlsZXMuY29udGFpbmVySW5Gcm9udCxcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlcyxcbiAgICAgICAgICAgIGNvbnRlbnRDb250YWluZXJTdHlsZSxcbiAgICAgICAgICBdfVxuICAgICAgICAgIGltcG9ydGFudEZvckFjY2Vzc2liaWxpdHk9e1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXJTaG93biA/ICduby1oaWRlLWRlc2NlbmRhbnRzJyA6ICd5ZXMnXG4gICAgICAgICAgfT5cbiAgICAgICAgICB7dHlwZW9mIHRoaXMucHJvcHMuY2hpbGRyZW4gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gdGhpcy5wcm9wcy5jaGlsZHJlbih0aGlzLm9wZW5WYWx1ZSlcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICB7dGhpcy5yZW5kZXJPdmVybGF5KCl9XG4gICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIlxuICAgICAgICAgIHJlZj17dGhpcy5hY2Nlc3NpYmlsaXR5SXNNb2RhbFZpZXd9XG4gICAgICAgICAgYWNjZXNzaWJpbGl0eVZpZXdJc01vZGFsPXt0aGlzLmRyYXdlclNob3dufVxuICAgICAgICAgIHN0eWxlPXtbc3R5bGVzLmRyYXdlckNvbnRhaW5lciwgZHJhd2VyU3R5bGVzLCBkcmF3ZXJDb250YWluZXJTdHlsZV19PlxuICAgICAgICAgIDxWaWV3IHN0eWxlPXtkeW5hbWljRHJhd2VyU3R5bGVzfT5cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLnJlbmRlck5hdmlnYXRpb25WaWV3KHRoaXMub3BlblZhbHVlIGFzIEFuaW1hdGVkLlZhbHVlKX1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgc2V0UGFuR2VzdHVyZVJlZiA9IChyZWY6IFBhbkdlc3R1cmVIYW5kbGVyKSA9PiB7XG4gICAgLy8gVE9ETyhUUyk6IG1ha2Ugc3VyZSBpdCBpcyBPS1xuICAgIC8vIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0RlZmluaXRlbHlUeXBlZC9EZWZpbml0ZWx5VHlwZWQvaXNzdWVzLzMxMDY1I2lzc3VlY29tbWVudC01OTYwODE4NDJcbiAgICAodGhpc1xuICAgICAgLnBhbkdlc3R1cmVIYW5kbGVyIGFzIFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8UGFuR2VzdHVyZUhhbmRsZXI+KS5jdXJyZW50ID0gcmVmO1xuICAgIHRoaXMucHJvcHMub25HZXN0dXJlUmVmPy4ocmVmKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZHJhd2VyUG9zaXRpb24sXG4gICAgICBkcmF3ZXJMb2NrTW9kZSxcbiAgICAgIGVkZ2VXaWR0aCxcbiAgICAgIG1pblN3aXBlRGlzdGFuY2UsXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBmcm9tTGVmdCA9IGRyYXdlclBvc2l0aW9uID09PSAnbGVmdCc7XG5cbiAgICAvLyBnZXN0dXJlT3JpZW50YXRpb24gaXMgMSBpZiB0aGUgZXhwZWN0ZWQgZ2VzdHVyZSBpcyBmcm9tIGxlZnQgdG8gcmlnaHQgYW5kIC0xIG90aGVyd2lzZVxuICAgIC8vIGUuZy4gd2hlbiBkcmF3ZXIgaXMgb24gdGhlIGxlZnQgYW5kIGlzIGNsb3NlZCB3ZSBleHBlY3QgbGVmdCB0byByaWdodCBnZXN0dXJlLCB0aHVzXG4gICAgLy8gb3JpZW50YXRpb24gd2lsbCBiZSAxLlxuICAgIGNvbnN0IGdlc3R1cmVPcmllbnRhdGlvbiA9XG4gICAgICAoZnJvbUxlZnQgPyAxIDogLTEpICogKHRoaXMuZHJhd2VyU2hvd24gPyAtMSA6IDEpO1xuXG4gICAgLy8gV2hlbiBkcmF3ZXIgaXMgY2xvc2VkIHdlIHdhbnQgdGhlIGhpdFNsb3AgdG8gYmUgaG9yaXpvbnRhbGx5IHNob3J0ZXJcbiAgICAvLyB0aGFuIHRoZSBjb250YWluZXIgc2l6ZSBieSB0aGUgdmFsdWUgb2YgU0xPUC4gVGhpcyB3aWxsIG1ha2UgaXQgb25seVxuICAgIC8vIGFjdGl2YXRlIHdoZW4gZ2VzdHVyZSBoYXBwZW5zIG5vdCBmdXJ0aGVyIHRoYW4gU0xPUCBhd2F5IGZyb20gdGhlIGVkZ2VcbiAgICBjb25zdCBoaXRTbG9wID0gZnJvbUxlZnRcbiAgICAgID8geyBsZWZ0OiAwLCB3aWR0aDogdGhpcy5kcmF3ZXJTaG93biA/IHVuZGVmaW5lZCA6IGVkZ2VXaWR0aCB9XG4gICAgICA6IHsgcmlnaHQ6IDAsIHdpZHRoOiB0aGlzLmRyYXdlclNob3duID8gdW5kZWZpbmVkIDogZWRnZVdpZHRoIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhbkdlc3R1cmVIYW5kbGVyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgY291bGQgYmUgZml4ZWQgaW4gaGFuZGxlciB0eXBlc1xuICAgICAgICByZWY9e3RoaXMuc2V0UGFuR2VzdHVyZVJlZn1cbiAgICAgICAgaGl0U2xvcD17aGl0U2xvcH1cbiAgICAgICAgYWN0aXZlT2Zmc2V0WD17Z2VzdHVyZU9yaWVudGF0aW9uICogbWluU3dpcGVEaXN0YW5jZSF9XG4gICAgICAgIGZhaWxPZmZzZXRZPXtbLTE1LCAxNV19XG4gICAgICAgIG9uR2VzdHVyZUV2ZW50PXt0aGlzLm9uR2VzdHVyZUV2ZW50fVxuICAgICAgICBvbkhhbmRsZXJTdGF0ZUNoYW5nZT17dGhpcy5vcGVuaW5nSGFuZGxlclN0YXRlQ2hhbmdlfVxuICAgICAgICBlbmFibGVUcmFja3BhZFR3b0Zpbmdlckdlc3R1cmU9e1xuICAgICAgICAgIHRoaXMucHJvcHMuZW5hYmxlVHJhY2twYWRUd29GaW5nZXJHZXN0dXJlXG4gICAgICAgIH1cbiAgICAgICAgZW5hYmxlZD17XG4gICAgICAgICAgZHJhd2VyTG9ja01vZGUgIT09ICdsb2NrZWQtY2xvc2VkJyAmJiBkcmF3ZXJMb2NrTW9kZSAhPT0gJ2xvY2tlZC1vcGVuJ1xuICAgICAgICB9PlxuICAgICAgICB7dGhpcy5yZW5kZXJEcmF3ZXIoKX1cbiAgICAgIDwvUGFuR2VzdHVyZUhhbmRsZXI+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGRyYXdlckNvbnRhaW5lcjoge1xuICAgIC4uLlN0eWxlU2hlZXQuYWJzb2x1dGVGaWxsT2JqZWN0LFxuICAgIHpJbmRleDogMTAwMSxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgfSxcbiAgY29udGFpbmVySW5Gcm9udDoge1xuICAgIC4uLlN0eWxlU2hlZXQuYWJzb2x1dGVGaWxsT2JqZWN0LFxuICAgIHpJbmRleDogMTAwMixcbiAgfSxcbiAgY29udGFpbmVyT25CYWNrOiB7XG4gICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gIH0sXG4gIG1haW46IHtcbiAgICBmbGV4OiAxLFxuICAgIHpJbmRleDogMCxcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gIH0sXG4gIG92ZXJsYXk6IHtcbiAgICAuLi5TdHlsZVNoZWV0LmFic29sdXRlRmlsbE9iamVjdCxcbiAgICB6SW5kZXg6IDEwMDAsXG4gIH0sXG59KTtcbiJdfQ==