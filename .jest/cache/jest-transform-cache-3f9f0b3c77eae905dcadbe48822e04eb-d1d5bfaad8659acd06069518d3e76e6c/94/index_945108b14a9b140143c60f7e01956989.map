{"version":3,"sources":["index.js"],"names":["Object","defineProperty","exports","value","codeFrameColumns","default","_default","_highlight","require","deprecationWarningShown","getDefs","chalk","gutter","grey","marker","red","bold","message","NEWLINE","getMarkerLines","loc","source","opts","startLoc","column","line","start","endLoc","end","linesAbove","linesBelow","startLine","startColumn","endLine","endColumn","Math","max","min","length","lineDiff","markerLines","i","lineNumber","sourceLength","rawLines","highlighted","highlightCode","forceColor","shouldHighlight","getChalk","defs","maybeHighlight","chalkFn","string","lines","split","hasColumns","numberMaxWidth","String","highlightedLines","frame","slice","map","index","number","paddedNumber","hasMarker","lastMarkerLine","markerLine","Array","isArray","markerSpacing","replace","numberOfMarkers","repeat","join","reset","colNumber","process","emitWarning","deprecationError","Error","name","console","warn","location"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.codeFrameColumns = codeFrameColumns;\nexports.default = _default;\n\nvar _highlight = require(\"@babel/highlight\");\n\nlet deprecationWarningShown = false;\n\nfunction getDefs(chalk) {\n  return {\n    gutter: chalk.grey,\n    marker: chalk.red.bold,\n    message: chalk.red.bold\n  };\n}\n\nconst NEWLINE = /\\r\\n|[\\n\\r\\u2028\\u2029]/;\n\nfunction getMarkerLines(loc, source, opts) {\n  const startLoc = Object.assign({\n    column: 0,\n    line: -1\n  }, loc.start);\n  const endLoc = Object.assign({}, startLoc, loc.end);\n  const {\n    linesAbove = 2,\n    linesBelow = 3\n  } = opts || {};\n  const startLine = startLoc.line;\n  const startColumn = startLoc.column;\n  const endLine = endLoc.line;\n  const endColumn = endLoc.column;\n  let start = Math.max(startLine - (linesAbove + 1), 0);\n  let end = Math.min(source.length, endLine + linesBelow);\n\n  if (startLine === -1) {\n    start = 0;\n  }\n\n  if (endLine === -1) {\n    end = source.length;\n  }\n\n  const lineDiff = endLine - startLine;\n  const markerLines = {};\n\n  if (lineDiff) {\n    for (let i = 0; i <= lineDiff; i++) {\n      const lineNumber = i + startLine;\n\n      if (!startColumn) {\n        markerLines[lineNumber] = true;\n      } else if (i === 0) {\n        const sourceLength = source[lineNumber - 1].length;\n        markerLines[lineNumber] = [startColumn, sourceLength - startColumn + 1];\n      } else if (i === lineDiff) {\n        markerLines[lineNumber] = [0, endColumn];\n      } else {\n        const sourceLength = source[lineNumber - i].length;\n        markerLines[lineNumber] = [0, sourceLength];\n      }\n    }\n  } else {\n    if (startColumn === endColumn) {\n      if (startColumn) {\n        markerLines[startLine] = [startColumn, 0];\n      } else {\n        markerLines[startLine] = true;\n      }\n    } else {\n      markerLines[startLine] = [startColumn, endColumn - startColumn];\n    }\n  }\n\n  return {\n    start,\n    end,\n    markerLines\n  };\n}\n\nfunction codeFrameColumns(rawLines, loc, opts = {}) {\n  const highlighted = (opts.highlightCode || opts.forceColor) && (0, _highlight.shouldHighlight)(opts);\n  const chalk = (0, _highlight.getChalk)(opts);\n  const defs = getDefs(chalk);\n\n  const maybeHighlight = (chalkFn, string) => {\n    return highlighted ? chalkFn(string) : string;\n  };\n\n  const lines = rawLines.split(NEWLINE);\n  const {\n    start,\n    end,\n    markerLines\n  } = getMarkerLines(loc, lines, opts);\n  const hasColumns = loc.start && typeof loc.start.column === \"number\";\n  const numberMaxWidth = String(end).length;\n  const highlightedLines = highlighted ? (0, _highlight.default)(rawLines, opts) : rawLines;\n  let frame = highlightedLines.split(NEWLINE).slice(start, end).map((line, index) => {\n    const number = start + 1 + index;\n    const paddedNumber = ` ${number}`.slice(-numberMaxWidth);\n    const gutter = ` ${paddedNumber} |`;\n    const hasMarker = markerLines[number];\n    const lastMarkerLine = !markerLines[number + 1];\n\n    if (hasMarker) {\n      let markerLine = \"\";\n\n      if (Array.isArray(hasMarker)) {\n        const markerSpacing = line.slice(0, Math.max(hasMarker[0] - 1, 0)).replace(/[^\\t]/g, \" \");\n        const numberOfMarkers = hasMarker[1] || 1;\n        markerLine = [\"\\n \", maybeHighlight(defs.gutter, gutter.replace(/\\d/g, \" \")), \" \", markerSpacing, maybeHighlight(defs.marker, \"^\").repeat(numberOfMarkers)].join(\"\");\n\n        if (lastMarkerLine && opts.message) {\n          markerLine += \" \" + maybeHighlight(defs.message, opts.message);\n        }\n      }\n\n      return [maybeHighlight(defs.marker, \">\"), maybeHighlight(defs.gutter, gutter), line.length > 0 ? ` ${line}` : \"\", markerLine].join(\"\");\n    } else {\n      return ` ${maybeHighlight(defs.gutter, gutter)}${line.length > 0 ? ` ${line}` : \"\"}`;\n    }\n  }).join(\"\\n\");\n\n  if (opts.message && !hasColumns) {\n    frame = `${\" \".repeat(numberMaxWidth + 1)}${opts.message}\\n${frame}`;\n  }\n\n  if (highlighted) {\n    return chalk.reset(frame);\n  } else {\n    return frame;\n  }\n}\n\nfunction _default(rawLines, lineNumber, colNumber, opts = {}) {\n  if (!deprecationWarningShown) {\n    deprecationWarningShown = true;\n    const message = \"Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.\";\n\n    if (process.emitWarning) {\n      process.emitWarning(message, \"DeprecationWarning\");\n    } else {\n      const deprecationError = new Error(message);\n      deprecationError.name = \"DeprecationWarning\";\n      console.warn(new Error(message));\n    }\n  }\n\n  colNumber = Math.max(colNumber, 0);\n  const location = {\n    start: {\n      column: colNumber,\n      line: lineNumber\n    }\n  };\n  return codeFrameColumns(rawLines, location, opts);\n}"]}