{"version":3,"sources":["act-compat.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","asyncAct","default","React","_interopRequireWildcard","_reactDom","testUtils","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","reactAct","act","actSupported","undefined","actPolyfill","cb","unstable_batchedUpdates","render","createElement","document","youHaveBeenWarned","isAsyncActSupported","Promise","resolve","reject","originalConsoleError","console","error","args","firstArgIsString","indexOf","apply","cbReturn","result","err","then","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.asyncAct = asyncAct;\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar testUtils = _interopRequireWildcard(require(\"react-dom/test-utils\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst reactAct = testUtils.act;\nconst actSupported = reactAct !== undefined; // act is supported react-dom@16.8.0\n// so for versions that don't have act from test utils\n// we do this little polyfill. No warnings, but it's\n// better than nothing.\n\nfunction actPolyfill(cb) {\n  _reactDom.default.unstable_batchedUpdates(cb);\n\n  _reactDom.default.render( /*#__PURE__*/React.createElement(\"div\", null), document.createElement('div'));\n}\n\nconst act = reactAct || actPolyfill;\nlet youHaveBeenWarned = false;\nlet isAsyncActSupported = null;\n\nfunction asyncAct(cb) {\n  if (actSupported === true) {\n    if (isAsyncActSupported === null) {\n      return new Promise((resolve, reject) => {\n        // patch console.error here\n        const originalConsoleError = console.error;\n\n        console.error = function error(...args) {\n          /* if console.error fired *with that specific message* */\n\n          /* istanbul ignore next */\n          const firstArgIsString = typeof args[0] === 'string';\n\n          if (firstArgIsString && args[0].indexOf('Warning: Do not await the result of calling ReactTestUtils.act') === 0) {\n            // v16.8.6\n            isAsyncActSupported = false;\n          } else if (firstArgIsString && args[0].indexOf('Warning: The callback passed to ReactTestUtils.act(...) function must not return anything') === 0) {// no-op\n          } else {\n            originalConsoleError.apply(console, args);\n          }\n        };\n\n        let cbReturn, result;\n\n        try {\n          result = reactAct(() => {\n            cbReturn = cb();\n            return cbReturn;\n          });\n        } catch (err) {\n          console.error = originalConsoleError;\n          reject(err);\n          return;\n        }\n\n        result.then(() => {\n          console.error = originalConsoleError; // if it got here, it means async act is supported\n\n          isAsyncActSupported = true;\n          resolve();\n        }, err => {\n          console.error = originalConsoleError;\n          isAsyncActSupported = true;\n          reject(err);\n        }); // 16.8.6's act().then() doesn't call a resolve handler, so we need to manually flush here, sigh\n\n        if (isAsyncActSupported === false) {\n          console.error = originalConsoleError;\n          /* istanbul ignore next */\n\n          if (!youHaveBeenWarned) {\n            // if act is supported and async act isn't and they're trying to use async\n            // act, then they need to upgrade from 16.8 to 16.9.\n            // This is a seamless upgrade, so we'll add a warning\n            console.error(`It looks like you're using a version of react-dom that supports the \"act\" function, but not an awaitable version of \"act\" which you will need. Please upgrade to at least react-dom@16.9.0 to remove this warning.`);\n            youHaveBeenWarned = true;\n          }\n\n          cbReturn.then(() => {\n            // a faux-version.\n            // todo - copy https://github.com/facebook/react/blob/master/packages/shared/enqueueTask.js\n            Promise.resolve().then(() => {\n              // use sync act to flush effects\n              act(() => {});\n              resolve();\n            });\n          }, reject);\n        }\n      });\n    } else if (isAsyncActSupported === false) {\n      // use the polyfill directly\n      let result;\n      act(() => {\n        result = cb();\n      });\n      return result.then(() => {\n        return Promise.resolve().then(() => {\n          // use sync act to flush effects\n          act(() => {});\n        });\n      });\n    } // all good! regular act\n\n\n    return act(cb);\n  } // use the polyfill\n\n\n  let result;\n  act(() => {\n    result = cb();\n  });\n  return result.then(() => {\n    return Promise.resolve().then(() => {\n      // use sync act to flush effects\n      act(() => {});\n    });\n  });\n}\n\nvar _default = act;\n/* eslint no-console:0 */\n\nexports.default = _default;"]}