56566286910ff778a518696f9f8b5e87
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var ansiStyles = require('ansi-styles');

var _require = require('supports-color'),
    stdoutColor = _require.stdout,
    stderrColor = _require.stderr;

var _require2 = require("./util"),
    stringReplaceAll = _require2.stringReplaceAll,
    stringEncaseCRLFWithFirstIndex = _require2.stringEncaseCRLFWithFirstIndex;

var isArray = Array.isArray;
var levelMapping = ['ansi', 'ansi', 'ansi256', 'ansi16m'];
var styles = Object.create(null);

var applyOptions = function applyOptions(object) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  if (options.level && !(Number.isInteger(options.level) && options.level >= 0 && options.level <= 3)) {
    throw new Error('The `level` option should be an integer from 0 to 3');
  }

  var colorLevel = stdoutColor ? stdoutColor.level : 0;
  object.level = options.level === undefined ? colorLevel : options.level;
};

var ChalkClass = function ChalkClass(options) {
  (0, _classCallCheck2.default)(this, ChalkClass);
  return chalkFactory(options);
};

var chalkFactory = function chalkFactory(options) {
  var chalk = {};
  applyOptions(chalk, options);

  chalk.template = function () {
    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {
      arguments_[_key] = arguments[_key];
    }

    return chalkTag.apply(void 0, [chalk.template].concat(arguments_));
  };

  Object.setPrototypeOf(chalk, Chalk.prototype);
  Object.setPrototypeOf(chalk.template, chalk);

  chalk.template.constructor = function () {
    throw new Error('`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.');
  };

  chalk.template.Instance = ChalkClass;
  return chalk.template;
};

function Chalk(options) {
  return chalkFactory(options);
}

var _loop = function _loop(styleName, style) {
  styles[styleName] = {
    get: function get() {
      var builder = createBuilder(this, createStyler(style.open, style.close, this._styler), this._isEmpty);
      Object.defineProperty(this, styleName, {
        value: builder
      });
      return builder;
    }
  };
};

for (var _i = 0, _Object$entries = Object.entries(ansiStyles); _i < _Object$entries.length; _i++) {
  var _ref = _Object$entries[_i];

  var _ref2 = (0, _slicedToArray2.default)(_ref, 2);

  var styleName = _ref2[0];
  var style = _ref2[1];

  _loop(styleName, style);
}

styles.visible = {
  get: function get() {
    var builder = createBuilder(this, this._styler, true);
    Object.defineProperty(this, 'visible', {
      value: builder
    });
    return builder;
  }
};
var usedModels = ['rgb', 'hex', 'keyword', 'hsl', 'hsv', 'hwb', 'ansi', 'ansi256'];

var _loop2 = function _loop2(model) {
  styles[model] = {
    get: function get() {
      var level = this.level;
      return function () {
        var _ansiStyles$color$lev;

        var styler = createStyler((_ansiStyles$color$lev = ansiStyles.color[levelMapping[level]])[model].apply(_ansiStyles$color$lev, arguments), ansiStyles.color.close, this._styler);
        return createBuilder(this, styler, this._isEmpty);
      };
    }
  };
};

for (var _i2 = 0, _usedModels = usedModels; _i2 < _usedModels.length; _i2++) {
  var model = _usedModels[_i2];

  _loop2(model);
}

var _loop3 = function _loop3(_model) {
  var bgModel = 'bg' + _model[0].toUpperCase() + _model.slice(1);

  styles[bgModel] = {
    get: function get() {
      var level = this.level;
      return function () {
        var _ansiStyles$bgColor$l;

        var styler = createStyler((_ansiStyles$bgColor$l = ansiStyles.bgColor[levelMapping[level]])[_model].apply(_ansiStyles$bgColor$l, arguments), ansiStyles.bgColor.close, this._styler);
        return createBuilder(this, styler, this._isEmpty);
      };
    }
  };
};

for (var _i3 = 0, _usedModels2 = usedModels; _i3 < _usedModels2.length; _i3++) {
  var _model = _usedModels2[_i3];

  _loop3(_model);
}

var proto = Object.defineProperties(function () {}, (0, _extends2.default)({}, styles, {
  level: {
    enumerable: true,
    get: function get() {
      return this._generator.level;
    },
    set: function set(level) {
      this._generator.level = level;
    }
  }
}));

var createStyler = function createStyler(open, close, parent) {
  var openAll;
  var closeAll;

  if (parent === undefined) {
    openAll = open;
    closeAll = close;
  } else {
    openAll = parent.openAll + open;
    closeAll = close + parent.closeAll;
  }

  return {
    open: open,
    close: close,
    openAll: openAll,
    closeAll: closeAll,
    parent: parent
  };
};

var createBuilder = function createBuilder(self, _styler, _isEmpty) {
  var builder = function builder() {
    for (var _len2 = arguments.length, arguments_ = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      arguments_[_key2] = arguments[_key2];
    }

    if (isArray(arguments_[0]) && isArray(arguments_[0].raw)) {
      return applyStyle(builder, chalkTag.apply(void 0, [builder].concat(arguments_)));
    }

    return applyStyle(builder, arguments_.length === 1 ? '' + arguments_[0] : arguments_.join(' '));
  };

  Object.setPrototypeOf(builder, proto);
  builder._generator = self;
  builder._styler = _styler;
  builder._isEmpty = _isEmpty;
  return builder;
};

var applyStyle = function applyStyle(self, string) {
  if (self.level <= 0 || !string) {
    return self._isEmpty ? '' : string;
  }

  var styler = self._styler;

  if (styler === undefined) {
    return string;
  }

  var _styler2 = styler,
      openAll = _styler2.openAll,
      closeAll = _styler2.closeAll;

  if (string.indexOf("\x1B") !== -1) {
    while (styler !== undefined) {
      string = stringReplaceAll(string, styler.close, styler.open);
      styler = styler.parent;
    }
  }

  var lfIndex = string.indexOf('\n');

  if (lfIndex !== -1) {
    string = stringEncaseCRLFWithFirstIndex(string, closeAll, openAll, lfIndex);
  }

  return openAll + string + closeAll;
};

var template;

var chalkTag = function chalkTag(chalk) {
  for (var _len3 = arguments.length, strings = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
    strings[_key3 - 1] = arguments[_key3];
  }

  var firstString = strings[0];

  if (!isArray(firstString) || !isArray(firstString.raw)) {
    return strings.join(' ');
  }

  var arguments_ = strings.slice(1);
  var parts = [firstString.raw[0]];

  for (var i = 1; i < firstString.length; i++) {
    parts.push(String(arguments_[i - 1]).replace(/[{}\\]/g, '\\$&'), String(firstString.raw[i]));
  }

  if (template === undefined) {
    template = require("./templates");
  }

  return template(chalk, parts.join(''));
};

Object.defineProperties(Chalk.prototype, styles);
var chalk = Chalk();
chalk.supportsColor = stdoutColor;
chalk.stderr = Chalk({
  level: stderrColor ? stderrColor.level : 0
});
chalk.stderr.supportsColor = stderrColor;
module.exports = chalk;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFuc2lTdHlsZXMiLCJyZXF1aXJlIiwic3Rkb3V0Q29sb3IiLCJzdGRvdXQiLCJzdGRlcnJDb2xvciIsInN0ZGVyciIsInN0cmluZ1JlcGxhY2VBbGwiLCJzdHJpbmdFbmNhc2VDUkxGV2l0aEZpcnN0SW5kZXgiLCJpc0FycmF5IiwiQXJyYXkiLCJsZXZlbE1hcHBpbmciLCJzdHlsZXMiLCJPYmplY3QiLCJjcmVhdGUiLCJhcHBseU9wdGlvbnMiLCJvYmplY3QiLCJvcHRpb25zIiwibGV2ZWwiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJFcnJvciIsImNvbG9yTGV2ZWwiLCJ1bmRlZmluZWQiLCJDaGFsa0NsYXNzIiwiY2hhbGtGYWN0b3J5IiwiY2hhbGsiLCJ0ZW1wbGF0ZSIsImFyZ3VtZW50c18iLCJjaGFsa1RhZyIsInNldFByb3RvdHlwZU9mIiwiQ2hhbGsiLCJwcm90b3R5cGUiLCJjb25zdHJ1Y3RvciIsIkluc3RhbmNlIiwic3R5bGVOYW1lIiwic3R5bGUiLCJnZXQiLCJidWlsZGVyIiwiY3JlYXRlQnVpbGRlciIsImNyZWF0ZVN0eWxlciIsIm9wZW4iLCJjbG9zZSIsIl9zdHlsZXIiLCJfaXNFbXB0eSIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJlbnRyaWVzIiwidmlzaWJsZSIsInVzZWRNb2RlbHMiLCJtb2RlbCIsInN0eWxlciIsImNvbG9yIiwiYmdNb2RlbCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJiZ0NvbG9yIiwicHJvdG8iLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZW51bWVyYWJsZSIsIl9nZW5lcmF0b3IiLCJzZXQiLCJwYXJlbnQiLCJvcGVuQWxsIiwiY2xvc2VBbGwiLCJzZWxmIiwicmF3IiwiYXBwbHlTdHlsZSIsImxlbmd0aCIsImpvaW4iLCJzdHJpbmciLCJpbmRleE9mIiwibGZJbmRleCIsInN0cmluZ3MiLCJmaXJzdFN0cmluZyIsInBhcnRzIiwiaSIsInB1c2giLCJTdHJpbmciLCJyZXBs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SyxHQUFHLENBQUNELFdBQVcsQ0FBQ1IsR0FBWixDQUFnQixDQUFoQixDQUFELENBQWQ7O0FBRUEsT0FBSyxJQUFJVSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixXQUFXLENBQUNOLE1BQWhDLEVBQXdDUSxDQUFDLEVBQXpDLEVBQTZDO0FBQzVDRCxJQUFBQSxLQUFLLENBQUNFLElBQU4sQ0FDQ0MsTUFBTSxDQUFDbEQsVUFBVSxDQUFDZ0QsQ0FBQyxHQUFHLENBQUwsQ0FBWCxDQUFOLENBQTBCRyxPQUExQixDQUFrQyxTQUFsQyxFQUE2QyxNQUE3QyxDQURELEVBRUNELE1BQU0sQ0FBQ0osV0FBVyxDQUFDUixHQUFaLENBQWdCVSxDQUFoQixDQUFELENBRlA7QUFJQTs7QUFFRCxNQUFJakQsUUFBUSxLQUFLSixTQUFqQixFQUE0QjtBQUMzQkksSUFBQUEsUUFBUSxHQUFHekIsT0FBTyxlQUFsQjtBQUNBOztBQUVELFNBQU95QixRQUFRLENBQUNELEtBQUQsRUFBUWlELEtBQUssQ0FBQ04sSUFBTixDQUFXLEVBQVgsQ0FBUixDQUFmO0FBQ0EsQ0F4QkQ7O0FBMEJBeEQsTUFBTSxDQUFDNkMsZ0JBQVAsQ0FBd0IzQixLQUFLLENBQUNDLFNBQTlCLEVBQXlDcEIsTUFBekM7QUFFQSxJQUFNYyxLQUFLLEdBQUdLLEtBQUssRUFBbkI7QUFDQUwsS0FBSyxDQUFDc0QsYUFBTixHQUFzQjdFLFdBQXRCO0FBQ0F1QixLQUFLLENBQUNwQixNQUFOLEdBQWV5QixLQUFLLENBQUM7QUFBQ2IsRUFBQUEsS0FBSyxFQUFFYixXQUFXLEdBQUdBLFdBQVcsQ0FBQ2EsS0FBZixHQUF1QjtBQUExQyxDQUFELENBQXBCO0FBQ0FRLEtBQUssQ0FBQ3BCLE1BQU4sQ0FBYTBFLGFBQWIsR0FBNkIzRSxXQUE3QjtBQUVBNEUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCeEQsS0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5jb25zdCBhbnNpU3R5bGVzID0gcmVxdWlyZSgnYW5zaS1zdHlsZXMnKTtcbmNvbnN0IHtzdGRvdXQ6IHN0ZG91dENvbG9yLCBzdGRlcnI6IHN0ZGVyckNvbG9yfSA9IHJlcXVpcmUoJ3N1cHBvcnRzLWNvbG9yJyk7XG5jb25zdCB7XG5cdHN0cmluZ1JlcGxhY2VBbGwsXG5cdHN0cmluZ0VuY2FzZUNSTEZXaXRoRmlyc3RJbmRleFxufSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5jb25zdCB7aXNBcnJheX0gPSBBcnJheTtcblxuLy8gYHN1cHBvcnRzQ29sb3IubGV2ZWxgIOKGkiBgYW5zaVN0eWxlcy5jb2xvcltuYW1lXWAgbWFwcGluZ1xuY29uc3QgbGV2ZWxNYXBwaW5nID0gW1xuXHQnYW5zaScsXG5cdCdhbnNpJyxcblx0J2Fuc2kyNTYnLFxuXHQnYW5zaTE2bSdcbl07XG5cbmNvbnN0IHN0eWxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmNvbnN0IGFwcGx5T3B0aW9ucyA9IChvYmplY3QsIG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRpZiAob3B0aW9ucy5sZXZlbCAmJiAhKE51bWJlci5pc0ludGVnZXIob3B0aW9ucy5sZXZlbCkgJiYgb3B0aW9ucy5sZXZlbCA+PSAwICYmIG9wdGlvbnMubGV2ZWwgPD0gMykpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgbGV2ZWxgIG9wdGlvbiBzaG91bGQgYmUgYW4gaW50ZWdlciBmcm9tIDAgdG8gMycpO1xuXHR9XG5cblx0Ly8gRGV0ZWN0IGxldmVsIGlmIG5vdCBzZXQgbWFudWFsbHlcblx0Y29uc3QgY29sb3JMZXZlbCA9IHN0ZG91dENvbG9yID8gc3Rkb3V0Q29sb3IubGV2ZWwgOiAwO1xuXHRvYmplY3QubGV2ZWwgPSBvcHRpb25zLmxldmVsID09PSB1bmRlZmluZWQgPyBjb2xvckxldmVsIDogb3B0aW9ucy5sZXZlbDtcbn07XG5cbmNsYXNzIENoYWxrQ2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0cnVjdG9yLXJldHVyblxuXHRcdHJldHVybiBjaGFsa0ZhY3Rvcnkob3B0aW9ucyk7XG5cdH1cbn1cblxuY29uc3QgY2hhbGtGYWN0b3J5ID0gb3B0aW9ucyA9PiB7XG5cdGNvbnN0IGNoYWxrID0ge307XG5cdGFwcGx5T3B0aW9ucyhjaGFsaywgb3B0aW9ucyk7XG5cblx0Y2hhbGsudGVtcGxhdGUgPSAoLi4uYXJndW1lbnRzXykgPT4gY2hhbGtUYWcoY2hhbGsudGVtcGxhdGUsIC4uLmFyZ3VtZW50c18pO1xuXG5cdE9iamVjdC5zZXRQcm90b3R5cGVPZihjaGFsaywgQ2hhbGsucHJvdG90eXBlKTtcblx0T2JqZWN0LnNldFByb3RvdHlwZU9mKGNoYWxrLnRlbXBsYXRlLCBjaGFsayk7XG5cblx0Y2hhbGsudGVtcGxhdGUuY29uc3RydWN0b3IgPSAoKSA9PiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdgY2hhbGsuY29uc3RydWN0b3IoKWAgaXMgZGVwcmVjYXRlZC4gVXNlIGBuZXcgY2hhbGsuSW5zdGFuY2UoKWAgaW5zdGVhZC4nKTtcblx0fTtcblxuXHRjaGFsay50ZW1wbGF0ZS5JbnN0YW5jZSA9IENoYWxrQ2xhc3M7XG5cblx0cmV0dXJuIGNoYWxrLnRlbXBsYXRlO1xufTtcblxuZnVuY3Rpb24gQ2hhbGsob3B0aW9ucykge1xuXHRyZXR1cm4gY2hhbGtGYWN0b3J5KG9wdGlvbnMpO1xufVxuXG5mb3IgKGNvbnN0IFtzdHlsZU5hbWUsIHN0eWxlXSBvZiBPYmplY3QuZW50cmllcyhhbnNpU3R5bGVzKSkge1xuXHRzdHlsZXNbc3R5bGVOYW1lXSA9IHtcblx0XHRnZXQoKSB7XG5cdFx0XHRjb25zdCBidWlsZGVyID0gY3JlYXRlQnVpbGRlcih0aGlzLCBjcmVhdGVTdHlsZXIoc3R5bGUub3Blbiwgc3R5bGUuY2xvc2UsIHRoaXMuX3N0eWxlciksIHRoaXMuX2lzRW1wdHkpO1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHN0eWxlTmFtZSwge3ZhbHVlOiBidWlsZGVyfSk7XG5cdFx0XHRyZXR1cm4gYnVpbGRlcjtcblx0XHR9XG5cdH07XG59XG5cbnN0eWxlcy52aXNpYmxlID0ge1xuXHRnZXQoKSB7XG5cdFx0Y29uc3QgYnVpbGRlciA9IGNyZWF0ZUJ1aWxkZXIodGhpcywgdGhpcy5fc3R5bGVyLCB0cnVlKTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Zpc2libGUnLCB7dmFsdWU6IGJ1aWxkZXJ9KTtcblx0XHRyZXR1cm4gYnVpbGRlcjtcblx0fVxufTtcblxuY29uc3QgdXNlZE1vZGVscyA9IFsncmdiJywgJ2hleCcsICdrZXl3b3JkJywgJ2hzbCcsICdoc3YnLCAnaHdiJywgJ2Fuc2knLCAnYW5zaTI1NiddO1xuXG5mb3IgKGNvbnN0IG1vZGVsIG9mIHVzZWRNb2RlbHMpIHtcblx0c3R5bGVzW21vZGVsXSA9IHtcblx0XHRnZXQoKSB7XG5cdFx0XHRjb25zdCB7bGV2ZWx9ID0gdGhpcztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoLi4uYXJndW1lbnRzXykge1xuXHRcdFx0XHRjb25zdCBzdHlsZXIgPSBjcmVhdGVTdHlsZXIoYW5zaVN0eWxlcy5jb2xvcltsZXZlbE1hcHBpbmdbbGV2ZWxdXVttb2RlbF0oLi4uYXJndW1lbnRzXyksIGFuc2lTdHlsZXMuY29sb3IuY2xvc2UsIHRoaXMuX3N0eWxlcik7XG5cdFx0XHRcdHJldHVybiBjcmVhdGVCdWlsZGVyKHRoaXMsIHN0eWxlciwgdGhpcy5faXNFbXB0eSk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fTtcbn1cblxuZm9yIChjb25zdCBtb2RlbCBvZiB1c2VkTW9kZWxzKSB7XG5cdGNvbnN0IGJnTW9kZWwgPSAnYmcnICsgbW9kZWxbMF0udG9VcHBlckNhc2UoKSArIG1vZGVsLnNsaWNlKDEpO1xuXHRzdHlsZXNbYmdNb2RlbF0gPSB7XG5cdFx0Z2V0KCkge1xuXHRcdFx0Y29uc3Qge2xldmVsfSA9IHRoaXM7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3VtZW50c18pIHtcblx0XHRcdFx0Y29uc3Qgc3R5bGVyID0gY3JlYXRlU3R5bGVyKGFuc2lTdHlsZXMuYmdDb2xvcltsZXZlbE1hcHBpbmdbbGV2ZWxdXVttb2RlbF0oLi4uYXJndW1lbnRzXyksIGFuc2lTdHlsZXMuYmdDb2xvci5jbG9zZSwgdGhpcy5fc3R5bGVyKTtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZUJ1aWxkZXIodGhpcywgc3R5bGVyLCB0aGlzLl9pc0VtcHR5KTtcblx0XHRcdH07XG5cdFx0fVxuXHR9O1xufVxuXG5jb25zdCBwcm90byA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCgpID0+IHt9LCB7XG5cdC4uLnN0eWxlcyxcblx0bGV2ZWw6IHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdGdldCgpIHtcblx0XHRcdHJldHVybiB0aGlzLl9nZW5lcmF0b3IubGV2ZWw7XG5cdFx0fSxcblx0XHRzZXQobGV2ZWwpIHtcblx0XHRcdHRoaXMuX2dlbmVyYXRvci5sZXZlbCA9IGxldmVsO1xuXHRcdH1cblx0fVxufSk7XG5cbmNvbnN0IGNyZWF0ZVN0eWxlciA9IChvcGVuLCBjbG9zZSwgcGFyZW50KSA9PiB7XG5cdGxldCBvcGVuQWxsO1xuXHRsZXQgY2xvc2VBbGw7XG5cdGlmIChwYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wZW5BbGwgPSBvcGVuO1xuXHRcdGNsb3NlQWxsID0gY2xvc2U7XG5cdH0gZWxzZSB7XG5cdFx0b3BlbkFsbCA9IHBhcmVudC5vcGVuQWxsICsgb3Blbjtcblx0XHRjbG9zZUFsbCA9IGNsb3NlICsgcGFyZW50LmNsb3NlQWxsO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRvcGVuLFxuXHRcdGNsb3NlLFxuXHRcdG9wZW5BbGwsXG5cdFx0Y2xvc2VBbGwsXG5cdFx0cGFyZW50XG5cdH07XG59O1xuXG5jb25zdCBjcmVhdGVCdWlsZGVyID0gKHNlbGYsIF9zdHlsZXIsIF9pc0VtcHR5KSA9PiB7XG5cdGNvbnN0IGJ1aWxkZXIgPSAoLi4uYXJndW1lbnRzXykgPT4ge1xuXHRcdGlmIChpc0FycmF5KGFyZ3VtZW50c19bMF0pICYmIGlzQXJyYXkoYXJndW1lbnRzX1swXS5yYXcpKSB7XG5cdFx0XHQvLyBDYWxsZWQgYXMgYSB0ZW1wbGF0ZSBsaXRlcmFsLCBmb3IgZXhhbXBsZTogY2hhbGsucmVkYDIgKyAzID0ge2JvbGQgJHsyKzN9fWBcblx0XHRcdHJldHVybiBhcHBseVN0eWxlKGJ1aWxkZXIsIGNoYWxrVGFnKGJ1aWxkZXIsIC4uLmFyZ3VtZW50c18pKTtcblx0XHR9XG5cblx0XHQvLyBTaW5nbGUgYXJndW1lbnQgaXMgaG90IHBhdGgsIGltcGxpY2l0IGNvZXJjaW9uIGlzIGZhc3RlciB0aGFuIGFueXRoaW5nXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWltcGxpY2l0LWNvZXJjaW9uXG5cdFx0cmV0dXJuIGFwcGx5U3R5bGUoYnVpbGRlciwgKGFyZ3VtZW50c18ubGVuZ3RoID09PSAxKSA/ICgnJyArIGFyZ3VtZW50c19bMF0pIDogYXJndW1lbnRzXy5qb2luKCcgJykpO1xuXHR9O1xuXG5cdC8vIFdlIGFsdGVyIHRoZSBwcm90b3R5cGUgYmVjYXVzZSB3ZSBtdXN0IHJldHVybiBhIGZ1bmN0aW9uLCBidXQgdGhlcmUgaXNcblx0Ly8gbm8gd2F5IHRvIGNyZWF0ZSBhIGZ1bmN0aW9uIHdpdGggYSBkaWZmZXJlbnQgcHJvdG90eXBlXG5cdE9iamVjdC5zZXRQcm90b3R5cGVPZihidWlsZGVyLCBwcm90byk7XG5cblx0YnVpbGRlci5fZ2VuZXJhdG9yID0gc2VsZjtcblx0YnVpbGRlci5fc3R5bGVyID0gX3N0eWxlcjtcblx0YnVpbGRlci5faXNFbXB0eSA9IF9pc0VtcHR5O1xuXG5cdHJldHVybiBidWlsZGVyO1xufTtcblxuY29uc3QgYXBwbHlTdHlsZSA9IChzZWxmLCBzdHJpbmcpID0+IHtcblx0aWYgKHNlbGYubGV2ZWwgPD0gMCB8fCAhc3RyaW5nKSB7XG5cdFx0cmV0dXJuIHNlbGYuX2lzRW1wdHkgPyAnJyA6IHN0cmluZztcblx0fVxuXG5cdGxldCBzdHlsZXIgPSBzZWxmLl9zdHlsZXI7XG5cblx0aWYgKHN0eWxlciA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIHN0cmluZztcblx0fVxuXG5cdGNvbnN0IHtvcGVuQWxsLCBjbG9zZUFsbH0gPSBzdHlsZXI7XG5cdGlmIChzdHJpbmcuaW5kZXhPZignXFx1MDAxQicpICE9PSAtMSkge1xuXHRcdHdoaWxlIChzdHlsZXIgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gUmVwbGFjZSBhbnkgaW5zdGFuY2VzIGFscmVhZHkgcHJlc2VudCB3aXRoIGEgcmUtb3BlbmluZyBjb2RlXG5cdFx0XHQvLyBvdGhlcndpc2Ugb25seSB0aGUgcGFydCBvZiB0aGUgc3RyaW5nIHVudGlsIHNhaWQgY2xvc2luZyBjb2RlXG5cdFx0XHQvLyB3aWxsIGJlIGNvbG9yZWQsIGFuZCB0aGUgcmVzdCB3aWxsIHNpbXBseSBiZSAncGxhaW4nLlxuXHRcdFx0c3RyaW5nID0gc3RyaW5nUmVwbGFjZUFsbChzdHJpbmcsIHN0eWxlci5jbG9zZSwgc3R5bGVyLm9wZW4pO1xuXG5cdFx0XHRzdHlsZXIgPSBzdHlsZXIucGFyZW50O1xuXHRcdH1cblx0fVxuXG5cdC8vIFdlIGNhbiBtb3ZlIGJvdGggbmV4dCBhY3Rpb25zIG91dCBvZiBsb29wLCBiZWNhdXNlIHJlbWFpbmluZyBhY3Rpb25zIGluIGxvb3Agd29uJ3QgaGF2ZVxuXHQvLyBhbnkvdmlzaWJsZSBlZmZlY3Qgb24gcGFydHMgd2UgYWRkIGhlcmUuIENsb3NlIHRoZSBzdHlsaW5nIGJlZm9yZSBhIGxpbmVicmVhayBhbmQgcmVvcGVuXG5cdC8vIGFmdGVyIG5leHQgbGluZSB0byBmaXggYSBibGVlZCBpc3N1ZSBvbiBtYWNPUzogaHR0cHM6Ly9naXRodWIuY29tL2NoYWxrL2NoYWxrL3B1bGwvOTJcblx0Y29uc3QgbGZJbmRleCA9IHN0cmluZy5pbmRleE9mKCdcXG4nKTtcblx0aWYgKGxmSW5kZXggIT09IC0xKSB7XG5cdFx0c3RyaW5nID0gc3RyaW5nRW5jYXNlQ1JMRldpdGhGaXJzdEluZGV4KHN0cmluZywgY2xvc2VBbGwsIG9wZW5BbGwsIGxmSW5kZXgpO1xuXHR9XG5cblx0cmV0dXJuIG9wZW5BbGwgKyBzdHJpbmcgKyBjbG9zZUFsbDtcbn07XG5cbmxldCB0ZW1wbGF0ZTtcbmNvbnN0IGNoYWxrVGFnID0gKGNoYWxrLCAuLi5zdHJpbmdzKSA9PiB7XG5cdGNvbnN0IFtmaXJzdFN0cmluZ10gPSBzdHJpbmdzO1xuXG5cdGlmICghaXNBcnJheShmaXJzdFN0cmluZykgfHwgIWlzQXJyYXkoZmlyc3RTdHJpbmcucmF3KSkge1xuXHRcdC8vIElmIGNoYWxrKCkgd2FzIGNhbGxlZCBieSBpdHNlbGYgb3Igd2l0aCBhIHN0cmluZyxcblx0XHQvLyByZXR1cm4gdGhlIHN0cmluZyBpdHNlbGYgYXMgYSBzdHJpbmcuXG5cdFx0cmV0dXJuIHN0cmluZ3Muam9pbignICcpO1xuXHR9XG5cblx0Y29uc3QgYXJndW1lbnRzXyA9IHN0cmluZ3Muc2xpY2UoMSk7XG5cdGNvbnN0IHBhcnRzID0gW2ZpcnN0U3RyaW5nLnJhd1swXV07XG5cblx0Zm9yIChsZXQgaSA9IDE7IGkgPCBmaXJzdFN0cmluZy5sZW5ndGg7IGkrKykge1xuXHRcdHBhcnRzLnB1c2goXG5cdFx0XHRTdHJpbmcoYXJndW1lbnRzX1tpIC0gMV0pLnJlcGxhY2UoL1t7fVxcXFxdL2csICdcXFxcJCYnKSxcblx0XHRcdFN0cmluZyhmaXJzdFN0cmluZy5yYXdbaV0pXG5cdFx0KTtcblx0fVxuXG5cdGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcycpO1xuXHR9XG5cblx0cmV0dXJuIHRlbXBsYXRlKGNoYWxrLCBwYXJ0cy5qb2luKCcnKSk7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhDaGFsay5wcm90b3R5cGUsIHN0eWxlcyk7XG5cbmNvbnN0IGNoYWxrID0gQ2hhbGsoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuZXctY2FwXG5jaGFsay5zdXBwb3J0c0NvbG9yID0gc3Rkb3V0Q29sb3I7XG5jaGFsay5zdGRlcnIgPSBDaGFsayh7bGV2ZWw6IHN0ZGVyckNvbG9yID8gc3RkZXJyQ29sb3IubGV2ZWwgOiAwfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbmV3LWNhcFxuY2hhbGsuc3RkZXJyLnN1cHBvcnRzQ29sb3IgPSBzdGRlcnJDb2xvcjtcblxubW9kdWxlLmV4cG9ydHMgPSBjaGFsaztcbiJdfQ==