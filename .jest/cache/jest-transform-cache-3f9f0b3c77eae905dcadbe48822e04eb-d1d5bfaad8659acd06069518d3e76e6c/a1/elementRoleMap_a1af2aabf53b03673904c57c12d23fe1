275e6c5e596287efead5b25386ca25d6
"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.default = void 0;

var _set = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/set"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime-corejs3/helpers/slicedToArray"));

var _entries = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/entries"));

var _find = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/find"));

var _stringify = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/json/stringify"));

var _concat = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/concat"));

var _keys = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/keys"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime-corejs3/helpers/toConsumableArray"));

var _forEach = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/for-each"));

var _map = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/map"));

var _rolesMap = _interopRequireDefault(require("./rolesMap"));

var _context;

var elementRoleMap = new _map.default([]);
(0, _forEach.default)(_context = (0, _toConsumableArray2.default)((0, _keys.default)(_rolesMap.default).call(_rolesMap.default))).call(_context, function (key) {
  var role = _rolesMap.default.get(key);

  if (role) {
    var _context2, _context3;

    (0, _forEach.default)(_context2 = (0, _concat.default)(_context3 = []).call(_context3, (0, _toConsumableArray2.default)(role.baseConcepts), (0, _toConsumableArray2.default)(role.relatedConcepts))).call(_context2, function (relation) {
      if (relation.module === 'HTML') {
        var concept = relation.concept;

        if (concept) {
          var _context4;

          var conceptStr = (0, _stringify.default)(concept);
          var roles = ((0, _find.default)(_context4 = (0, _toConsumableArray2.default)((0, _entries.default)(elementRoleMap).call(elementRoleMap))).call(_context4, function (_ref) {
            var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
                key = _ref2[0],
                value = _ref2[1];

            return (0, _stringify.default)(key) === conceptStr;
          }) || [])[1];

          if (!roles) {
            roles = new _set.default([]);
          }

          roles.add(key);
          elementRoleMap.set(concept, roles);
        }
      }
    });
  }
});
var _default = elementRoleMap;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVsZW1lbnRSb2xlTWFwLmpzIl0sIm5hbWVzIjpbIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX09iamVjdCRkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJfc2V0IiwiX3NsaWNlZFRvQXJyYXkyIiwiX2VudHJpZXMiLCJfZmluZCIsIl9zdHJpbmdpZnkiLCJfY29uY2F0IiwiX2tleXMiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwiX2ZvckVhY2giLCJfbWFwIiwiX3JvbGVzTWFwIiwiX2NvbnRleHQiLCJlbGVtZW50Um9sZU1hcCIsImNhbGwiLCJrZXkiLCJyb2xlIiwiZ2V0IiwiX2NvbnRleHQyIiwiX2NvbnRleHQzIiwiYmFzZUNvbmNlcHRzIiwicmVsYXRlZENvbmNlcHRzIiwicmVsYXRpb24iLCJtb2R1bGUiLCJjb25jZXB0IiwiX2NvbnRleHQ0IiwiY29uY2VwdFN0ciIsInJvbGVzIiwiX3JlZiIsIl9yZWYyIiwiYWRkIiwic2V0IiwiX2RlZmF1bHQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQUlBLHNCQUFzQixHQUFHQyxPQUFPLENBQUMsc0RBQUQsQ0FBcEM7O0FBRUEsSUFBSUMsc0JBQXNCLEdBQUdELE9BQU8sQ0FBQyw4REFBRCxDQUFwQzs7QUFFQUMsc0JBQXNCLENBQUNDLE9BQUQsRUFBVSxZQUFWLEVBQXdCO0FBQzVDQyxFQUFBQSxLQUFLLEVBQUU7QUFEcUMsQ0FBeEIsQ0FBdEI7O0FBSUFELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQixLQUFLLENBQXZCOztBQUVBLElBQUlDLElBQUksR0FBR04sc0JBQXNCLENBQUNDLE9BQU8sQ0FBQywyQ0FBRCxDQUFSLENBQWpDOztBQUVBLElBQUlNLGVBQWUsR0FBR1Asc0JBQXNCLENBQUNDLE9BQU8sQ0FBQyw4Q0FBRCxDQUFSLENBQTVDOztBQUVBLElBQUlPLFFBQVEsR0FBR1Isc0JBQXNCLENBQUNDLE9BQU8sQ0FBQyx3REFBRCxDQUFSLENB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LENBRGY7QUFBQSxnQkFFSTlCLEtBQUssR0FBRzhCLEtBQUssQ0FBQyxDQUFELENBRmpCOztBQUlBLG1CQUFPLENBQUMsR0FBR3hCLFVBQVUsQ0FBQ0wsT0FBZixFQUF3QmUsR0FBeEIsTUFBaUNXLFVBQXhDO0FBQ0QsV0FOWSxLQU1QLEVBTk0sRUFNRixDQU5FLENBQVo7O0FBUUEsY0FBSSxDQUFDQyxLQUFMLEVBQVk7QUFDVkEsWUFBQUEsS0FBSyxHQUFHLElBQUkxQixJQUFJLENBQUNELE9BQVQsQ0FBaUIsRUFBakIsQ0FBUjtBQUNEOztBQUVEMkIsVUFBQUEsS0FBSyxDQUFDRyxHQUFOLENBQVVmLEdBQVY7QUFDQUYsVUFBQUEsY0FBYyxDQUFDa0IsR0FBZixDQUFtQlAsT0FBbkIsRUFBNEJHLEtBQTVCO0FBQ0Q7QUFDRjtBQUNGLEtBeEJEO0FBeUJEO0FBQ0YsQ0FoQ0Q7QUFpQ0EsSUFBSUssUUFBUSxHQUFHbkIsY0FBZjtBQUNBZixPQUFPLENBQUNFLE9BQVIsR0FBa0JnQyxRQUFsQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG52YXIgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2NvcmUtanMtc3RhYmxlL29iamVjdC9kZWZpbmUtcHJvcGVydHlcIik7XG5cbl9PYmplY3QkZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfc2V0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9jb3JlLWpzLXN0YWJsZS9zZXRcIikpO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL3NsaWNlZFRvQXJyYXlcIikpO1xuXG52YXIgX2VudHJpZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2NvcmUtanMtc3RhYmxlL2luc3RhbmNlL2VudHJpZXNcIikpO1xuXG52YXIgX2ZpbmQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2NvcmUtanMtc3RhYmxlL2luc3RhbmNlL2ZpbmRcIikpO1xuXG52YXIgX3N0cmluZ2lmeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lLWNvcmVqczMvY29yZS1qcy1zdGFibGUvanNvbi9zdHJpbmdpZnlcIikpO1xuXG52YXIgX2NvbmNhdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lLWNvcmVqczMvY29yZS1qcy1zdGFibGUvaW5zdGFuY2UvY29uY2F0XCIpKTtcblxudmFyIF9rZXlzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9jb3JlLWpzLXN0YWJsZS9pbnN0YW5jZS9rZXlzXCIpKTtcblxudmFyIF90b0NvbnN1bWFibGVBcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXlcIikpO1xuXG52YXIgX2ZvckVhY2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2NvcmUtanMtc3RhYmxlL2luc3RhbmNlL2Zvci1lYWNoXCIpKTtcblxudmFyIF9tYXAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS1jb3JlanMzL2NvcmUtanMtc3RhYmxlL21hcFwiKSk7XG5cbnZhciBfcm9sZXNNYXAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JvbGVzTWFwXCIpKTtcblxudmFyIF9jb250ZXh0O1xuXG52YXIgZWxlbWVudFJvbGVNYXAgPSBuZXcgX21hcC5kZWZhdWx0KFtdKTtcbigwLCBfZm9yRWFjaC5kZWZhdWx0KShfY29udGV4dCA9ICgwLCBfdG9Db25zdW1hYmxlQXJyYXkyLmRlZmF1bHQpKCgwLCBfa2V5cy5kZWZhdWx0KShfcm9sZXNNYXAuZGVmYXVsdCkuY2FsbChfcm9sZXNNYXAuZGVmYXVsdCkpKS5jYWxsKF9jb250ZXh0LCBmdW5jdGlvbiAoa2V5KSB7XG4gIHZhciByb2xlID0gX3JvbGVzTWFwLmRlZmF1bHQuZ2V0KGtleSk7XG5cbiAgaWYgKHJvbGUpIHtcbiAgICB2YXIgX2NvbnRleHQyLCBfY29udGV4dDM7XG5cbiAgICAoMCwgX2ZvckVhY2guZGVmYXVsdCkoX2NvbnRleHQyID0gKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQzID0gW10pLmNhbGwoX2NvbnRleHQzLCAoMCwgX3RvQ29uc3VtYWJsZUFycmF5Mi5kZWZhdWx0KShyb2xlLmJhc2VDb25jZXB0cyksICgwLCBfdG9Db25zdW1hYmxlQXJyYXkyLmRlZmF1bHQpKHJvbGUucmVsYXRlZENvbmNlcHRzKSkpLmNhbGwoX2NvbnRleHQyLCBmdW5jdGlvbiAocmVsYXRpb24pIHtcbiAgICAgIGlmIChyZWxhdGlvbi5tb2R1bGUgPT09ICdIVE1MJykge1xuICAgICAgICB2YXIgY29uY2VwdCA9IHJlbGF0aW9uLmNvbmNlcHQ7XG5cbiAgICAgICAgaWYgKGNvbmNlcHQpIHtcbiAgICAgICAgICB2YXIgX2NvbnRleHQ0O1xuXG4gICAgICAgICAgdmFyIGNvbmNlcHRTdHIgPSAoMCwgX3N0cmluZ2lmeS5kZWZhdWx0KShjb25jZXB0KTtcbiAgICAgICAgICB2YXIgcm9sZXMgPSAoKDAsIF9maW5kLmRlZmF1bHQpKF9jb250ZXh0NCA9ICgwLCBfdG9Db25zdW1hYmxlQXJyYXkyLmRlZmF1bHQpKCgwLCBfZW50cmllcy5kZWZhdWx0KShlbGVtZW50Um9sZU1hcCkuY2FsbChlbGVtZW50Um9sZU1hcCkpKS5jYWxsKF9jb250ZXh0NCwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgICAgIHZhciBfcmVmMiA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3JlZiwgMiksXG4gICAgICAgICAgICAgICAga2V5ID0gX3JlZjJbMF0sXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTtcblxuICAgICAgICAgICAgcmV0dXJuICgwLCBfc3RyaW5naWZ5LmRlZmF1bHQpKGtleSkgPT09IGNvbmNlcHRTdHI7XG4gICAgICAgICAgfSkgfHwgW10pWzFdO1xuXG4gICAgICAgICAgaWYgKCFyb2xlcykge1xuICAgICAgICAgICAgcm9sZXMgPSBuZXcgX3NldC5kZWZhdWx0KFtdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByb2xlcy5hZGQoa2V5KTtcbiAgICAgICAgICBlbGVtZW50Um9sZU1hcC5zZXQoY29uY2VwdCwgcm9sZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xudmFyIF9kZWZhdWx0ID0gZWxlbWVudFJvbGVNYXA7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiXX0=