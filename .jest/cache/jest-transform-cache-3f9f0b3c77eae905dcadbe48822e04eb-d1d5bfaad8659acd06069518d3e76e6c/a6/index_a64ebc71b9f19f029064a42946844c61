14de892653c8b132628b133aa7f7f747
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;
var pkg = 'diff-sequences';
var NOT_YET_SET = 0;

var countCommonItemsF = function countCommonItemsF(aIndex, aEnd, bIndex, bEnd, isCommon) {
  var nCommon = 0;

  while (aIndex < aEnd && bIndex < bEnd && isCommon(aIndex, bIndex)) {
    aIndex += 1;
    bIndex += 1;
    nCommon += 1;
  }

  return nCommon;
};

var countCommonItemsR = function countCommonItemsR(aStart, aIndex, bStart, bIndex, isCommon) {
  var nCommon = 0;

  while (aStart <= aIndex && bStart <= bIndex && isCommon(aIndex, bIndex)) {
    aIndex -= 1;
    bIndex -= 1;
    nCommon += 1;
  }

  return nCommon;
};

var extendPathsF = function extendPathsF(d, aEnd, bEnd, bF, isCommon, aIndexesF, iMaxF) {
  var iF = 0;
  var kF = -d;
  var aFirst = aIndexesF[iF];
  var aIndexPrev1 = aFirst;
  aIndexesF[iF] += countCommonItemsF(aFirst + 1, aEnd, bF + aFirst - kF + 1, bEnd, isCommon);
  var nF = d < iMaxF ? d : iMaxF;

  for (iF += 1, kF += 2; iF <= nF; iF += 1, kF += 2) {
    if (iF !== d && aIndexPrev1 < aIndexesF[iF]) {
      aFirst = aIndexesF[iF];
    } else {
      aFirst = aIndexPrev1 + 1;

      if (aEnd <= aFirst) {
        return iF - 1;
      }
    }

    aIndexPrev1 = aIndexesF[iF];
    aIndexesF[iF] = aFirst + countCommonItemsF(aFirst + 1, aEnd, bF + aFirst - kF + 1, bEnd, isCommon);
  }

  return iMaxF;
};

var extendPathsR = function extendPathsR(d, aStart, bStart, bR, isCommon, aIndexesR, iMaxR) {
  var iR = 0;
  var kR = d;
  var aFirst = aIndexesR[iR];
  var aIndexPrev1 = aFirst;
  aIndexesR[iR] -= countCommonItemsR(aStart, aFirst - 1, bStart, bR + aFirst - kR - 1, isCommon);
  var nR = d < iMaxR ? d : iMaxR;

  for (iR += 1, kR -= 2; iR <= nR; iR += 1, kR -= 2) {
    if (iR !== d && aIndexesR[iR] < aIndexPrev1) {
      aFirst = aIndexesR[iR];
    } else {
      aFirst = aIndexPrev1 - 1;

      if (aFirst < aStart) {
        return iR - 1;
      }
    }

    aIndexPrev1 = aIndexesR[iR];
    aIndexesR[iR] = aFirst - countCommonItemsR(aStart, aFirst - 1, bStart, bR + aFirst - kR - 1, isCommon);
  }

  return iMaxR;
};

var extendOverlappablePathsF = function extendOverlappablePathsF(d, aStart, aEnd, bStart, bEnd, isCommon, aIndexesF, iMaxF, aIndexesR, iMaxR, division) {
  var bF = bStart - aStart;
  var aLength = aEnd - aStart;
  var bLength = bEnd - bStart;
  var baDeltaLength = bLength - aLength;
  var kMinOverlapF = -baDeltaLength - (d - 1);
  var kMaxOverlapF = -baDeltaLength + (d - 1);
  var aIndexPrev1 = NOT_YET_SET;
  var nF = d < iMaxF ? d : iMaxF;

  for (var iF = 0, kF = -d; iF <= nF; iF += 1, kF += 2) {
    var insert = iF === 0 || iF !== d && aIndexPrev1 < aIndexesF[iF];
    var aLastPrev = insert ? aIndexesF[iF] : aIndexPrev1;
    var aFirst = insert ? aLastPrev : aLastPrev + 1;
    var bFirst = bF + aFirst - kF;
    var nCommonF = countCommonItemsF(aFirst + 1, aEnd, bFirst + 1, bEnd, isCommon);
    var aLast = aFirst + nCommonF;
    aIndexPrev1 = aIndexesF[iF];
    aIndexesF[iF] = aLast;

    if (kMinOverlapF <= kF && kF <= kMaxOverlapF) {
      var iR = (d - 1 - (kF + baDeltaLength)) / 2;

      if (iR <= iMaxR && aIndexesR[iR] - 1 <= aLast) {
        var bLastPrev = bF + aLastPrev - (insert ? kF + 1 : kF - 1);
        var nCommonR = countCommonItemsR(aStart, aLastPrev, bStart, bLastPrev, isCommon);
        var aIndexPrevFirst = aLastPrev - nCommonR;
        var bIndexPrevFirst = bLastPrev - nCommonR;
        var aEndPreceding = aIndexPrevFirst + 1;
        var bEndPreceding = bIndexPrevFirst + 1;
        division.nChangePreceding = d - 1;

        if (d - 1 === aEndPreceding + bEndPreceding - aStart - bStart) {
          division.aEndPreceding = aStart;
          division.bEndPreceding = bStart;
        } else {
          division.aEndPreceding = aEndPreceding;
          division.bEndPreceding = bEndPreceding;
        }

        division.nCommonPreceding = nCommonR;

        if (nCommonR !== 0) {
          division.aCommonPreceding = aEndPreceding;
          division.bCommonPreceding = bEndPreceding;
        }

        division.nCommonFollowing = nCommonF;

        if (nCommonF !== 0) {
          division.aCommonFollowing = aFirst + 1;
          division.bCommonFollowing = bFirst + 1;
        }

        var aStartFollowing = aLast + 1;
        var bStartFollowing = bFirst + nCommonF + 1;
        division.nChangeFollowing = d - 1;

        if (d - 1 === aEnd + bEnd - aStartFollowing - bStartFollowing) {
          division.aStartFollowing = aEnd;
          division.bStartFollowing = bEnd;
        } else {
          division.aStartFollowing = aStartFollowing;
          division.bStartFollowing = bStartFollowing;
        }

        return true;
      }
    }
  }

  return false;
};

var extendOverlappablePathsR = function extendOverlappablePathsR(d, aStart, aEnd, bStart, bEnd, isCommon, aIndexesF, iMaxF, aIndexesR, iMaxR, division) {
  var bR = bEnd - aEnd;
  var aLength = aEnd - aStart;
  var bLength = bEnd - bStart;
  var baDeltaLength = bLength - aLength;
  var kMinOverlapR = baDeltaLength - d;
  var kMaxOverlapR = baDeltaLength + d;
  var aIndexPrev1 = NOT_YET_SET;
  var nR = d < iMaxR ? d : iMaxR;

  for (var iR = 0, kR = d; iR <= nR; iR += 1, kR -= 2) {
    var insert = iR === 0 || iR !== d && aIndexesR[iR] < aIndexPrev1;
    var aLastPrev = insert ? aIndexesR[iR] : aIndexPrev1;
    var aFirst = insert ? aLastPrev : aLastPrev - 1;
    var bFirst = bR + aFirst - kR;
    var nCommonR = countCommonItemsR(aStart, aFirst - 1, bStart, bFirst - 1, isCommon);
    var aLast = aFirst - nCommonR;
    aIndexPrev1 = aIndexesR[iR];
    aIndexesR[iR] = aLast;

    if (kMinOverlapR <= kR && kR <= kMaxOverlapR) {
      var iF = (d + (kR - baDeltaLength)) / 2;

      if (iF <= iMaxF && aLast - 1 <= aIndexesF[iF]) {
        var bLast = bFirst - nCommonR;
        division.nChangePreceding = d;

        if (d === aLast + bLast - aStart - bStart) {
          division.aEndPreceding = aStart;
          division.bEndPreceding = bStart;
        } else {
          division.aEndPreceding = aLast;
          division.bEndPreceding = bLast;
        }

        division.nCommonPreceding = nCommonR;

        if (nCommonR !== 0) {
          division.aCommonPreceding = aLast;
          division.bCommonPreceding = bLast;
        }

        division.nChangeFollowing = d - 1;

        if (d === 1) {
          division.nCommonFollowing = 0;
          division.aStartFollowing = aEnd;
          division.bStartFollowing = bEnd;
        } else {
          var bLastPrev = bR + aLastPrev - (insert ? kR - 1 : kR + 1);
          var nCommonF = countCommonItemsF(aLastPrev, aEnd, bLastPrev, bEnd, isCommon);
          division.nCommonFollowing = nCommonF;

          if (nCommonF !== 0) {
            division.aCommonFollowing = aLastPrev;
            division.bCommonFollowing = bLastPrev;
          }

          var aStartFollowing = aLastPrev + nCommonF;
          var bStartFollowing = bLastPrev + nCommonF;

          if (d - 1 === aEnd + bEnd - aStartFollowing - bStartFollowing) {
            division.aStartFollowing = aEnd;
            division.bStartFollowing = bEnd;
          } else {
            division.aStartFollowing = aStartFollowing;
            division.bStartFollowing = bStartFollowing;
          }
        }

        return true;
      }
    }
  }

  return false;
};

var divide = function divide(nChange, aStart, aEnd, bStart, bEnd, isCommon, aIndexesF, aIndexesR, division) {
  var bF = bStart - aStart;
  var bR = bEnd - aEnd;
  var aLength = aEnd - aStart;
  var bLength = bEnd - bStart;
  var baDeltaLength = bLength - aLength;
  var iMaxF = aLength;
  var iMaxR = aLength;
  aIndexesF[0] = aStart - 1;
  aIndexesR[0] = aEnd;

  if (baDeltaLength % 2 === 0) {
    var dMin = (nChange || baDeltaLength) / 2;
    var dMax = (aLength + bLength) / 2;

    for (var d = 1; d <= dMax; d += 1) {
      iMaxF = extendPathsF(d, aEnd, bEnd, bF, isCommon, aIndexesF, iMaxF);

      if (d < dMin) {
        iMaxR = extendPathsR(d, aStart, bStart, bR, isCommon, aIndexesR, iMaxR);
      } else if (extendOverlappablePathsR(d, aStart, aEnd, bStart, bEnd, isCommon, aIndexesF, iMaxF, aIndexesR, iMaxR, division)) {
        return;
      }
    }
  } else {
    var _dMin = ((nChange || baDeltaLength) + 1) / 2;

    var _dMax = (aLength + bLength + 1) / 2;

    var _d = 1;
    iMaxF = extendPathsF(_d, aEnd, bEnd, bF, isCommon, aIndexesF, iMaxF);

    for (_d += 1; _d <= _dMax; _d += 1) {
      iMaxR = extendPathsR(_d - 1, aStart, bStart, bR, isCommon, aIndexesR, iMaxR);

      if (_d < _dMin) {
        iMaxF = extendPathsF(_d, aEnd, bEnd, bF, isCommon, aIndexesF, iMaxF);
      } else if (extendOverlappablePathsF(_d, aStart, aEnd, bStart, bEnd, isCommon, aIndexesF, iMaxF, aIndexesR, iMaxR, division)) {
        return;
      }
    }
  }

  throw new Error(pkg + ": no overlap aStart=" + aStart + " aEnd=" + aEnd + " bStart=" + bStart + " bEnd=" + bEnd);
};

var findSubsequences = function findSubsequences(nChange, aStart, aEnd, bStart, bEnd, transposed, callbacks, aIndexesF, aIndexesR, division) {
  if (bEnd - bStart < aEnd - aStart) {
    transposed = !transposed;

    if (transposed && callbacks.length === 1) {
      var _callbacks$ = callbacks[0],
          _foundSubsequence2 = _callbacks$.foundSubsequence,
          _isCommon2 = _callbacks$.isCommon;
      callbacks[1] = {
        foundSubsequence: function (_foundSubsequence) {
          function foundSubsequence(_x, _x2, _x3) {
            return _foundSubsequence.apply(this, arguments);
          }

          foundSubsequence.toString = function () {
            return _foundSubsequence.toString();
          };

          return foundSubsequence;
        }(function (nCommon, bCommon, aCommon) {
          _foundSubsequence2(nCommon, aCommon, bCommon);
        }),
        isCommon: function (_isCommon) {
          function isCommon(_x4, _x5) {
            return _isCommon.apply(this, arguments);
          }

          isCommon.toString = function () {
            return _isCommon.toString();
          };

          return isCommon;
        }(function (bIndex, aIndex) {
          return _isCommon2(aIndex, bIndex);
        })
      };
    }

    var tStart = aStart;
    var tEnd = aEnd;
    aStart = bStart;
    aEnd = bEnd;
    bStart = tStart;
    bEnd = tEnd;
  }

  var _callbacks = callbacks[transposed ? 1 : 0],
      foundSubsequence = _callbacks.foundSubsequence,
      isCommon = _callbacks.isCommon;
  divide(nChange, aStart, aEnd, bStart, bEnd, isCommon, aIndexesF, aIndexesR, division);
  var nChangePreceding = division.nChangePreceding,
      aEndPreceding = division.aEndPreceding,
      bEndPreceding = division.bEndPreceding,
      nCommonPreceding = division.nCommonPreceding,
      aCommonPreceding = division.aCommonPreceding,
      bCommonPreceding = division.bCommonPreceding,
      nCommonFollowing = division.nCommonFollowing,
      aCommonFollowing = division.aCommonFollowing,
      bCommonFollowing = division.bCommonFollowing,
      nChangeFollowing = division.nChangeFollowing,
      aStartFollowing = division.aStartFollowing,
      bStartFollowing = division.bStartFollowing;

  if (aStart < aEndPreceding && bStart < bEndPreceding) {
    findSubsequences(nChangePreceding, aStart, aEndPreceding, bStart, bEndPreceding, transposed, callbacks, aIndexesF, aIndexesR, division);
  }

  if (nCommonPreceding !== 0) {
    foundSubsequence(nCommonPreceding, aCommonPreceding, bCommonPreceding);
  }

  if (nCommonFollowing !== 0) {
    foundSubsequence(nCommonFollowing, aCommonFollowing, bCommonFollowing);
  }

  if (aStartFollowing < aEnd && bStartFollowing < bEnd) {
    findSubsequences(nChangeFollowing, aStartFollowing, aEnd, bStartFollowing, bEnd, transposed, callbacks, aIndexesF, aIndexesR, division);
  }
};

var validateLength = function validateLength(name, arg) {
  var type = typeof arg;

  if (type !== 'number') {
    throw new TypeError(pkg + ": " + name + " typeof " + type + " is not a number");
  }

  if (!Number.isSafeInteger(arg)) {
    throw new RangeError(pkg + ": " + name + " value " + arg + " is not a safe integer");
  }

  if (arg < 0) {
    throw new RangeError(pkg + ": " + name + " value " + arg + " is a negative integer");
  }
};

var validateCallback = function validateCallback(name, arg) {
  var type = typeof arg;

  if (type !== 'function') {
    throw new TypeError(pkg + ": " + name + " typeof " + type + " is not a function");
  }
};

var _default = function _default(aLength, bLength, isCommon, foundSubsequence) {
  validateLength('aLength', aLength);
  validateLength('bLength', bLength);
  validateCallback('isCommon', isCommon);
  validateCallback('foundSubsequence', foundSubsequence);
  var nCommonF = countCommonItemsF(0, aLength, 0, bLength, isCommon);

  if (nCommonF !== 0) {
    foundSubsequence(nCommonF, 0, 0);
  }

  if (aLength !== nCommonF || bLength !== nCommonF) {
    var aStart = nCommonF;
    var bStart = nCommonF;
    var nCommonR = countCommonItemsR(aStart, aLength - 1, bStart, bLength - 1, isCommon);
    var aEnd = aLength - nCommonR;
    var bEnd = bLength - nCommonR;
    var nCommonFR = nCommonF + nCommonR;

    if (aLength !== nCommonFR && bLength !== nCommonFR) {
      var nChange = 0;
      var transposed = false;
      var callbacks = [{
        foundSubsequence: foundSubsequence,
        isCommon: isCommon
      }];
      var aIndexesF = [NOT_YET_SET];
      var aIndexesR = [NOT_YET_SET];
      var division = {
        aCommonFollowing: NOT_YET_SET,
        aCommonPreceding: NOT_YET_SET,
        aEndPreceding: NOT_YET_SET,
        aStartFollowing: NOT_YET_SET,
        bCommonFollowing: NOT_YET_SET,
        bCommonPreceding: NOT_YET_SET,
        bEndPreceding: NOT_YET_SET,
        bStartFollowing: NOT_YET_SET,
        nChangeFollowing: NOT_YET_SET,
        nChangePreceding: NOT_YET_SET,
        nCommonFollowing: NOT_YET_SET,
        nCommonPreceding: NOT_YET_SET
      };
      findSubsequences(nChange, aStart, aEnd, bStart, bEnd, transposed, callbacks, aIndexesF, aIndexesR, division);
    }

    if (nCommonR !== 0) {
      foundSubsequence(nCommonR, aEnd, bEnd);
    }
  }
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInBrZyIsIk5PVF9ZRVRfU0VUIiwiY291bnRDb21tb25JdGVtc0YiLCJhSW5kZXgiLCJhRW5kIiwiYkluZGV4IiwiYkVuZCIsImlzQ29tbW9uIiwibkNvbW1vbiIsImNvdW50Q29tbW9uSXRlbXNSIiwiYVN0YXJ0IiwiYlN0YXJ0IiwiZXh0ZW5kUGF0aHNGIiwiZCIsImJGIiwiYUluZGV4ZXNGIiwiaU1heEYiLCJpRiIsImtGIiwiYUZpcnN0IiwiYUluZGV4UHJldjEiLCJuRiIsImV4dGVuZFBhdGhzUiIsImJSIiwiYUluZGV4ZXNSIiwiaU1heFIiLCJpUiIsImtSIiwiblIiLCJleHRlbmRPdmVybGFwcGFibGVQYXRoc0YiLCJkaXZpc2lvbiIsImFMZW5ndGgiLCJiTGVuZ3RoIiwiYmFEZWx0YUxlbmd0aCIsImtNaW5PdmVybGFwRiIsImtNYXhPdmVybGFwRiIsImluc2VydCIsImFMYXN0UHJldiIsImJGaXJzdCIsIm5Db21tb25GIiwiYUxhc3QiLCJiTGFzdFByZXYiLCJuQ29tbW9uUiIsImFJbmRleFByZXZGaXJzdCIsImJJbmRleFByZXZGaXJzdCIsImFFbmRQcmVjZWRpbmciLCJiRW5kUHJlY2VkaW5nIiwibkNoYW5nZVByZWNlZGluZyIsIm5Db21tb25QcmVjZWRpbmciLCJhQ29tbW9uUHJlY2VkaW5nIiwiYkNvbW1vblByZWNlZGluZyIsIm5Db21tb25Gb2xsb3dpbmciLCJhQ29tbW9uRm9sbG93aW5nIiwiYkNvbW1vbkZvbGxvd2luZyIsImFTdGFydEZvbGxvd2luZyIsImJTdGFydEZvbGxvd2luZyIsIm5DaGFuZ2VGb2xsb3dpbmciLCJleHRlbmRPdmVybGFwcGFibGVQYXRoc1IiLCJrTWluT3ZlcmxhcFIiLCJrTWF4T3ZlcmxhcFIiLCJiTGFzdCIsImRpdmlkZSIsIm5DaGFuZ2UiLCJkTWluIiwiZE1heCIsIkVycm9yIiwiZmluZFN1YnNlcXVlbmNlcyIsInRyYW5zcG9zZWQiLCJjYWxsYmFja3MiLCJsZW5ndGgiLCJfY2FsbGJhY2tzJCIsImZvdW5kU3Vic2VxdWVuY2UiLCJfZm91bmRTdWJzZXF1ZW5jZSIsIl94IiwiX3gyIiwiX3gzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ0b1N0cmluZyIsImJDb21tb24iLCJhQ29tbW9uIiwiX2lzQ29tbW9uIiwiX3g0IiwiX3g1IiwidFN0YXJ0IiwidEVuZCIsIl9jYWxsYmFja3MiLCJ2YWxpZGF0ZUxlbmd0aCIsIm5hbWUiLCJhcmciLCJ0eXBlIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiaXNTYWZlSW50ZWdlciIsIlJhbmdlRXJyb3IiLCJ2YWxpZGF0ZUNhbGxiYWNrIiwiX2RlZmF1bHQiLCJuQ29tbW9uRlIiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQzNDQyxFQUFBQSxLQUFLLEVBQUU7QUFEb0MsQ0FBN0M7QUFHQUQsT0FBTyxDQUFDRSxPQUFSLEdBQWtCLEtBQUssQ0FBdkI7QUE2REEsSUFBTUMsR0FBRyxHQUFHLGdCQUFaO0FBRUEsSUFBTUMsV0FBVyxHQUFHLENBQXBCOztBQUlBLElBQU1DLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBb0IsQ0FBQ0MsTUFBRCxFQUFTQyxJQUFULEVBQWVDLE1BQWYsRUFBdUJDLElBQXZCLEVBQTZCQyxRQUE3QixFQUEwQztBQUNsRSxNQUFJQyxPQUFPLEdBQUcsQ0FBZDs7QUFFQSxTQUFPTCxNQUFNLEdBQUdDLElBQVQsSUFBaUJDLE1BQU0sR0FBR0MsSUFBMUIsSUFBa0NDLFFBQVEsQ0FBQ0osTUFBRCxFQUFTRSxNQUFULENBQWpELEVBQW1FO0FBQ2pFRixJQUFBQSxNQUFNLElBQUksQ0FBVjtBQUNBRSxJQUFBQSxNQUFNLElBQUksQ0FBVjtBQUNBRyxJQUFBQSxPQUFPLElBQUksQ0FBWDtBQUNEOztBQUVELFNBQU9BLE9BQVA7QUFDRCxDQVZEOztBQWFBLElBQU1DLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBb0IsQ0FBQ0MsTUFBRCxFQUFTUCxNQUFULEVBQWlCUSxNQUFqQixFQUF5Qk4sTUFBekIsRUFBaUNFLFFBQWpDLEVBQThDO0FBQ3RFLE1BQUlDLE9BQU8sR0FBRyxDQUFkOztBQUVBLFNBQU9FLE1BQU0sSUFBSVAsTUFBVixJQUFvQlEsTUFBTSxJQUFJTixNQUE5QixJQUF3Q0UsUUFBUSxDQUFDSixNQUFELEVBQVNFLE1BQVQsQ0FBdkQsRUFBeUU7QUFDdkVGLElBQUFBLE1BQU0sSUFBSSxDQUFWO0FBQ0FFLElBQUFBLE1BQU0sSUFBSSxDQUFWO0FBQ0FHLElBQUFBLE9BQU8sSUFBSSxDQUFYO0FBQ0Q7O0FBRUQsU0FBT0EsT0FBUDtBQUNELENBVkQ7O0FBYUEsSUFBTUksWUFBWSxHQUFHLFNBQWZBLFlBQWUsQ0FBQ0MsQ0FBRCxFQUFJVCxJQUFKLEVBQVVFLElBQVYsRUFBZ0JRLEVBQWhCLEVBQW9CUCxRQUFwQixFQUE4QlEsU0FBOUIsRUFBeUNDLEtBQXpDLEVBQW1EO0FBRXRFLE1BQUlDLEVBQUUsR0FBRyxDQUFUO0FBQ0EsTUFBSUMsRUFBRSxHQUFHLENBQUNMLENBQVY7QUFFQSxNQUFJTSxNQUFNLEdBQUdKLFNBQVMsQ0FBQ0UsRUFBRCxDQUF0QjtBQUVBLE1BQUlHLFdBQVcsR0FBR0QsTUFBbEI7QUFFQUosRUFBQUEsU0FBUyxDQUFDRSxFQUFELENBQVQsSUFBaUJmLGlCQUFpQixDQUNoQ2lCLE1BQU0sR0FBRyxDQUR1QixFQUVoQ2YsSUFGZ0MsRUFHaENVLEVBQUUsR0FBR0ssTUFBTCxHQUFjRCxFQUFkLEdBQW1CLENBSGEsRUFJaENaLElBSmdDLEVBS2hDQyxRQUxnQyxDQUFsQztBQVFBLE1BQU1jLEVBQUUsR0FBR1IsQ0FBQyxHQUFHRyxLQUFKLEdBQVlILENBQVosR0FBZ0JHLEtBQTNCOztBQUVBLE9BQUtDLEVBQUUsSUFBSSxDQUFOLEVBQVNDLEVBQUUsSUFBSSxDQUFwQixFQUF1QkQsRUFBRSxJQUFJSSxFQUE3QixFQUFpQ0osRUFBRSxJQUFJLENBQU4sRUFBU0MsRUFBRSxJQUFJLENBQWhELEVBQW1EO0FBSWpELFFBQUlELEVBQUUsS0FBS0osQ0FBUCxJQUFZTyxXQUFXLEdBQUdMLFNBQVMsQ0FBQ0UsRUFBRCxDQUF2QyxFQUE2QztBQUMzQ0UsTUFBQUEsTUFBTSxHQUFHSixTQUFTLENBQUNFLEVBQUQsQ0FBbEI7QUFDRCxLQUZELE1BRU87QUFDTEUsTUFBQUEsTUFBTSxHQUFHQyxXQUFXLEdBQUcsQ0FBdkI7O0FBRUEsVUFBSWhCLElBQUksSUFBSWUsTUFBWixFQUFvQjtBQUVsQixlQUFPRixFQUFFLEdBQUcsQ0FBWjtBQUNEO0FBQ0Y7O0FBRURHLElBQUFBLFdBQVcsR0FBR0wsU0FBUyxDQUFDRSxFQUFELENBQXZCO0FBQ0FGLElBQUFBLFNBQVMsQ0FBQ0UsRUFBRCxDQUFULEdBQ0VFLE1BQU0sR0FDTmpCLGlCQUFpQixDQUFDaUIsTUFBTSxHQUFHLENBQVYsRUFBYWYsSUFBYixFQUFtQlUsRUFBRSxHQUFHSyxNQUFMLEdBQWNELEVBQWQsR0FBbUIsQ0FBdEMsRUFBeUNaLElBQXpDLEVBQStDQyxRQUEvQyxDQUZuQjtBQUdEOztBQUVELFNBQU9TLEtBQVA7QUFDRCxDQXpDRDs7QUE0Q0EsSUFBTU0sWUFBWSxHQUFHLFNBQWZBLFlBQWUsQ0FBQ1QsQ0FBRCxFQUFJSCxNQUFKLEVBQVlDLE1BQVosRUFBb0JZLEVBQXBCLEVBQXdCaEIsUUFBeEIsRUFBa0NpQixTQUFsQyxFQUE2Q0MsS0FBN0MsRUFBdUQ7QUFFMUUsTUFBSUMsRUFBRSxHQUFHLENBQVQ7QUFDQSxNQUFJQyxFQUFFLEdBQUdkLENBQVQ7QUFFQSxNQUFJTSxNQUFNLEdBQUdLLFNBQVMsQ0FBQ0UsRUFBRCxDQUF0QjtBQUVBLE1BQUlOLFdBQVcsR0FBR0QsTUFBbEI7QUFFQUssRUFBQUEsU0FBUyxDQUFDRSxFQUFELENBQVQsSUFBaUJqQixpQkFBaUIsQ0FDaENDLE1BRGdDLEVBRWhDUyxNQUFNLEdBQUcsQ0FGdUIsRUFHaENSLE1BSGdDLEVBSWhDWSxFQUFFLEdBQUdKLE1BQUwsR0FBY1EsRUFBZCxHQUFtQixDQUphLEVBS2hDcEIsUUFMZ0MsQ0FBbEM7QUFRQSxNQUFNcUIsRUFBRSxHQUFHZixDQUFDLEdBQUdZLEtBQUosR0FBWVosQ0FBWixHQUFnQlksS0FBM0I7O0FBRUEsT0FBS0MsRUFBRSxJQUFJLENBQU4sRUFBU0MsRUFBRSxJQUFJLENBQXBCLEVBQXVCRCxFQUFFLElBQUlFLEVBQTdCLEVBQWlDRixFQUFFLElBQUksQ0FBTixFQUFTQyxFQUFFLElBQUksQ0FBaEQsRUFBbUQ7QUFJakQsUUFBSUQsRUFBRSxLQUFLYixDQUFQLElBQVlXLFNBQVMsQ0FBQ0UsRUFBRCxDQUFULEdBQWdCTixXQUFoQyxFQUE2QztBQUMzQ0QsTUFBQUEsTUFBTSxHQUFHSyxTQUFTLENBQUNFLEVBQUQsQ0FBbEI7QUFDRCxLQUZELE1BRU87QUFDTFAsTUFBQUEsTUFBTSxHQUFHQyxXQUFXLEdBQUcsQ0FBdkI7O0FBRUEsVUFBSUQsTUFBTSxHQUFHVCxNQUFiLEVBQXFCO0FBRW5CLGVBQU9nQixFQUFFLEdBQUcsQ0FBWjtBQUNEO0FBQ0Y7O0FBRUROLElBQUFBLFdBQVcsR0FBR0ksU0FBUyxDQUFDRSxFQUFELENBQXZCO0FBQ0FGLElBQUFBLFNBQVMsQ0FBQ0UsRUFBRCxDQUFULEdBQ0VQLE1BQU0sR0FDTlYsaUJBQWlCLENBQ2ZDLE1BRGUsRUFFZlMsTUFBTSxHQUFHLENBRk0sRUFHZlIsTUFIZSxFQUlmWSxFQUFFLEdBQUdKLE1BQUwsR0FBY1EsRUFBZCxHQUFtQixDQUpKLEVBS2ZwQixRQUxlLENBRm5CO0FBU0Q7O0FBRUQsU0FBT2tCLEtBQVA7QUFDRCxDQS9DRDs7QUFrREEsSUFBTUksd0JBQXdCLEdBQUcsU0FBM0JBLHdCQUEyQixDQUMvQmhCLENBRCtCLEVBRS9CSCxNQUYrQixFQUcvQk4sSUFIK0IsRUFJL0JPLE1BSitCLEVBSy9CTCxJQUwrQixFQU0vQkMsUUFOK0IsRUFPL0JRLFNBUCtCLEVBUS9CQyxLQVIrQixFQVMvQlEsU0FUK0IsRUFVL0JDLEtBVitCLEVBVy9CSyxRQVgrQixFQVk1QjtBQUNILE1BQU1oQixFQUFFLEdBQUdILE1BQU0sR0FBR0QsTUFBcEI7QUFFQSxNQUFNcUIsT0FBTyxHQUFHM0IsSUFBSSxHQUFHTSxNQUF2QjtBQUNBLE1BQU1zQixPQUFPLEdBQUcxQixJQUFJLEdBQUdLLE1BQXZCO0FBQ0EsTUFBTXNCLGFBQWEsR0FBR0QsT0FBTyxHQUFHRCxPQUFoQztBQUdBLE1BQU1HLFlBQVksR0FBRyxDQUFDRCxhQUFELElBQWtCcEIsQ0FBQyxHQUFHLENBQXRCLENBQXJCO0FBRUEsTUFBTXNCLFlBQVksR0FBRyxDQUFDRixhQUFELElBQWtCcEIsQ0FBQyxHQUFHLENBQXRCLENBQXJCO0FBRUEsTUFBSU8sV0FBVyxHQUFHbkIsV0FBbEI7QUFHQSxNQUFNb0IsRUFBRSxHQUFHUixDQUFDLEdBQUdHLEtBQUosR0FBWUgsQ0FBWixHQUFnQkcsS0FBM0I7O0FBRUEsT0FBSyxJQUFJQyxFQUFFLEdBQUcsQ0FBVCxFQUFZQyxFQUFFLEdBQUcsQ0FBQ0wsQ0FBdkIsRUFBMEJJLEVBQUUsSUFBSUksRUFBaEMsRUFBb0NKLEVBQUUsSUFBSSxDQUFOLEVBQVNDLEVBQUUsSUFBSSxDQUFuRCxFQUFzRDtBQUtwRCxRQUFNa0IsTUFBTSxHQUFHbkIsRUFBRSxLQUFLLENBQVAsSUFBYUEsRUFBRSxLQUFLSixDQUFQLElBQVlPLFdBQVcsR0FBR0wsU0FBUyxDQUFDRSxFQUFELENBQS9EO0FBQ0EsUUFBTW9CLFNBQVMsR0FBR0QsTUFBTSxHQUFHckIsU0FBUyxDQUFDRSxFQUFELENBQVosR0FBbUJHLFdBQTNDO0FBQ0EsUUFBTUQsTUFBTSxHQUFHaUIsTUFBTSxHQUNqQkMsU0FEaUIsR0FFakJBLFNBQVMsR0FBRyxDQUZoQjtBQUtBLFFBQU1DLE1BQU0sR0FBR3hCLEVBQUUsR0FBR0ssTUFBTCxHQUFjRCxFQUE3QjtBQUNBLFFBQU1xQixRQUFRLEdBQUdyQyxpQkFBaUIsQ0FDaENpQixNQUFNLEdBQUcsQ0FEdUIsRUFFaENmLElBRmdDLEVBR2hDa0MsTUFBTSxHQUFHLENBSHVCLEVBSWhDaEMsSUFKZ0MsRUFLaENDLFFBTGdDLENBQWxDO0FBT0EsUUFBTWlDLEtBQUssR0FBR3JCLE1BQU0sR0FBR29CLFFBQXZCO0FBQ0FuQixJQUFBQSxXQUFXLEdBQUdMLFNBQVMsQ0FBQ0UsRUFBRCxDQUF2QjtBQUNBRixJQUFBQSxTQUFTLENBQUNFLEVBQUQsQ0FBVCxHQUFnQnVCLEtBQWhCOztBQUVBLFFBQUlOLFlBQVksSUFBSWhCLEVBQWhCLElBQXNCQSxFQUFFLElBQUlpQixZQUFoQyxFQUE4QztBQUk1QyxVQUFNVCxFQUFFLEdBQUcsQ0FBQ2IsQ0FBQyxHQUFHLENBQUosSUFBU0ssRUFBRSxHQUFHZSxhQUFkLENBQUQsSUFBaUMsQ0FBNUM7O0FBR0EsVUFBSVAsRUFBRSxJQUFJRCxLQUFOLElBQWVELFNBQVMsQ0FBQ0UsRUFBRCxDQUFULEdBQWdCLENBQWhCLElBQXFCYyxLQUF4QyxFQUErQztBQUk3QyxZQUFNQyxTQUFTLEdBQUczQixFQUFFLEdBQUd1QixTQUFMLElBQWtCRCxNQUFNLEdBQUdsQixFQUFFLEdBQUcsQ0FBUixHQUFZQSxFQUFFLEdBQUcsQ0FBekMsQ0FBbEI7QUFJQSxZQUFNd0IsUUFBUSxHQUFHakMsaUJBQWlCLENBQ2hDQyxNQURnQyxFQUVoQzJCLFNBRmdDLEVBR2hDMUIsTUFIZ0MsRUFJaEM4QixTQUpnQyxFQUtoQ2xDLFFBTGdDLENBQWxDO0FBT0EsWUFBTW9DLGVBQWUsR0FBR04sU0FBUyxHQUFHSyxRQUFwQztBQUNBLFlBQU1FLGVBQWUsR0FBR0gsU0FBUyxHQUFHQyxRQUFwQztBQUNBLFlBQU1HLGFBQWEsR0FBR0YsZUFBZSxHQUFHLENBQXhDO0FBQ0EsWUFBTUcsYUFBYSxHQUFHRixlQUFlLEdBQUcsQ0FBeEM7QUFDQWQsUUFBQUEsUUFBUSxDQUFDaUIsZ0JBQVQsR0FBNEJsQyxDQUFDLEdBQUcsQ0FBaEM7O0FBRUEsWUFBSUEsQ0FBQyxHQUFHLENBQUosS0FBVWdDLGFBQWEsR0FBR0MsYUFBaEIsR0FBZ0NwQyxNQUFoQyxHQUF5Q0MsTUFBdkQsRUFBK0Q7QUFJN0RtQixVQUFBQSxRQUFRLENBQUNlLGFBQVQsR0FBeUJuQyxNQUF6QjtBQUNBb0IsVUFBQUEsUUFBUSxDQUFDZ0IsYUFBVCxHQUF5Qm5DLE1BQXpCO0FBQ0QsU0FORCxNQU1PO0FBQ0xtQixVQUFBQSxRQUFRLENBQUNlLGFBQVQsR0FBeUJBLGFBQXpCO0FBQ0FmLFVBQUFBLFFBQVEsQ0FBQ2dCLGFBQVQsR0FBeUJBLGFBQXpCO0FBQ0Q7O0FBRURoQixRQUFBQSxRQUFRLENBQUNrQixnQkFBVCxHQUE0Qk4sUUFBNUI7O0FBRUEsWUFBSUEsUUFBUSxLQUFLLENBQWpCLEVBQW9CO0FBQ2xCWixVQUFBQSxRQUFRLENBQUNtQixnQkFBVCxHQUE0QkosYUFBNUI7QUFDQWYsVUFBQUEsUUFBUSxDQUFDb0IsZ0JBQVQsR0FBNEJKLGFBQTVCO0FBQ0Q7O0FBRURoQixRQUFBQSxRQUFRLENBQUNxQixnQkFBVCxHQUE0QlosUUFBNUI7O0FBRUEsWUFBSUEsUUFBUSxLQUFLLENBQWpCLEVBQW9CO0FBQ2xCVCxVQUFBQSxRQUFRLENBQUNzQixnQkFBVCxHQUE0QmpDLE1BQU0sR0FBRyxDQUFyQztBQUNBVyxVQUFBQSxRQUFRLENBQUN1QixnQkFBVCxHQUE0QmYsTUFBTSxHQUFHLENBQXJDO0FBQ0Q7O0FBRUQsWUFBTWdCLGVBQWUsR0FBR2QsS0FBSyxHQUFHLENBQWhDO0FBQ0EsWUFBTWUsZUFBZSxHQUFHakIsTUFBTSxHQUFHQyxRQUFULEdBQW9CLENBQTVDO0FBQ0FULFFBQUFBLFFBQVEsQ0FBQzBCLGdCQUFULEdBQTRCM0MsQ0FBQyxHQUFHLENBQWhDOztBQUVBLFlBQUlBLENBQUMsR0FBRyxDQUFKLEtBQVVULElBQUksR0FBR0UsSUFBUCxHQUFjZ0QsZUFBZCxHQUFnQ0MsZUFBOUMsRUFBK0Q7QUFJN0R6QixVQUFBQSxRQUFRLENBQUN3QixlQUFULEdBQTJCbEQsSUFBM0I7QUFDQTBCLFVBQUFBLFFBQVEsQ0FBQ3lCLGVBQVQsR0FBMkJqRCxJQUEzQjtBQUNELFNBTkQsTUFNTztBQUNMd0IsVUFBQUEsUUFBUSxDQUFDd0IsZUFBVCxHQUEyQkEsZUFBM0I7QUFDQXhCLFVBQUFBLFFBQVEsQ0FBQ3lCLGVBQVQsR0FBMkJBLGVBQTNCO0FBQ0Q7O0FBRUQsZUFBTyxJQUFQO0FBQ0Q7QUFDRjtBQUNGOztBQUVELFNBQU8sS0FBUDtBQUNELENBL0hEOztBQWtJQSxJQUFNRSx3QkFBd0IsR0FBRyxTQUEzQkEsd0JBQTJCLENBQy9CNUMsQ0FEK0IsRUFFL0JILE1BRitCLEVBRy9CTixJQUgrQixFQUkvQk8sTUFKK0IsRUFLL0JMLElBTCtCLEVBTS9CQyxRQU4rQixFQU8vQlEsU0FQK0IsRUFRL0JDLEtBUitCLEVBUy9CUSxTQVQrQixFQVUvQkMsS0FWK0IsRUFXL0JLLFFBWCtCLEVBWTVCO0FBQ0gsTUFBTVAsRUFBRSxHQUFHakIsSUFBSSxHQUFHRixJQUFsQjtBQUVBLE1BQU0yQixPQUFPLEdBQUczQixJQUFJLEdBQUdNLE1BQXZCO0FBQ0EsTUFBTXNCLE9BQU8sR0FBRzFCLElBQUksR0FBR0ssTUFBdkI7QUFDQSxNQUFNc0IsYUFBYSxHQUFHRCxPQUFPLEdBQUdELE9BQWhDO0FBR0EsTUFBTTJCLFlBQVksR0FBR3pCLGFBQWEsR0FBR3BCLENBQXJDO0FBRUEsTUFBTThDLFlBQVksR0FBRzFCLGFBQWEsR0FBR3BCLENBQXJDO0FBRUEsTUFBSU8sV0FBVyxHQUFHbkIsV0FBbEI7QUFHQSxNQUFNMkIsRUFBRSxHQUFHZixDQUFDLEdBQUdZLEtBQUosR0FBWVosQ0FBWixHQUFnQlksS0FBM0I7O0FBRUEsT0FBSyxJQUFJQyxFQUFFLEdBQUcsQ0FBVCxFQUFZQyxFQUFFLEdBQUdkLENBQXRCLEVBQXlCYSxFQUFFLElBQUlFLEVBQS9CLEVBQW1DRixFQUFFLElBQUksQ0FBTixFQUFTQyxFQUFFLElBQUksQ0FBbEQsRUFBcUQ7QUFLbkQsUUFBTVMsTUFBTSxHQUFHVixFQUFFLEtBQUssQ0FBUCxJQUFhQSxFQUFFLEtBQUtiLENBQVAsSUFBWVcsU0FBUyxDQUFDRSxFQUFELENBQVQsR0FBZ0JOLFdBQXhEO0FBQ0EsUUFBTWlCLFNBQVMsR0FBR0QsTUFBTSxHQUFHWixTQUFTLENBQUNFLEVBQUQsQ0FBWixHQUFtQk4sV0FBM0M7QUFDQSxRQUFNRCxNQUFNLEdBQUdpQixNQUFNLEdBQ2pCQyxTQURpQixHQUVqQkEsU0FBUyxHQUFHLENBRmhCO0FBS0EsUUFBTUMsTUFBTSxHQUFHZixFQUFFLEdBQUdKLE1BQUwsR0FBY1EsRUFBN0I7QUFDQSxRQUFNZSxRQUFRLEdBQUdqQyxpQkFBaUIsQ0FDaENDLE1BRGdDLEVBRWhDUyxNQUFNLEdBQUcsQ0FGdUIsRUFHaENSLE1BSGdDLEVBSWhDMkIsTUFBTSxHQUFHLENBSnVCLEVBS2hDL0IsUUFMZ0MsQ0FBbEM7QUFPQSxRQUFNaUMsS0FBSyxHQUFHckIsTUFBTSxHQUFHdUIsUUFBdkI7QUFDQXRCLElBQUFBLFdBQVcsR0FBR0ksU0FBUyxDQUFDRSxFQUFELENBQXZCO0FBQ0FGLElBQUFBLFNBQVMsQ0FBQ0UsRUFBRCxDQUFULEdBQWdCYyxLQUFoQjs7QUFFQSxRQUFJa0IsWUFBWSxJQUFJL0IsRUFBaEIsSUFBc0JBLEVBQUUsSUFBSWdDLFlBQWhDLEVBQThDO0FBSTVDLFVBQU0xQyxFQUFFLEdBQUcsQ0FBQ0osQ0FBQyxJQUFJYyxFQUFFLEdBQUdNLGFBQVQsQ0FBRixJQUE2QixDQUF4Qzs7QUFHQSxVQUFJaEIsRUFBRSxJQUFJRCxLQUFOLElBQWV3QixLQUFLLEdBQUcsQ0FBUixJQUFhekIsU0FBUyxDQUFDRSxFQUFELENBQXpDLEVBQStDO0FBQzdDLFlBQU0yQyxLQUFLLEdBQUd0QixNQUFNLEdBQUdJLFFBQXZCO0FBQ0FaLFFBQUFBLFFBQVEsQ0FBQ2lCLGdCQUFULEdBQTRCbEMsQ0FBNUI7O0FBRUEsWUFBSUEsQ0FBQyxLQUFLMkIsS0FBSyxHQUFHb0IsS0FBUixHQUFnQmxELE1BQWhCLEdBQXlCQyxNQUFuQyxFQUEyQztBQUl6Q21CLFVBQUFBLFFBQVEsQ0FBQ2UsYUFBVCxHQUF5Qm5DLE1BQXpCO0FBQ0FvQixVQUFBQSxRQUFRLENBQUNnQixhQUFULEdBQXlCbkMsTUFBekI7QUFDRCxTQU5ELE1BTU87QUFDTG1CLFVBQUFBLFFBQVEsQ0FBQ2UsYUFBVCxHQUF5QkwsS0FBekI7QUFDQVYsVUFBQUEsUUFBUSxDQUFDZ0IsYUFBVCxHQUF5QmMsS0FBekI7QUFDRDs7QUFFRDlCLFFBQUFBLFFBQVEsQ0FBQ2tCLGdCQUFULEdBQTRCTixRQUE1Qjs7QUFFQSxZQUFJQSxRQUFRLEtBQUssQ0FBakIsRUFBb0I7QUFFbEJaLFVBQUFBLFFBQVEsQ0FBQ21CLGdCQUFULEdBQTRCVCxLQUE1QjtBQUNBVixVQUFBQSxRQUFRLENBQUNvQixnQkFBVCxHQUE0QlUsS0FBNUI7QUFDRDs7QUFFRDlCLFFBQUFBLFFBQVEsQ0FBQzBCLGdCQUFULEdBQTRCM0MsQ0FBQyxHQUFHLENBQWhDOztBQUVBLFlBQUlBLENBQUMsS0FBSyxDQUFWLEVBQWE7QUFFWGlCLFVBQUFBLFFBQVEsQ0FBQ3FCLGdCQUFULEdBQTRCLENBQTVCO0FBQ0FyQixVQUFBQSxRQUFRLENBQUN3QixlQUFULEdBQTJCbEQsSUFBM0I7QUFDQTBCLFVBQUFBLFFBQVEsQ0FBQ3lCLGVBQVQsR0FBMkJqRCxJQUEzQjtBQUNELFNBTEQsTUFLTztBQUlMLGNBQU1tQyxTQUFTLEdBQUdsQixFQUFFLEdBQUdjLFNBQUwsSUFBa0JELE1BQU0sR0FBR1QsRUFBRSxHQUFHLENBQVIsR0FBWUEsRUFBRSxHQUFHLENBQXpDLENBQWxCO0FBSUEsY0FBTVksUUFBUSxHQUFHckMsaUJBQWlCLENBQ2hDbUMsU0FEZ0MsRUFFaENqQyxJQUZnQyxFQUdoQ3FDLFNBSGdDLEVBSWhDbkMsSUFKZ0MsRUFLaENDLFFBTGdDLENBQWxDO0FBT0F1QixVQUFBQSxRQUFRLENBQUNxQixnQkFBVCxHQUE0QlosUUFBNUI7O0FBRUEsY0FBSUEsUUFBUSxLQUFLLENBQWpCLEVBQW9CO0FBRWxCVCxZQUFBQSxRQUFRLENBQUNzQixnQkFBVCxHQUE0QmYsU0FBNUI7QUFDQVAsWUFBQUEsUUFBUSxDQUFDdUIsZ0JBQVQsR0FBNEJaLFNBQTVCO0FBQ0Q7O0FBRUQsY0FBTWEsZUFBZSxHQUFHakIsU0FBUyxHQUFHRSxRQUFwQztBQUVBLGNBQU1nQixlQUFlLEdBQUdkLFNBQVMsR0FBR0YsUUFBcEM7O0FBRUEsY0FBSTFCLENBQUMsR0FBRyxDQUFKLEtBQVVULElBQUksR0FBR0UsSUFBUCxHQUFjZ0QsZUFBZCxHQUFnQ0MsZUFBOUMsRUFBK0Q7QUFJN0R6QixZQUFBQSxRQUFRLENBQUN3QixlQUFULEdBQTJCbEQsSUFBM0I7QUFDQTBCLFlBQUFBLFFBQVEsQ0FBQ3lCLGVBQVQsR0FBMkJqRCxJQUEzQjtBQUNELFdBTkQsTUFNTztBQUNMd0IsWUFBQUEsUUFBUSxDQUFDd0IsZUFBVCxHQUEyQkEsZUFBM0I7QUFDQXhCLFlBQUFBLFFBQVEsQ0FBQ3lCLGVBQVQsR0FBMkJBLGVBQTNCO0FBQ0Q7QUFDRjs7QUFFRCxlQUFPLElBQVA7QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsU0FBTyxLQUFQO0FBQ0QsQ0F2SUQ7O0FBNklBLElBQU1NLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQ2JDLE9BRGEsRUFFYnBELE1BRmEsRUFHYk4sSUFIYSxFQUliTyxNQUphLEVBS2JMLElBTGEsRUFNYkMsUUFOYSxFQU9iUSxTQVBhLEVBUWJTLFNBUmEsRUFTYk0sUUFUYSxFQVVWO0FBQ0gsTUFBTWhCLEVBQUUsR0FBR0gsTUFBTSxHQUFHRCxNQUFwQjtBQUVBLE1BQU1hLEVBQUUsR0FBR2pCLElBQUksR0FBR0YsSUFBbEI7QUFFQSxNQUFNMkIsT0FBTyxHQUFHM0IsSUFBSSxHQUFHTSxNQUF2QjtBQUNBLE1BQU1zQixPQUFPLEdBQUcxQixJQUFJLEdBQUdLLE1BQXZCO0FBT0EsTUFBTXNCLGFBQWEsR0FBR0QsT0FBTyxHQUFHRCxPQUFoQztBQUVBLE1BQUlmLEtBQUssR0FBR2UsT0FBWjtBQUNBLE1BQUlOLEtBQUssR0FBR00sT0FBWjtBQUVBaEIsRUFBQUEsU0FBUyxDQUFDLENBQUQsQ0FBVCxHQUFlTCxNQUFNLEdBQUcsQ0FBeEI7QUFFQWMsRUFBQUEsU0FBUyxDQUFDLENBQUQsQ0FBVCxHQUFlcEIsSUFBZjs7QUFFQSxNQUFJNkIsYUFBYSxHQUFHLENBQWhCLEtBQXNCLENBQTFCLEVBQTZCO0FBRTNCLFFBQU04QixJQUFJLEdBQUcsQ0FBQ0QsT0FBTyxJQUFJN0IsYUFBWixJQUE2QixDQUExQztBQUNBLFFBQU0rQixJQUFJLEdBQUcsQ0FBQ2pDLE9BQU8sR0FBR0MsT0FBWCxJQUFzQixDQUFuQzs7QUFFQSxTQUFLLElBQUluQixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxJQUFJbUQsSUFBckIsRUFBMkJuRCxDQUFDLElBQUksQ0FBaEMsRUFBbUM7QUFDakNHLE1BQUFBLEtBQUssR0FBR0osWUFBWSxDQUFDQyxDQUFELEVBQUlULElBQUosRUFBVUUsSUFBVixFQUFnQlEsRUFBaEIsRUFBb0JQLFFBQXBCLEVBQThCUSxTQUE5QixFQUF5Q0MsS0FBekMsQ0FBcEI7O0FBRUEsVUFBSUgsQ0FBQyxHQUFHa0QsSUFBUixFQUFjO0FBQ1p0QyxRQUFBQSxLQUFLLEdBQUdILFlBQVksQ0FBQ1QsQ0FBRCxFQUFJSCxNQUFKLEVBQVlDLE1BQVosRUFBb0JZLEVBQXBCLEVBQXdCaEIsUUFBeEIsRUFBa0NpQixTQUFsQyxFQUE2Q0MsS0FBN0MsQ0FBcEI7QUFDRCxPQUZELE1BRU8sSUFHTGdDLHdCQUF3QixDQUN0QjVDLENBRHNCLEVBRXRCSCxNQUZzQixFQUd0Qk4sSUFIc0IsRUFJdEJPLE1BSnNCLEVBS3RCTCxJQUxzQixFQU10QkMsUUFOc0IsRUFPdEJRLFNBUHNCLEVBUXRCQyxLQVJzQixFQVN0QlEsU0FUc0IsRUFVdEJDLEtBVnNCLEVBV3RCSyxRQVhzQixDQUhuQixFQWdCTDtBQUNBO0FBQ0Q7QUFDRjtBQUNGLEdBOUJELE1BOEJPO0FBRUwsUUFBTWlDLEtBQUksR0FBRyxDQUFDLENBQUNELE9BQU8sSUFBSTdCLGFBQVosSUFBNkIsQ0FBOUIsSUFBbUMsQ0FBaEQ7O0FBQ0EsUUFBTStCLEtBQUksR0FBRyxDQUFDakMsT0FBTyxHQUFHQyxPQUFWLEdBQW9CLENBQXJCLElBQTBCLENBQXZDOztBQU1BLFFBQUluQixFQUFDLEdBQUcsQ0FBUjtBQUNBRyxJQUFBQSxLQUFLLEdBQUdKLFlBQVksQ0FBQ0MsRUFBRCxFQUFJVCxJQUFKLEVBQVVFLElBQVYsRUFBZ0JRLEVBQWhCLEVBQW9CUCxRQUFwQixFQUE4QlEsU0FBOUIsRUFBeUNDLEtBQXpDLENBQXBCOztBQUVBLFNBQUtILEVBQUMsSUFBSSxDQUFWLEVBQWFBLEVBQUMsSUFBSW1ELEtBQWxCLEVBQXdCbkQsRUFBQyxJQUFJLENBQTdCLEVBQWdDO0FBQzlCWSxNQUFBQSxLQUFLLEdBQUdILFlBQVksQ0FDbEJULEVBQUMsR0FBRyxDQURjLEVBRWxCSCxNQUZrQixFQUdsQkMsTUFIa0IsRUFJbEJZLEVBSmtCLEVBS2xCaEIsUUFMa0IsRUFNbEJpQixTQU5rQixFQU9sQkMsS0FQa0IsQ0FBcEI7O0FBVUEsVUFBSVosRUFBQyxHQUFHa0QsS0FBUixFQUFjO0FBQ1ovQyxRQUFBQSxLQUFLLEdBQUdKLFlBQVksQ0FBQ0MsRUFBRCxFQUFJVCxJQUFKLEVBQVVFLElBQVYsRUFBZ0JRLEVBQWhCLEVBQW9CUCxRQUFwQixFQUE4QlEsU0FBOUIsRUFBeUNDLEtBQXpDLENBQXBCO0FBQ0QsT0FGRCxNQUVPLElBR0xhLHdCQUF3QixDQUN0QmhCLEVBRHNCLEVBRXRCSCxNQUZzQixFQUd0Qk4sSUFIc0IsRUFJdEJPLE1BSnNCLEVBS3RCTCxJQUxzQixFQU10QkMsUUFOc0IsRUFPdEJRLFNBUHNCLEVBUXRCQyxLQVJzQixFQVN0QlEsU0FUc0IsRUFVdEJDLEtBVnNCLEVBV3RCSyxRQVhzQixDQUhuQixFQWdCTDtBQUNBO0FBQ0Q7QUFDRjtBQUNGOztBQUdELFFBQU0sSUFBSW1DLEtBQUosQ0FDRGpFLEdBREMsNEJBQ3lCVSxNQUR6QixjQUN3Q04sSUFEeEMsZ0JBQ3VETyxNQUR2RCxjQUNzRUwsSUFEdEUsQ0FBTjtBQUdELENBakhEOztBQXlIQSxJQUFNNEQsZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFtQixDQUN2QkosT0FEdUIsRUFFdkJwRCxNQUZ1QixFQUd2Qk4sSUFIdUIsRUFJdkJPLE1BSnVCLEVBS3ZCTCxJQUx1QixFQU12QjZELFVBTnVCLEVBT3ZCQyxTQVB1QixFQVF2QnJELFNBUnVCLEVBU3ZCUyxTQVR1QixFQVV2Qk0sUUFWdUIsRUFXcEI7QUFDSCxNQUFJeEIsSUFBSSxHQUFHSyxNQUFQLEdBQWdCUCxJQUFJLEdBQUdNLE1BQTNCLEVBQW1DO0FBR2pDeUQsSUFBQUEsVUFBVSxHQUFHLENBQUNBLFVBQWQ7O0FBRUEsUUFBSUEsVUFBVSxJQUFJQyxTQUFTLENBQUNDLE1BQVYsS0FBcUIsQ0FBdkMsRUFBMEM7QUFFeEMsVUFBTUMsV0FBVyxHQUFHRixTQUFTLENBQUMsQ0FBRCxDQUE3QjtBQUFBLFVBQ0VHLGtCQUFnQixHQUFHRCxXQUFXLENBQUNDLGdCQURqQztBQUFBLFVBRUVoRSxVQUFRLEdBQUcrRCxXQUFXLENBQUMvRCxRQUZ6QjtBQUdBNkQsTUFBQUEsU0FBUyxDQUFDLENBQUQsQ0FBVCxHQUFlO0FBQ2JHLFFBQUFBLGdCQUFnQixFQUFHLFVBQVNDLGlCQUFULEVBQTRCO0FBQzdDLG1CQUFTRCxnQkFBVCxDQUEwQkUsRUFBMUIsRUFBOEJDLEdBQTlCLEVBQW1DQyxHQUFuQyxFQUF3QztBQUN0QyxtQkFBT0gsaUJBQWlCLENBQUNJLEtBQWxCLENBQXdCLElBQXhCLEVBQThCQyxTQUE5QixDQUFQO0FBQ0Q7O0FBRUROLFVBQUFBLGdCQUFnQixDQUFDTyxRQUFqQixHQUE0QixZQUFXO0FBQ3JDLG1CQUFPTixpQkFBaUIsQ0FBQ00sUUFBbEIsRUFBUDtBQUNELFdBRkQ7O0FBSUEsaUJBQU9QLGdCQUFQO0FBQ0QsU0FWaUIsQ0FVZixVQUFDL0QsT0FBRCxFQUFVdUUsT0FBVixFQUFtQkMsT0FBbkIsRUFBK0I7QUFDaENULFVBQUFBLGtCQUFnQixDQUFDL0QsT0FBRCxFQUFVd0UsT0FBVixFQUFtQkQsT0FBbkIsQ0FBaEI7QUFDRCxTQVppQixDQURMO0FBY2J4RSxRQUFBQSxRQUFRLEVBQUcsVUFBUzBFLFNBQVQsRUFBb0I7QUFDN0IsbUJBQVMxRSxRQUFULENBQWtCMkUsR0FBbEIsRUFBdUJDLEdBQXZCLEVBQTRCO0FBQzFCLG1CQUFPRixTQUFTLENBQUNMLEtBQVYsQ0FBZ0IsSUFBaEIsRUFBc0JDLFNBQXRCLENBQVA7QUFDRDs7QUFFRHRFLFVBQUFBLFFBQVEsQ0FBQ3VFLFFBQVQsR0FBb0IsWUFBVztBQUM3QixtQkFBT0csU0FBUyxDQUFDSCxRQUFWLEVBQVA7QUFDRCxXQUZEOztBQUlBLGlCQUFPdkUsUUFBUDtBQUNELFNBVlMsQ0FVUCxVQUFDRixNQUFELEVBQVNGLE1BQVQ7QUFBQSxpQkFBb0JJLFVBQVEsQ0FBQ0osTUFBRCxFQUFTRSxNQUFULENBQTVCO0FBQUEsU0FWTztBQWRHLE9BQWY7QUEwQkQ7O0FBRUQsUUFBTStFLE1BQU0sR0FBRzFFLE1BQWY7QUFDQSxRQUFNMkUsSUFBSSxHQUFHakYsSUFBYjtBQUNBTSxJQUFBQSxNQUFNLEdBQUdDLE1BQVQ7QUFDQVAsSUFBQUEsSUFBSSxHQUFHRSxJQUFQO0FBQ0FLLElBQUFBLE1BQU0sR0FBR3lFLE1BQVQ7QUFDQTlFLElBQUFBLElBQUksR0FBRytFLElBQVA7QUFDRDs7QUFFRCxNQUFNQyxVQUFVLEdBQUdsQixTQUFTLENBQUNELFVBQVUsR0FBRyxDQUFILEdBQU8sQ0FBbEIsQ0FBNUI7QUFBQSxNQUNFSSxnQkFBZ0IsR0FBR2UsVUFBVSxDQUFDZixnQkFEaEM7QUFBQSxNQUVFaEUsUUFBUSxHQUFHK0UsVUFBVSxDQUFDL0UsUUFGeEI7QUFJQXNELEVBQUFBLE1BQU0sQ0FDSkMsT0FESSxFQUVKcEQsTUFGSSxFQUdKTixJQUhJLEVBSUpPLE1BSkksRUFLSkwsSUFMSSxFQU1KQyxRQU5JLEVBT0pRLFNBUEksRUFRSlMsU0FSSSxFQVNKTSxRQVRJLENBQU47QUFXQSxNQUFNaUIsZ0JBQWdCLEdBQUdqQixRQUFRLENBQUNpQixnQkFBbEM7QUFBQSxNQUNFRixhQUFhLEdBQUdmLFFBQVEsQ0FBQ2UsYUFEM0I7QUFBQSxNQUVFQyxhQUFhLEdBQUdoQixRQUFRLENBQUNnQixhQUYzQjtBQUFBLE1BR0VFLGdCQUFnQixHQUFHbEIsUUFBUSxDQUFDa0IsZ0JBSDlCO0FBQUEsTUFJRUMsZ0JBQWdCLEdBQUduQixRQUFRLENBQUNtQixnQkFKOUI7QUFBQSxNQUtFQyxnQkFBZ0IsR0FBR3BCLFFBQVEsQ0FBQ29CLGdCQUw5QjtBQUFBLE1BTUVDLGdCQUFnQixHQUFHckIsUUFBUSxDQUFDcUIsZ0JBTjlCO0FBQUEsTUFPRUMsZ0JBQWdCLEdBQUd0QixRQUFRLENBQUNzQixnQkFQOUI7QUFBQSxNQVFFQyxnQkFBZ0IsR0FBR3ZCLFFBQVEsQ0FBQ3VCLGdCQVI5QjtBQUFBLE1BU0VHLGdCQUFnQixHQUFHMUIsUUFBUSxDQUFDMEIsZ0JBVDlCO0FBQUEsTUFVRUYsZUFBZSxHQUFHeEIsUUFBUSxDQUFDd0IsZUFWN0I7QUFBQSxNQVdFQyxlQUFlLEdBQUd6QixRQUFRLENBQUN5QixlQVg3Qjs7QUFhQSxNQUFJN0MsTUFBTSxHQUFHbUMsYUFBVCxJQUEwQmxDLE1BQU0sR0FBR21DLGFBQXZDLEVBQXNEO0FBRXBEb0IsSUFBQUEsZ0JBQWdCLENBQ2RuQixnQkFEYyxFQUVkckMsTUFGYyxFQUdkbUMsYUFIYyxFQUlkbEMsTUFKYyxFQUtkbUMsYUFMYyxFQU1kcUIsVUFOYyxFQU9kQyxTQVBjLEVBUWRyRCxTQVJjLEVBU2RTLFNBVGMsRUFVZE0sUUFWYyxDQUFoQjtBQVlEOztBQUVELE1BQUlrQixnQkFBZ0IsS0FBSyxDQUF6QixFQUE0QjtBQUMxQnVCLElBQUFBLGdCQUFnQixDQUFDdkIsZ0JBQUQsRUFBbUJDLGdCQUFuQixFQUFxQ0MsZ0JBQXJDLENBQWhCO0FBQ0Q7O0FBRUQsTUFBSUMsZ0JBQWdCLEtBQUssQ0FBekIsRUFBNEI7QUFDMUJvQixJQUFBQSxnQkFBZ0IsQ0FBQ3BCLGdCQUFELEVBQW1CQyxnQkFBbkIsRUFBcUNDLGdCQUFyQyxDQUFoQjtBQUNEOztBQUVELE1BQUlDLGVBQWUsR0FBR2xELElBQWxCLElBQTBCbUQsZUFBZSxHQUFHakQsSUFBaEQsRUFBc0Q7QUFFcEQ0RCxJQUFBQSxnQkFBZ0IsQ0FDZFYsZ0JBRGMsRUFFZEYsZUFGYyxFQUdkbEQsSUFIYyxFQUlkbUQsZUFKYyxFQUtkakQsSUFMYyxFQU1kNkQsVUFOYyxFQU9kQyxTQVBjLEVBUWRyRCxTQVJjLEVBU2RTLFNBVGMsRUFVZE0sUUFWYyxDQUFoQjtBQVlEO0FBQ0YsQ0E3SEQ7O0FBK0hBLElBQU15RCxjQUFjLEdBQUcsU0FBakJBLGNBQWlCLENBQUNDLElBQUQsRUFBT0MsR0FBUCxFQUFlO0FBQ3BDLE1BQU1DLElBQUksR0FBRyxPQUFPRCxHQUFwQjs7QUFFQSxNQUFJQyxJQUFJLEtBQUssUUFBYixFQUF1QjtBQUNyQixVQUFNLElBQUlDLFNBQUosQ0FBaUIzRixHQUFqQixVQUF5QndGLElBQXpCLGdCQUF3Q0UsSUFBeEMsc0JBQU47QUFDRDs7QUFFRCxNQUFJLENBQUNFLE1BQU0sQ0FBQ0MsYUFBUCxDQUFxQkosR0FBckIsQ0FBTCxFQUFnQztBQUM5QixVQUFNLElBQUlLLFVBQUosQ0FBa0I5RixHQUFsQixVQUEwQndGLElBQTFCLGVBQXdDQyxHQUF4Qyw0QkFBTjtBQUNEOztBQUVELE1BQUlBLEdBQUcsR0FBRyxDQUFWLEVBQWE7QUFDWCxVQUFNLElBQUlLLFVBQUosQ0FBa0I5RixHQUFsQixVQUEwQndGLElBQTFCLGVBQXdDQyxHQUF4Qyw0QkFBTjtBQUNEO0FBQ0YsQ0FkRDs7QUFnQkEsSUFBTU0sZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFtQixDQUFDUCxJQUFELEVBQU9DLEdBQVAsRUFBZTtBQUN0QyxNQUFNQyxJQUFJLEdBQUcsT0FBT0QsR0FBcEI7O0FBRUEsTUFBSUMsSUFBSSxLQUFLLFVBQWIsRUFBeUI7QUFDdkIsVUFBTSxJQUFJQyxTQUFKLENBQWlCM0YsR0FBakIsVUFBeUJ3RixJQUF6QixnQkFBd0NFLElBQXhDLHdCQUFOO0FBQ0Q7QUFDRixDQU5EOztBQVdBLElBQUlNLFFBQVEsR0FBRyxTQUFYQSxRQUFXLENBQUNqRSxPQUFELEVBQVVDLE9BQVYsRUFBbUJ6QixRQUFuQixFQUE2QmdFLGdCQUE3QixFQUFrRDtBQUMvRGdCLEVBQUFBLGNBQWMsQ0FBQyxTQUFELEVBQVl4RCxPQUFaLENBQWQ7QUFDQXdELEVBQUFBLGNBQWMsQ0FBQyxTQUFELEVBQVl2RCxPQUFaLENBQWQ7QUFDQStELEVBQUFBLGdCQUFnQixDQUFDLFVBQUQsRUFBYXhGLFFBQWIsQ0FBaEI7QUFDQXdGLEVBQUFBLGdCQUFnQixDQUFDLGtCQUFELEVBQXFCeEIsZ0JBQXJCLENBQWhCO0FBRUEsTUFBTWhDLFFBQVEsR0FBR3JDLGlCQUFpQixDQUFDLENBQUQsRUFBSTZCLE9BQUosRUFBYSxDQUFiLEVBQWdCQyxPQUFoQixFQUF5QnpCLFFBQXpCLENBQWxDOztBQUVBLE1BQUlnQyxRQUFRLEtBQUssQ0FBakIsRUFBb0I7QUFDbEJnQyxJQUFBQSxnQkFBZ0IsQ0FBQ2hDLFFBQUQsRUFBVyxDQUFYLEVBQWMsQ0FBZCxDQUFoQjtBQUNEOztBQUdELE1BQUlSLE9BQU8sS0FBS1EsUUFBWixJQUF3QlAsT0FBTyxLQUFLTyxRQUF4QyxFQUFrRDtBQUdoRCxRQUFNN0IsTUFBTSxHQUFHNkIsUUFBZjtBQUNBLFFBQU01QixNQUFNLEdBQUc0QixRQUFmO0FBRUEsUUFBTUcsUUFBUSxHQUFHakMsaUJBQWlCLENBQ2hDQyxNQURnQyxFQUVoQ3FCLE9BQU8sR0FBRyxDQUZzQixFQUdoQ3BCLE1BSGdDLEVBSWhDcUIsT0FBTyxHQUFHLENBSnNCLEVBS2hDekIsUUFMZ0MsQ0FBbEM7QUFTQSxRQUFNSCxJQUFJLEdBQUcyQixPQUFPLEdBQUdXLFFBQXZCO0FBQ0EsUUFBTXBDLElBQUksR0FBRzBCLE9BQU8sR0FBR1UsUUFBdkI7QUFJQSxRQUFNdUQsU0FBUyxHQUFHMUQsUUFBUSxHQUFHRyxRQUE3Qjs7QUFFQSxRQUFJWCxPQUFPLEtBQUtrRSxTQUFaLElBQXlCakUsT0FBTyxLQUFLaUUsU0FBekMsRUFBb0Q7QUFDbEQsVUFBTW5DLE9BQU8sR0FBRyxDQUFoQjtBQUVBLFVBQU1LLFVBQVUsR0FBRyxLQUFuQjtBQUVBLFVBQU1DLFNBQVMsR0FBRyxDQUNoQjtBQUNFRyxRQUFBQSxnQkFBZ0IsRUFBaEJBLGdCQURGO0FBRUVoRSxRQUFBQSxRQUFRLEVBQVJBO0FBRkYsT0FEZ0IsQ0FBbEI7QUFRQSxVQUFNUSxTQUFTLEdBQUcsQ0FBQ2QsV0FBRCxDQUFsQjtBQUVBLFVBQU11QixTQUFTLEdBQUcsQ0FBQ3ZCLFdBQUQsQ0FBbEI7QUFFQSxVQUFNNkIsUUFBUSxHQUFHO0FBQ2ZzQixRQUFBQSxnQkFBZ0IsRUFBRW5ELFdBREg7QUFFZmdELFFBQUFBLGdCQUFnQixFQUFFaEQsV0FGSDtBQUdmNEMsUUFBQUEsYUFBYSxFQUFFNUMsV0FIQTtBQUlmcUQsUUFBQUEsZUFBZSxFQUFFckQsV0FKRjtBQUtmb0QsUUFBQUEsZ0JBQWdCLEVBQUVwRCxXQUxIO0FBTWZpRCxRQUFBQSxnQkFBZ0IsRUFBRWpELFdBTkg7QUFPZjZDLFFBQUFBLGFBQWEsRUFBRTdDLFdBUEE7QUFRZnNELFFBQUFBLGVBQWUsRUFBRXRELFdBUkY7QUFTZnVELFFBQUFBLGdCQUFnQixFQUFFdkQsV0FUSDtBQVVmOEMsUUFBQUEsZ0JBQWdCLEVBQUU5QyxXQVZIO0FBV2ZrRCxRQUFBQSxnQkFBZ0IsRUFBRWxELFdBWEg7QUFZZitDLFFBQUFBLGdCQUFnQixFQUFFL0M7QUFaSCxPQUFqQjtBQWVBaUUsTUFBQUEsZ0JBQWdCLENBQ2RKLE9BRGMsRUFFZHBELE1BRmMsRUFHZE4sSUFIYyxFQUlkTyxNQUpjLEVBS2RMLElBTGMsRUFNZDZELFVBTmMsRUFPZEMsU0FQYyxFQVFkckQsU0FSYyxFQVNkUyxTQVRjLEVBVWRNLFFBVmMsQ0FBaEI7QUFZRDs7QUFFRCxRQUFJWSxRQUFRLEtBQUssQ0FBakIsRUFBb0I7QUFDbEI2QixNQUFBQSxnQkFBZ0IsQ0FBQzdCLFFBQUQsRUFBV3RDLElBQVgsRUFBaUJFLElBQWpCLENBQWhCO0FBQ0Q7QUFDRjtBQUNGLENBckZEOztBQXVGQVQsT0FBTyxDQUFDRSxPQUFSLEdBQWtCaUcsUUFBbEIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuLy8gVGhpcyBkaWZmLXNlcXVlbmNlcyBwYWNrYWdlIGltcGxlbWVudHMgdGhlIGxpbmVhciBzcGFjZSB2YXJpYXRpb24gaW5cbi8vIEFuIE8oTkQpIERpZmZlcmVuY2UgQWxnb3JpdGhtIGFuZCBJdHMgVmFyaWF0aW9ucyBieSBFdWdlbmUgVy4gTXllcnNcbi8vIFJlbGF0aW9uc2hpcCBpbiBub3RhdGlvbiBiZXR3ZWVuIE15ZXJzIHBhcGVyIGFuZCB0aGlzIHBhY2thZ2U6XG4vLyBBIGlzIGFcbi8vIE4gaXMgYUxlbmd0aCwgYUVuZCAtIGFTdGFydCwgYW5kIHNvIG9uXG4vLyB4IGlzIGFJbmRleCwgYUZpcnN0LCBhTGFzdCwgYW5kIHNvIG9uXG4vLyBCIGlzIGJcbi8vIE0gaXMgYkxlbmd0aCwgYkVuZCAtIGJTdGFydCwgYW5kIHNvIG9uXG4vLyB5IGlzIGJJbmRleCwgYkZpcnN0LCBiTGFzdCwgYW5kIHNvIG9uXG4vLyDOlCA9IE4gLSBNIGlzIG5lZ2F0aXZlIG9mIGJhRGVsdGFMZW5ndGggPSBiTGVuZ3RoIC0gYUxlbmd0aFxuLy8gRCBpcyBkXG4vLyBrIGlzIGtGXG4vLyBrICsgzpQgaXMga0YgPSBrUiAtIGJhRGVsdGFMZW5ndGhcbi8vIFYgaXMgYUluZGV4ZXNGIG9yIGFJbmRleGVzUiAoc2VlIGNvbW1lbnQgYmVsb3cgYWJvdXQgSW5kZXhlcyB0eXBlKVxuLy8gaW5kZXggaW50ZXJ2YWxzIFsxLCBOXSBhbmQgWzEsIE1dIGFyZSBbMCwgYUxlbmd0aCkgYW5kIFswLCBiTGVuZ3RoKVxuLy8gc3RhcnRpbmcgcG9pbnQgaW4gZm9yd2FyZCBkaXJlY3Rpb24gKDAsIDApIGlzICgtMSwgLTEpXG4vLyBzdGFydGluZyBwb2ludCBpbiByZXZlcnNlIGRpcmVjdGlvbiAoTiArIDEsIE0gKyAxKSBpcyAoYUxlbmd0aCwgYkxlbmd0aClcbi8vIFRoZSDigJxlZGl0IGdyYXBo4oCdIGZvciBzZXF1ZW5jZXMgYSBhbmQgYiBjb3JyZXNwb25kcyB0byBpdGVtczpcbi8vIGluIGEgb24gdGhlIGhvcml6b250YWwgYXhpc1xuLy8gaW4gYiBvbiB0aGUgdmVydGljYWwgYXhpc1xuLy9cbi8vIEdpdmVuIGEtY29vcmRpbmF0ZSBvZiBhIHBvaW50IGluIGEgZGlhZ29uYWwsIHlvdSBjYW4gY29tcHV0ZSBiLWNvb3JkaW5hdGUuXG4vL1xuLy8gRm9yd2FyZCBkaWFnb25hbHMga0Y6XG4vLyB6ZXJvIGRpYWdvbmFsIGludGVyc2VjdHMgdG9wIGxlZnQgY29ybmVyXG4vLyBwb3NpdGl2ZSBkaWFnb25hbHMgaW50ZXJzZWN0IHRvcCBlZGdlXG4vLyBuZWdhdGl2ZSBkaWFnb25hbHMgaW5zZXJzZWN0IGxlZnQgZWRnZVxuLy9cbi8vIFJldmVyc2UgZGlhZ29uYWxzIGtSOlxuLy8gemVybyBkaWFnb25hbCBpbnRlcnNlY3RzIGJvdHRvbSByaWdodCBjb3JuZXJcbi8vIHBvc2l0aXZlIGRpYWdvbmFscyBpbnRlcnNlY3QgcmlnaHQgZWRnZVxuLy8gbmVnYXRpdmUgZGlhZ29uYWxzIGludGVyc2VjdCBib3R0b20gZWRnZVxuLy8gVGhlIGdyYXBoIGNvbnRhaW5zIGEgZGlyZWN0ZWQgYWN5Y2xpYyBncmFwaCBvZiBlZGdlczpcbi8vIGhvcml6b250YWw6IGRlbGV0ZSBhbiBpdGVtIGZyb20gYVxuLy8gdmVydGljYWw6IGluc2VydCBhbiBpdGVtIGZyb20gYlxuLy8gZGlhZ29uYWw6IGNvbW1vbiBpdGVtIGluIGEgYW5kIGJcbi8vXG4vLyBUaGUgYWxnb3JpdGhtIHNvbHZlcyBkdWFsIHByb2JsZW1zIGluIHRoZSBncmFwaCBhbmFsb2d5OlxuLy8gRmluZCBsb25nZXN0IGNvbW1vbiBzdWJzZXF1ZW5jZTogcGF0aCB3aXRoIG1heGltdW0gbnVtYmVyIG9mIGRpYWdvbmFsIGVkZ2VzXG4vLyBGaW5kIHNob3J0ZXN0IGVkaXQgc2NyaXB0OiBwYXRoIHdpdGggbWluaW11bSBudW1iZXIgb2Ygbm9uLWRpYWdvbmFsIGVkZ2VzXG4vLyBJbnB1dCBjYWxsYmFjayBmdW5jdGlvbiBjb21wYXJlcyBpdGVtcyBhdCBpbmRleGVzIGluIHRoZSBzZXF1ZW5jZXMuXG4vLyBPdXRwdXQgY2FsbGJhY2sgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIG51bWJlciBvZiBhZGphY2VudCBpdGVtc1xuLy8gYW5kIHN0YXJ0aW5nIGluZGV4ZXMgb2YgZWFjaCBjb21tb24gc3Vic2VxdWVuY2UuXG4vLyBFaXRoZXIgb3JpZ2luYWwgZnVuY3Rpb25zIG9yIHdyYXBwZWQgdG8gc3dhcCBpbmRleGVzIGlmIGdyYXBoIGlzIHRyYW5zcG9zZWQuXG4vLyBJbmRleGVzIGluIHNlcXVlbmNlIGEgb2YgbGFzdCBwb2ludCBvZiBmb3J3YXJkIG9yIHJldmVyc2UgcGF0aHMgaW4gZ3JhcGguXG4vLyBNeWVycyBhbGdvcml0aG0gaW5kZXhlcyBieSBkaWFnb25hbCBrIHdoaWNoIGZvciBuZWdhdGl2ZSBpcyBiYWQgZGVvcHQgaW4gVjguXG4vLyBUaGlzIHBhY2thZ2UgaW5kZXhlcyBieSBpRiBhbmQgaVIgd2hpY2ggYXJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLlxuLy8gYW5kIGFsc28gdXBkYXRlcyB0aGUgaW5kZXggYXJyYXlzIGluIHBsYWNlIHRvIGN1dCBtZW1vcnkgaW4gaGFsZi5cbi8vIGtGID0gMiAqIGlGIC0gZFxuLy8ga1IgPSBkIC0gMiAqIGlSXG4vLyBEaXZpc2lvbiBvZiBpbmRleCBpbnRlcnZhbHMgaW4gc2VxdWVuY2VzIGEgYW5kIGIgYXQgdGhlIG1pZGRsZSBjaGFuZ2UuXG4vLyBJbnZhcmlhbnQ6IGludGVydmFscyBkbyBub3QgaGF2ZSBjb21tb24gaXRlbXMgYXQgdGhlIHN0YXJ0IG9yIGVuZC5cbmNvbnN0IHBrZyA9ICdkaWZmLXNlcXVlbmNlcyc7IC8vIGZvciBlcnJvciBtZXNzYWdlc1xuXG5jb25zdCBOT1RfWUVUX1NFVCA9IDA7IC8vIHNtYWxsIGludCBpbnN0ZWFkIG9mIHVuZGVmaW5lZCB0byBhdm9pZCBkZW9wdCBpbiBWOFxuLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgY29tbW9uIGl0ZW1zIHRoYXQgZm9sbG93IGluIGZvcndhcmQgZGlyZWN0aW9uLlxuLy8gVGhlIGxlbmd0aCBvZiB3aGF0IE15ZXJzIHBhcGVyIGNhbGxzIGEg4oCcc25ha2XigJ0gaW4gYSBmb3J3YXJkIHBhdGguXG5cbmNvbnN0IGNvdW50Q29tbW9uSXRlbXNGID0gKGFJbmRleCwgYUVuZCwgYkluZGV4LCBiRW5kLCBpc0NvbW1vbikgPT4ge1xuICBsZXQgbkNvbW1vbiA9IDA7XG5cbiAgd2hpbGUgKGFJbmRleCA8IGFFbmQgJiYgYkluZGV4IDwgYkVuZCAmJiBpc0NvbW1vbihhSW5kZXgsIGJJbmRleCkpIHtcbiAgICBhSW5kZXggKz0gMTtcbiAgICBiSW5kZXggKz0gMTtcbiAgICBuQ29tbW9uICs9IDE7XG4gIH1cblxuICByZXR1cm4gbkNvbW1vbjtcbn07IC8vIFJldHVybiB0aGUgbnVtYmVyIG9mIGNvbW1vbiBpdGVtcyB0aGF0IHByZWNlZGUgaW4gcmV2ZXJzZSBkaXJlY3Rpb24uXG4vLyBUaGUgbGVuZ3RoIG9mIHdoYXQgTXllcnMgcGFwZXIgY2FsbHMgYSDigJxzbmFrZeKAnSBpbiBhIHJldmVyc2UgcGF0aC5cblxuY29uc3QgY291bnRDb21tb25JdGVtc1IgPSAoYVN0YXJ0LCBhSW5kZXgsIGJTdGFydCwgYkluZGV4LCBpc0NvbW1vbikgPT4ge1xuICBsZXQgbkNvbW1vbiA9IDA7XG5cbiAgd2hpbGUgKGFTdGFydCA8PSBhSW5kZXggJiYgYlN0YXJ0IDw9IGJJbmRleCAmJiBpc0NvbW1vbihhSW5kZXgsIGJJbmRleCkpIHtcbiAgICBhSW5kZXggLT0gMTtcbiAgICBiSW5kZXggLT0gMTtcbiAgICBuQ29tbW9uICs9IDE7XG4gIH1cblxuICByZXR1cm4gbkNvbW1vbjtcbn07IC8vIEEgc2ltcGxlIGZ1bmN0aW9uIHRvIGV4dGVuZCBmb3J3YXJkIHBhdGhzIGZyb20gKGQgLSAxKSB0byBkIGNoYW5nZXNcbi8vIHdoZW4gZm9yd2FyZCBhbmQgcmV2ZXJzZSBwYXRocyBjYW5ub3QgeWV0IG92ZXJsYXAuXG5cbmNvbnN0IGV4dGVuZFBhdGhzRiA9IChkLCBhRW5kLCBiRW5kLCBiRiwgaXNDb21tb24sIGFJbmRleGVzRiwgaU1heEYpID0+IHtcbiAgLy8gVW5yb2xsIHRoZSBmaXJzdCBpdGVyYXRpb24uXG4gIGxldCBpRiA9IDA7XG4gIGxldCBrRiA9IC1kOyAvLyBrRiA9IDIgKiBpRiAtIGRcblxuICBsZXQgYUZpcnN0ID0gYUluZGV4ZXNGW2lGXTsgLy8gaW4gZmlyc3QgaXRlcmF0aW9uIGFsd2F5cyBpbnNlcnRcblxuICBsZXQgYUluZGV4UHJldjEgPSBhRmlyc3Q7IC8vIHByZXYgdmFsdWUgb2YgW2lGIC0gMV0gaW4gbmV4dCBpdGVyYXRpb25cblxuICBhSW5kZXhlc0ZbaUZdICs9IGNvdW50Q29tbW9uSXRlbXNGKFxuICAgIGFGaXJzdCArIDEsXG4gICAgYUVuZCxcbiAgICBiRiArIGFGaXJzdCAtIGtGICsgMSxcbiAgICBiRW5kLFxuICAgIGlzQ29tbW9uXG4gICk7IC8vIE9wdGltaXphdGlvbjogc2tpcCBkaWFnb25hbHMgaW4gd2hpY2ggcGF0aHMgY2Fubm90IGV2ZXIgb3ZlcmxhcC5cblxuICBjb25zdCBuRiA9IGQgPCBpTWF4RiA/IGQgOiBpTWF4RjsgLy8gVGhlIGRpYWdvbmFscyBrRiBhcmUgb2RkIHdoZW4gZCBpcyBvZGQgYW5kIGV2ZW4gd2hlbiBkIGlzIGV2ZW4uXG5cbiAgZm9yIChpRiArPSAxLCBrRiArPSAyOyBpRiA8PSBuRjsgaUYgKz0gMSwga0YgKz0gMikge1xuICAgIC8vIFRvIGdldCBmaXJzdCBwb2ludCBvZiBwYXRoIHNlZ21lbnQsIG1vdmUgb25lIGNoYW5nZSBpbiBmb3J3YXJkIGRpcmVjdGlvblxuICAgIC8vIGZyb20gbGFzdCBwb2ludCBvZiBwcmV2aW91cyBwYXRoIHNlZ21lbnQgaW4gYW4gYWRqYWNlbnQgZGlhZ29uYWwuXG4gICAgLy8gSW4gbGFzdCBwb3NzaWJsZSBpdGVyYXRpb24gd2hlbiBpRiA9PT0gZCBhbmQga0YgPT09IGQgYWx3YXlzIGRlbGV0ZS5cbiAgICBpZiAoaUYgIT09IGQgJiYgYUluZGV4UHJldjEgPCBhSW5kZXhlc0ZbaUZdKSB7XG4gICAgICBhRmlyc3QgPSBhSW5kZXhlc0ZbaUZdOyAvLyB2ZXJ0aWNhbCB0byBpbnNlcnQgZnJvbSBiXG4gICAgfSBlbHNlIHtcbiAgICAgIGFGaXJzdCA9IGFJbmRleFByZXYxICsgMTsgLy8gaG9yaXpvbnRhbCB0byBkZWxldGUgZnJvbSBhXG5cbiAgICAgIGlmIChhRW5kIDw9IGFGaXJzdCkge1xuICAgICAgICAvLyBPcHRpbWl6YXRpb246IGRlbGV0ZSBtb3ZlZCBwYXN0IHJpZ2h0IG9mIGdyYXBoLlxuICAgICAgICByZXR1cm4gaUYgLSAxO1xuICAgICAgfVxuICAgIH0gLy8gVG8gZ2V0IGxhc3QgcG9pbnQgb2YgcGF0aCBzZWdtZW50LCBtb3ZlIGFsb25nIGRpYWdvbmFsIG9mIGNvbW1vbiBpdGVtcy5cblxuICAgIGFJbmRleFByZXYxID0gYUluZGV4ZXNGW2lGXTtcbiAgICBhSW5kZXhlc0ZbaUZdID1cbiAgICAgIGFGaXJzdCArXG4gICAgICBjb3VudENvbW1vbkl0ZW1zRihhRmlyc3QgKyAxLCBhRW5kLCBiRiArIGFGaXJzdCAtIGtGICsgMSwgYkVuZCwgaXNDb21tb24pO1xuICB9XG5cbiAgcmV0dXJuIGlNYXhGO1xufTsgLy8gQSBzaW1wbGUgZnVuY3Rpb24gdG8gZXh0ZW5kIHJldmVyc2UgcGF0aHMgZnJvbSAoZCAtIDEpIHRvIGQgY2hhbmdlc1xuLy8gd2hlbiByZXZlcnNlIGFuZCBmb3J3YXJkIHBhdGhzIGNhbm5vdCB5ZXQgb3ZlcmxhcC5cblxuY29uc3QgZXh0ZW5kUGF0aHNSID0gKGQsIGFTdGFydCwgYlN0YXJ0LCBiUiwgaXNDb21tb24sIGFJbmRleGVzUiwgaU1heFIpID0+IHtcbiAgLy8gVW5yb2xsIHRoZSBmaXJzdCBpdGVyYXRpb24uXG4gIGxldCBpUiA9IDA7XG4gIGxldCBrUiA9IGQ7IC8vIGtSID0gZCAtIDIgKiBpUlxuXG4gIGxldCBhRmlyc3QgPSBhSW5kZXhlc1JbaVJdOyAvLyBpbiBmaXJzdCBpdGVyYXRpb24gYWx3YXlzIGluc2VydFxuXG4gIGxldCBhSW5kZXhQcmV2MSA9IGFGaXJzdDsgLy8gcHJldiB2YWx1ZSBvZiBbaVIgLSAxXSBpbiBuZXh0IGl0ZXJhdGlvblxuXG4gIGFJbmRleGVzUltpUl0gLT0gY291bnRDb21tb25JdGVtc1IoXG4gICAgYVN0YXJ0LFxuICAgIGFGaXJzdCAtIDEsXG4gICAgYlN0YXJ0LFxuICAgIGJSICsgYUZpcnN0IC0ga1IgLSAxLFxuICAgIGlzQ29tbW9uXG4gICk7IC8vIE9wdGltaXphdGlvbjogc2tpcCBkaWFnb25hbHMgaW4gd2hpY2ggcGF0aHMgY2Fubm90IGV2ZXIgb3ZlcmxhcC5cblxuICBjb25zdCBuUiA9IGQgPCBpTWF4UiA/IGQgOiBpTWF4UjsgLy8gVGhlIGRpYWdvbmFscyBrUiBhcmUgb2RkIHdoZW4gZCBpcyBvZGQgYW5kIGV2ZW4gd2hlbiBkIGlzIGV2ZW4uXG5cbiAgZm9yIChpUiArPSAxLCBrUiAtPSAyOyBpUiA8PSBuUjsgaVIgKz0gMSwga1IgLT0gMikge1xuICAgIC8vIFRvIGdldCBmaXJzdCBwb2ludCBvZiBwYXRoIHNlZ21lbnQsIG1vdmUgb25lIGNoYW5nZSBpbiByZXZlcnNlIGRpcmVjdGlvblxuICAgIC8vIGZyb20gbGFzdCBwb2ludCBvZiBwcmV2aW91cyBwYXRoIHNlZ21lbnQgaW4gYW4gYWRqYWNlbnQgZGlhZ29uYWwuXG4gICAgLy8gSW4gbGFzdCBwb3NzaWJsZSBpdGVyYXRpb24gd2hlbiBpUiA9PT0gZCBhbmQga1IgPT09IC1kIGFsd2F5cyBkZWxldGUuXG4gICAgaWYgKGlSICE9PSBkICYmIGFJbmRleGVzUltpUl0gPCBhSW5kZXhQcmV2MSkge1xuICAgICAgYUZpcnN0ID0gYUluZGV4ZXNSW2lSXTsgLy8gdmVydGljYWwgdG8gaW5zZXJ0IGZyb20gYlxuICAgIH0gZWxzZSB7XG4gICAgICBhRmlyc3QgPSBhSW5kZXhQcmV2MSAtIDE7IC8vIGhvcml6b250YWwgdG8gZGVsZXRlIGZyb20gYVxuXG4gICAgICBpZiAoYUZpcnN0IDwgYVN0YXJ0KSB7XG4gICAgICAgIC8vIE9wdGltaXphdGlvbjogZGVsZXRlIG1vdmVkIHBhc3QgbGVmdCBvZiBncmFwaC5cbiAgICAgICAgcmV0dXJuIGlSIC0gMTtcbiAgICAgIH1cbiAgICB9IC8vIFRvIGdldCBsYXN0IHBvaW50IG9mIHBhdGggc2VnbWVudCwgbW92ZSBhbG9uZyBkaWFnb25hbCBvZiBjb21tb24gaXRlbXMuXG5cbiAgICBhSW5kZXhQcmV2MSA9IGFJbmRleGVzUltpUl07XG4gICAgYUluZGV4ZXNSW2lSXSA9XG4gICAgICBhRmlyc3QgLVxuICAgICAgY291bnRDb21tb25JdGVtc1IoXG4gICAgICAgIGFTdGFydCxcbiAgICAgICAgYUZpcnN0IC0gMSxcbiAgICAgICAgYlN0YXJ0LFxuICAgICAgICBiUiArIGFGaXJzdCAtIGtSIC0gMSxcbiAgICAgICAgaXNDb21tb25cbiAgICAgICk7XG4gIH1cblxuICByZXR1cm4gaU1heFI7XG59OyAvLyBBIGNvbXBsZXRlIGZ1bmN0aW9uIHRvIGV4dGVuZCBmb3J3YXJkIHBhdGhzIGZyb20gKGQgLSAxKSB0byBkIGNoYW5nZXMuXG4vLyBSZXR1cm4gdHJ1ZSBpZiBhIHBhdGggb3ZlcmxhcHMgcmV2ZXJzZSBwYXRoIG9mIChkIC0gMSkgY2hhbmdlcyBpbiBpdHMgZGlhZ29uYWwuXG5cbmNvbnN0IGV4dGVuZE92ZXJsYXBwYWJsZVBhdGhzRiA9IChcbiAgZCxcbiAgYVN0YXJ0LFxuICBhRW5kLFxuICBiU3RhcnQsXG4gIGJFbmQsXG4gIGlzQ29tbW9uLFxuICBhSW5kZXhlc0YsXG4gIGlNYXhGLFxuICBhSW5kZXhlc1IsXG4gIGlNYXhSLFxuICBkaXZpc2lvblxuKSA9PiB7XG4gIGNvbnN0IGJGID0gYlN0YXJ0IC0gYVN0YXJ0OyAvLyBiSW5kZXggPSBiRiArIGFJbmRleCAtIGtGXG5cbiAgY29uc3QgYUxlbmd0aCA9IGFFbmQgLSBhU3RhcnQ7XG4gIGNvbnN0IGJMZW5ndGggPSBiRW5kIC0gYlN0YXJ0O1xuICBjb25zdCBiYURlbHRhTGVuZ3RoID0gYkxlbmd0aCAtIGFMZW5ndGg7IC8vIGtGID0ga1IgLSBiYURlbHRhTGVuZ3RoXG4gIC8vIFJhbmdlIG9mIGRpYWdvbmFscyBpbiB3aGljaCBmb3J3YXJkIGFuZCByZXZlcnNlIHBhdGhzIG1pZ2h0IG92ZXJsYXAuXG5cbiAgY29uc3Qga01pbk92ZXJsYXBGID0gLWJhRGVsdGFMZW5ndGggLSAoZCAtIDEpOyAvLyAtKGQgLSAxKSA8PSBrUlxuXG4gIGNvbnN0IGtNYXhPdmVybGFwRiA9IC1iYURlbHRhTGVuZ3RoICsgKGQgLSAxKTsgLy8ga1IgPD0gKGQgLSAxKVxuXG4gIGxldCBhSW5kZXhQcmV2MSA9IE5PVF9ZRVRfU0VUOyAvLyBwcmV2IHZhbHVlIG9mIFtpRiAtIDFdIGluIG5leHQgaXRlcmF0aW9uXG4gIC8vIE9wdGltaXphdGlvbjogc2tpcCBkaWFnb25hbHMgaW4gd2hpY2ggcGF0aHMgY2Fubm90IGV2ZXIgb3ZlcmxhcC5cblxuICBjb25zdCBuRiA9IGQgPCBpTWF4RiA/IGQgOiBpTWF4RjsgLy8gVGhlIGRpYWdvbmFscyBrRiA9IDIgKiBpRiAtIGQgYXJlIG9kZCB3aGVuIGQgaXMgb2RkIGFuZCBldmVuIHdoZW4gZCBpcyBldmVuLlxuXG4gIGZvciAobGV0IGlGID0gMCwga0YgPSAtZDsgaUYgPD0gbkY7IGlGICs9IDEsIGtGICs9IDIpIHtcbiAgICAvLyBUbyBnZXQgZmlyc3QgcG9pbnQgb2YgcGF0aCBzZWdtZW50LCBtb3ZlIG9uZSBjaGFuZ2UgaW4gZm9yd2FyZCBkaXJlY3Rpb25cbiAgICAvLyBmcm9tIGxhc3QgcG9pbnQgb2YgcHJldmlvdXMgcGF0aCBzZWdtZW50IGluIGFuIGFkamFjZW50IGRpYWdvbmFsLlxuICAgIC8vIEluIGZpcnN0IGl0ZXJhdGlvbiB3aGVuIGlGID09PSAwIGFuZCBrRiA9PT0gLWQgYWx3YXlzIGluc2VydC5cbiAgICAvLyBJbiBsYXN0IHBvc3NpYmxlIGl0ZXJhdGlvbiB3aGVuIGlGID09PSBkIGFuZCBrRiA9PT0gZCBhbHdheXMgZGVsZXRlLlxuICAgIGNvbnN0IGluc2VydCA9IGlGID09PSAwIHx8IChpRiAhPT0gZCAmJiBhSW5kZXhQcmV2MSA8IGFJbmRleGVzRltpRl0pO1xuICAgIGNvbnN0IGFMYXN0UHJldiA9IGluc2VydCA/IGFJbmRleGVzRltpRl0gOiBhSW5kZXhQcmV2MTtcbiAgICBjb25zdCBhRmlyc3QgPSBpbnNlcnRcbiAgICAgID8gYUxhc3RQcmV2IC8vIHZlcnRpY2FsIHRvIGluc2VydCBmcm9tIGJcbiAgICAgIDogYUxhc3RQcmV2ICsgMTsgLy8gaG9yaXpvbnRhbCB0byBkZWxldGUgZnJvbSBhXG4gICAgLy8gVG8gZ2V0IGxhc3QgcG9pbnQgb2YgcGF0aCBzZWdtZW50LCBtb3ZlIGFsb25nIGRpYWdvbmFsIG9mIGNvbW1vbiBpdGVtcy5cblxuICAgIGNvbnN0IGJGaXJzdCA9IGJGICsgYUZpcnN0IC0ga0Y7XG4gICAgY29uc3QgbkNvbW1vbkYgPSBjb3VudENvbW1vbkl0ZW1zRihcbiAgICAgIGFGaXJzdCArIDEsXG4gICAgICBhRW5kLFxuICAgICAgYkZpcnN0ICsgMSxcbiAgICAgIGJFbmQsXG4gICAgICBpc0NvbW1vblxuICAgICk7XG4gICAgY29uc3QgYUxhc3QgPSBhRmlyc3QgKyBuQ29tbW9uRjtcbiAgICBhSW5kZXhQcmV2MSA9IGFJbmRleGVzRltpRl07XG4gICAgYUluZGV4ZXNGW2lGXSA9IGFMYXN0O1xuXG4gICAgaWYgKGtNaW5PdmVybGFwRiA8PSBrRiAmJiBrRiA8PSBrTWF4T3ZlcmxhcEYpIHtcbiAgICAgIC8vIFNvbHZlIGZvciBpUiBvZiByZXZlcnNlIHBhdGggd2l0aCAoZCAtIDEpIGNoYW5nZXMgaW4gZGlhZ29uYWwga0Y6XG4gICAgICAvLyBrUiA9IGtGICsgYmFEZWx0YUxlbmd0aFxuICAgICAgLy8ga1IgPSAoZCAtIDEpIC0gMiAqIGlSXG4gICAgICBjb25zdCBpUiA9IChkIC0gMSAtIChrRiArIGJhRGVsdGFMZW5ndGgpKSAvIDI7IC8vIElmIHRoaXMgZm9yd2FyZCBwYXRoIG92ZXJsYXBzIHRoZSByZXZlcnNlIHBhdGggaW4gdGhpcyBkaWFnb25hbCxcbiAgICAgIC8vIHRoZW4gdGhpcyBpcyB0aGUgbWlkZGxlIGNoYW5nZSBvZiB0aGUgaW5kZXggaW50ZXJ2YWxzLlxuXG4gICAgICBpZiAoaVIgPD0gaU1heFIgJiYgYUluZGV4ZXNSW2lSXSAtIDEgPD0gYUxhc3QpIHtcbiAgICAgICAgLy8gVW5saWtlIHRoZSBNeWVycyBhbGdvcml0aG0gd2hpY2ggZmluZHMgb25seSB0aGUgbWlkZGxlIOKAnHNuYWtl4oCdXG4gICAgICAgIC8vIHRoaXMgcGFja2FnZSBjYW4gZmluZCB0d28gY29tbW9uIHN1YnNlcXVlbmNlcyBwZXIgZGl2aXNpb24uXG4gICAgICAgIC8vIExhc3QgcG9pbnQgb2YgcHJldmlvdXMgcGF0aCBzZWdtZW50IGlzIG9uIGFuIGFkamFjZW50IGRpYWdvbmFsLlxuICAgICAgICBjb25zdCBiTGFzdFByZXYgPSBiRiArIGFMYXN0UHJldiAtIChpbnNlcnQgPyBrRiArIDEgOiBrRiAtIDEpOyAvLyBCZWNhdXNlIG9mIGludmFyaWFudCB0aGF0IGludGVydmFscyBwcmVjZWRpbmcgdGhlIG1pZGRsZSBjaGFuZ2VcbiAgICAgICAgLy8gY2Fubm90IGhhdmUgY29tbW9uIGl0ZW1zIGF0IHRoZSBlbmQsXG4gICAgICAgIC8vIG1vdmUgaW4gcmV2ZXJzZSBkaXJlY3Rpb24gYWxvbmcgYSBkaWFnb25hbCBvZiBjb21tb24gaXRlbXMuXG5cbiAgICAgICAgY29uc3QgbkNvbW1vblIgPSBjb3VudENvbW1vbkl0ZW1zUihcbiAgICAgICAgICBhU3RhcnQsXG4gICAgICAgICAgYUxhc3RQcmV2LFxuICAgICAgICAgIGJTdGFydCxcbiAgICAgICAgICBiTGFzdFByZXYsXG4gICAgICAgICAgaXNDb21tb25cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgYUluZGV4UHJldkZpcnN0ID0gYUxhc3RQcmV2IC0gbkNvbW1vblI7XG4gICAgICAgIGNvbnN0IGJJbmRleFByZXZGaXJzdCA9IGJMYXN0UHJldiAtIG5Db21tb25SO1xuICAgICAgICBjb25zdCBhRW5kUHJlY2VkaW5nID0gYUluZGV4UHJldkZpcnN0ICsgMTtcbiAgICAgICAgY29uc3QgYkVuZFByZWNlZGluZyA9IGJJbmRleFByZXZGaXJzdCArIDE7XG4gICAgICAgIGRpdmlzaW9uLm5DaGFuZ2VQcmVjZWRpbmcgPSBkIC0gMTtcblxuICAgICAgICBpZiAoZCAtIDEgPT09IGFFbmRQcmVjZWRpbmcgKyBiRW5kUHJlY2VkaW5nIC0gYVN0YXJ0IC0gYlN0YXJ0KSB7XG4gICAgICAgICAgLy8gT3B0aW1pemF0aW9uOiBudW1iZXIgb2YgcHJlY2VkaW5nIGNoYW5nZXMgaW4gZm9yd2FyZCBkaXJlY3Rpb25cbiAgICAgICAgICAvLyBpcyBlcXVhbCB0byBudW1iZXIgb2YgaXRlbXMgaW4gcHJlY2VkaW5nIGludGVydmFsLFxuICAgICAgICAgIC8vIHRoZXJlZm9yZSBpdCBjYW5ub3QgY29udGFpbiBhbnkgY29tbW9uIGl0ZW1zLlxuICAgICAgICAgIGRpdmlzaW9uLmFFbmRQcmVjZWRpbmcgPSBhU3RhcnQ7XG4gICAgICAgICAgZGl2aXNpb24uYkVuZFByZWNlZGluZyA9IGJTdGFydDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXZpc2lvbi5hRW5kUHJlY2VkaW5nID0gYUVuZFByZWNlZGluZztcbiAgICAgICAgICBkaXZpc2lvbi5iRW5kUHJlY2VkaW5nID0gYkVuZFByZWNlZGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGRpdmlzaW9uLm5Db21tb25QcmVjZWRpbmcgPSBuQ29tbW9uUjtcblxuICAgICAgICBpZiAobkNvbW1vblIgIT09IDApIHtcbiAgICAgICAgICBkaXZpc2lvbi5hQ29tbW9uUHJlY2VkaW5nID0gYUVuZFByZWNlZGluZztcbiAgICAgICAgICBkaXZpc2lvbi5iQ29tbW9uUHJlY2VkaW5nID0gYkVuZFByZWNlZGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGRpdmlzaW9uLm5Db21tb25Gb2xsb3dpbmcgPSBuQ29tbW9uRjtcblxuICAgICAgICBpZiAobkNvbW1vbkYgIT09IDApIHtcbiAgICAgICAgICBkaXZpc2lvbi5hQ29tbW9uRm9sbG93aW5nID0gYUZpcnN0ICsgMTtcbiAgICAgICAgICBkaXZpc2lvbi5iQ29tbW9uRm9sbG93aW5nID0gYkZpcnN0ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFTdGFydEZvbGxvd2luZyA9IGFMYXN0ICsgMTtcbiAgICAgICAgY29uc3QgYlN0YXJ0Rm9sbG93aW5nID0gYkZpcnN0ICsgbkNvbW1vbkYgKyAxO1xuICAgICAgICBkaXZpc2lvbi5uQ2hhbmdlRm9sbG93aW5nID0gZCAtIDE7XG5cbiAgICAgICAgaWYgKGQgLSAxID09PSBhRW5kICsgYkVuZCAtIGFTdGFydEZvbGxvd2luZyAtIGJTdGFydEZvbGxvd2luZykge1xuICAgICAgICAgIC8vIE9wdGltaXphdGlvbjogbnVtYmVyIG9mIGNoYW5nZXMgaW4gcmV2ZXJzZSBkaXJlY3Rpb25cbiAgICAgICAgICAvLyBpcyBlcXVhbCB0byBudW1iZXIgb2YgaXRlbXMgaW4gZm9sbG93aW5nIGludGVydmFsLFxuICAgICAgICAgIC8vIHRoZXJlZm9yZSBpdCBjYW5ub3QgY29udGFpbiBhbnkgY29tbW9uIGl0ZW1zLlxuICAgICAgICAgIGRpdmlzaW9uLmFTdGFydEZvbGxvd2luZyA9IGFFbmQ7XG4gICAgICAgICAgZGl2aXNpb24uYlN0YXJ0Rm9sbG93aW5nID0gYkVuZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXZpc2lvbi5hU3RhcnRGb2xsb3dpbmcgPSBhU3RhcnRGb2xsb3dpbmc7XG4gICAgICAgICAgZGl2aXNpb24uYlN0YXJ0Rm9sbG93aW5nID0gYlN0YXJ0Rm9sbG93aW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTsgLy8gQSBjb21wbGV0ZSBmdW5jdGlvbiB0byBleHRlbmQgcmV2ZXJzZSBwYXRocyBmcm9tIChkIC0gMSkgdG8gZCBjaGFuZ2VzLlxuLy8gUmV0dXJuIHRydWUgaWYgYSBwYXRoIG92ZXJsYXBzIGZvcndhcmQgcGF0aCBvZiBkIGNoYW5nZXMgaW4gaXRzIGRpYWdvbmFsLlxuXG5jb25zdCBleHRlbmRPdmVybGFwcGFibGVQYXRoc1IgPSAoXG4gIGQsXG4gIGFTdGFydCxcbiAgYUVuZCxcbiAgYlN0YXJ0LFxuICBiRW5kLFxuICBpc0NvbW1vbixcbiAgYUluZGV4ZXNGLFxuICBpTWF4RixcbiAgYUluZGV4ZXNSLFxuICBpTWF4UixcbiAgZGl2aXNpb25cbikgPT4ge1xuICBjb25zdCBiUiA9IGJFbmQgLSBhRW5kOyAvLyBiSW5kZXggPSBiUiArIGFJbmRleCAtIGtSXG5cbiAgY29uc3QgYUxlbmd0aCA9IGFFbmQgLSBhU3RhcnQ7XG4gIGNvbnN0IGJMZW5ndGggPSBiRW5kIC0gYlN0YXJ0O1xuICBjb25zdCBiYURlbHRhTGVuZ3RoID0gYkxlbmd0aCAtIGFMZW5ndGg7IC8vIGtSID0ga0YgKyBiYURlbHRhTGVuZ3RoXG4gIC8vIFJhbmdlIG9mIGRpYWdvbmFscyBpbiB3aGljaCBmb3J3YXJkIGFuZCByZXZlcnNlIHBhdGhzIG1pZ2h0IG92ZXJsYXAuXG5cbiAgY29uc3Qga01pbk92ZXJsYXBSID0gYmFEZWx0YUxlbmd0aCAtIGQ7IC8vIC1kIDw9IGtGXG5cbiAgY29uc3Qga01heE92ZXJsYXBSID0gYmFEZWx0YUxlbmd0aCArIGQ7IC8vIGtGIDw9IGRcblxuICBsZXQgYUluZGV4UHJldjEgPSBOT1RfWUVUX1NFVDsgLy8gcHJldiB2YWx1ZSBvZiBbaVIgLSAxXSBpbiBuZXh0IGl0ZXJhdGlvblxuICAvLyBPcHRpbWl6YXRpb246IHNraXAgZGlhZ29uYWxzIGluIHdoaWNoIHBhdGhzIGNhbm5vdCBldmVyIG92ZXJsYXAuXG5cbiAgY29uc3QgblIgPSBkIDwgaU1heFIgPyBkIDogaU1heFI7IC8vIFRoZSBkaWFnb25hbHMga1IgPSBkIC0gMiAqIGlSIGFyZSBvZGQgd2hlbiBkIGlzIG9kZCBhbmQgZXZlbiB3aGVuIGQgaXMgZXZlbi5cblxuICBmb3IgKGxldCBpUiA9IDAsIGtSID0gZDsgaVIgPD0gblI7IGlSICs9IDEsIGtSIC09IDIpIHtcbiAgICAvLyBUbyBnZXQgZmlyc3QgcG9pbnQgb2YgcGF0aCBzZWdtZW50LCBtb3ZlIG9uZSBjaGFuZ2UgaW4gcmV2ZXJzZSBkaXJlY3Rpb25cbiAgICAvLyBmcm9tIGxhc3QgcG9pbnQgb2YgcHJldmlvdXMgcGF0aCBzZWdtZW50IGluIGFuIGFkamFjZW50IGRpYWdvbmFsLlxuICAgIC8vIEluIGZpcnN0IGl0ZXJhdGlvbiB3aGVuIGlSID09PSAwIGFuZCBrUiA9PT0gZCBhbHdheXMgaW5zZXJ0LlxuICAgIC8vIEluIGxhc3QgcG9zc2libGUgaXRlcmF0aW9uIHdoZW4gaVIgPT09IGQgYW5kIGtSID09PSAtZCBhbHdheXMgZGVsZXRlLlxuICAgIGNvbnN0IGluc2VydCA9IGlSID09PSAwIHx8IChpUiAhPT0gZCAmJiBhSW5kZXhlc1JbaVJdIDwgYUluZGV4UHJldjEpO1xuICAgIGNvbnN0IGFMYXN0UHJldiA9IGluc2VydCA/IGFJbmRleGVzUltpUl0gOiBhSW5kZXhQcmV2MTtcbiAgICBjb25zdCBhRmlyc3QgPSBpbnNlcnRcbiAgICAgID8gYUxhc3RQcmV2IC8vIHZlcnRpY2FsIHRvIGluc2VydCBmcm9tIGJcbiAgICAgIDogYUxhc3RQcmV2IC0gMTsgLy8gaG9yaXpvbnRhbCB0byBkZWxldGUgZnJvbSBhXG4gICAgLy8gVG8gZ2V0IGxhc3QgcG9pbnQgb2YgcGF0aCBzZWdtZW50LCBtb3ZlIGFsb25nIGRpYWdvbmFsIG9mIGNvbW1vbiBpdGVtcy5cblxuICAgIGNvbnN0IGJGaXJzdCA9IGJSICsgYUZpcnN0IC0ga1I7XG4gICAgY29uc3QgbkNvbW1vblIgPSBjb3VudENvbW1vbkl0ZW1zUihcbiAgICAgIGFTdGFydCxcbiAgICAgIGFGaXJzdCAtIDEsXG4gICAgICBiU3RhcnQsXG4gICAgICBiRmlyc3QgLSAxLFxuICAgICAgaXNDb21tb25cbiAgICApO1xuICAgIGNvbnN0IGFMYXN0ID0gYUZpcnN0IC0gbkNvbW1vblI7XG4gICAgYUluZGV4UHJldjEgPSBhSW5kZXhlc1JbaVJdO1xuICAgIGFJbmRleGVzUltpUl0gPSBhTGFzdDtcblxuICAgIGlmIChrTWluT3ZlcmxhcFIgPD0ga1IgJiYga1IgPD0ga01heE92ZXJsYXBSKSB7XG4gICAgICAvLyBTb2x2ZSBmb3IgaUYgb2YgZm9yd2FyZCBwYXRoIHdpdGggZCBjaGFuZ2VzIGluIGRpYWdvbmFsIGtSOlxuICAgICAgLy8ga0YgPSBrUiAtIGJhRGVsdGFMZW5ndGhcbiAgICAgIC8vIGtGID0gMiAqIGlGIC0gZFxuICAgICAgY29uc3QgaUYgPSAoZCArIChrUiAtIGJhRGVsdGFMZW5ndGgpKSAvIDI7IC8vIElmIHRoaXMgcmV2ZXJzZSBwYXRoIG92ZXJsYXBzIHRoZSBmb3J3YXJkIHBhdGggaW4gdGhpcyBkaWFnb25hbCxcbiAgICAgIC8vIHRoZW4gdGhpcyBpcyBhIG1pZGRsZSBjaGFuZ2Ugb2YgdGhlIGluZGV4IGludGVydmFscy5cblxuICAgICAgaWYgKGlGIDw9IGlNYXhGICYmIGFMYXN0IC0gMSA8PSBhSW5kZXhlc0ZbaUZdKSB7XG4gICAgICAgIGNvbnN0IGJMYXN0ID0gYkZpcnN0IC0gbkNvbW1vblI7XG4gICAgICAgIGRpdmlzaW9uLm5DaGFuZ2VQcmVjZWRpbmcgPSBkO1xuXG4gICAgICAgIGlmIChkID09PSBhTGFzdCArIGJMYXN0IC0gYVN0YXJ0IC0gYlN0YXJ0KSB7XG4gICAgICAgICAgLy8gT3B0aW1pemF0aW9uOiBudW1iZXIgb2YgY2hhbmdlcyBpbiByZXZlcnNlIGRpcmVjdGlvblxuICAgICAgICAgIC8vIGlzIGVxdWFsIHRvIG51bWJlciBvZiBpdGVtcyBpbiBwcmVjZWRpbmcgaW50ZXJ2YWwsXG4gICAgICAgICAgLy8gdGhlcmVmb3JlIGl0IGNhbm5vdCBjb250YWluIGFueSBjb21tb24gaXRlbXMuXG4gICAgICAgICAgZGl2aXNpb24uYUVuZFByZWNlZGluZyA9IGFTdGFydDtcbiAgICAgICAgICBkaXZpc2lvbi5iRW5kUHJlY2VkaW5nID0gYlN0YXJ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpdmlzaW9uLmFFbmRQcmVjZWRpbmcgPSBhTGFzdDtcbiAgICAgICAgICBkaXZpc2lvbi5iRW5kUHJlY2VkaW5nID0gYkxhc3Q7XG4gICAgICAgIH1cblxuICAgICAgICBkaXZpc2lvbi5uQ29tbW9uUHJlY2VkaW5nID0gbkNvbW1vblI7XG5cbiAgICAgICAgaWYgKG5Db21tb25SICE9PSAwKSB7XG4gICAgICAgICAgLy8gVGhlIGxhc3QgcG9pbnQgb2YgcmV2ZXJzZSBwYXRoIHNlZ21lbnQgaXMgc3RhcnQgb2YgY29tbW9uIHN1YnNlcXVlbmNlLlxuICAgICAgICAgIGRpdmlzaW9uLmFDb21tb25QcmVjZWRpbmcgPSBhTGFzdDtcbiAgICAgICAgICBkaXZpc2lvbi5iQ29tbW9uUHJlY2VkaW5nID0gYkxhc3Q7XG4gICAgICAgIH1cblxuICAgICAgICBkaXZpc2lvbi5uQ2hhbmdlRm9sbG93aW5nID0gZCAtIDE7XG5cbiAgICAgICAgaWYgKGQgPT09IDEpIHtcbiAgICAgICAgICAvLyBUaGVyZSBpcyBubyBwcmV2aW91cyBwYXRoIHNlZ21lbnQuXG4gICAgICAgICAgZGl2aXNpb24ubkNvbW1vbkZvbGxvd2luZyA9IDA7XG4gICAgICAgICAgZGl2aXNpb24uYVN0YXJ0Rm9sbG93aW5nID0gYUVuZDtcbiAgICAgICAgICBkaXZpc2lvbi5iU3RhcnRGb2xsb3dpbmcgPSBiRW5kO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFVubGlrZSB0aGUgTXllcnMgYWxnb3JpdGhtIHdoaWNoIGZpbmRzIG9ubHkgdGhlIG1pZGRsZSDigJxzbmFrZeKAnVxuICAgICAgICAgIC8vIHRoaXMgcGFja2FnZSBjYW4gZmluZCB0d28gY29tbW9uIHN1YnNlcXVlbmNlcyBwZXIgZGl2aXNpb24uXG4gICAgICAgICAgLy8gTGFzdCBwb2ludCBvZiBwcmV2aW91cyBwYXRoIHNlZ21lbnQgaXMgb24gYW4gYWRqYWNlbnQgZGlhZ29uYWwuXG4gICAgICAgICAgY29uc3QgYkxhc3RQcmV2ID0gYlIgKyBhTGFzdFByZXYgLSAoaW5zZXJ0ID8ga1IgLSAxIDoga1IgKyAxKTsgLy8gQmVjYXVzZSBvZiBpbnZhcmlhbnQgdGhhdCBpbnRlcnZhbHMgZm9sbG93aW5nIHRoZSBtaWRkbGUgY2hhbmdlXG4gICAgICAgICAgLy8gY2Fubm90IGhhdmUgY29tbW9uIGl0ZW1zIGF0IHRoZSBzdGFydCxcbiAgICAgICAgICAvLyBtb3ZlIGluIGZvcndhcmQgZGlyZWN0aW9uIGFsb25nIGEgZGlhZ29uYWwgb2YgY29tbW9uIGl0ZW1zLlxuXG4gICAgICAgICAgY29uc3QgbkNvbW1vbkYgPSBjb3VudENvbW1vbkl0ZW1zRihcbiAgICAgICAgICAgIGFMYXN0UHJldixcbiAgICAgICAgICAgIGFFbmQsXG4gICAgICAgICAgICBiTGFzdFByZXYsXG4gICAgICAgICAgICBiRW5kLFxuICAgICAgICAgICAgaXNDb21tb25cbiAgICAgICAgICApO1xuICAgICAgICAgIGRpdmlzaW9uLm5Db21tb25Gb2xsb3dpbmcgPSBuQ29tbW9uRjtcblxuICAgICAgICAgIGlmIChuQ29tbW9uRiAhPT0gMCkge1xuICAgICAgICAgICAgLy8gVGhlIGxhc3QgcG9pbnQgb2YgcmV2ZXJzZSBwYXRoIHNlZ21lbnQgaXMgc3RhcnQgb2YgY29tbW9uIHN1YnNlcXVlbmNlLlxuICAgICAgICAgICAgZGl2aXNpb24uYUNvbW1vbkZvbGxvd2luZyA9IGFMYXN0UHJldjtcbiAgICAgICAgICAgIGRpdmlzaW9uLmJDb21tb25Gb2xsb3dpbmcgPSBiTGFzdFByZXY7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgYVN0YXJ0Rm9sbG93aW5nID0gYUxhc3RQcmV2ICsgbkNvbW1vbkY7IC8vIGFGaXJzdFByZXZcblxuICAgICAgICAgIGNvbnN0IGJTdGFydEZvbGxvd2luZyA9IGJMYXN0UHJldiArIG5Db21tb25GOyAvLyBiRmlyc3RQcmV2XG5cbiAgICAgICAgICBpZiAoZCAtIDEgPT09IGFFbmQgKyBiRW5kIC0gYVN0YXJ0Rm9sbG93aW5nIC0gYlN0YXJ0Rm9sbG93aW5nKSB7XG4gICAgICAgICAgICAvLyBPcHRpbWl6YXRpb246IG51bWJlciBvZiBjaGFuZ2VzIGluIGZvcndhcmQgZGlyZWN0aW9uXG4gICAgICAgICAgICAvLyBpcyBlcXVhbCB0byBudW1iZXIgb2YgaXRlbXMgaW4gZm9sbG93aW5nIGludGVydmFsLFxuICAgICAgICAgICAgLy8gdGhlcmVmb3JlIGl0IGNhbm5vdCBjb250YWluIGFueSBjb21tb24gaXRlbXMuXG4gICAgICAgICAgICBkaXZpc2lvbi5hU3RhcnRGb2xsb3dpbmcgPSBhRW5kO1xuICAgICAgICAgICAgZGl2aXNpb24uYlN0YXJ0Rm9sbG93aW5nID0gYkVuZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGl2aXNpb24uYVN0YXJ0Rm9sbG93aW5nID0gYVN0YXJ0Rm9sbG93aW5nO1xuICAgICAgICAgICAgZGl2aXNpb24uYlN0YXJ0Rm9sbG93aW5nID0gYlN0YXJ0Rm9sbG93aW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07IC8vIEdpdmVuIGluZGV4IGludGVydmFscyBhbmQgaW5wdXQgZnVuY3Rpb24gdG8gY29tcGFyZSBpdGVtcyBhdCBpbmRleGVzLFxuLy8gZGl2aWRlIGF0IHRoZSBtaWRkbGUgY2hhbmdlLlxuLy9cbi8vIERPIE5PVCBDQUxMIGlmIHN0YXJ0ID09PSBlbmQsIGJlY2F1c2UgaW50ZXJ2YWwgY2Fubm90IGNvbnRhaW4gY29tbW9uIGl0ZW1zXG4vLyBhbmQgYmVjYXVzZSB0aGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgdGhlIOKAnG5vIG92ZXJsYXDigJ0gZXJyb3IuXG5cbmNvbnN0IGRpdmlkZSA9IChcbiAgbkNoYW5nZSxcbiAgYVN0YXJ0LFxuICBhRW5kLFxuICBiU3RhcnQsXG4gIGJFbmQsXG4gIGlzQ29tbW9uLFxuICBhSW5kZXhlc0YsXG4gIGFJbmRleGVzUixcbiAgZGl2aXNpb24gLy8gb3V0cHV0XG4pID0+IHtcbiAgY29uc3QgYkYgPSBiU3RhcnQgLSBhU3RhcnQ7IC8vIGJJbmRleCA9IGJGICsgYUluZGV4IC0ga0ZcblxuICBjb25zdCBiUiA9IGJFbmQgLSBhRW5kOyAvLyBiSW5kZXggPSBiUiArIGFJbmRleCAtIGtSXG5cbiAgY29uc3QgYUxlbmd0aCA9IGFFbmQgLSBhU3RhcnQ7XG4gIGNvbnN0IGJMZW5ndGggPSBiRW5kIC0gYlN0YXJ0OyAvLyBCZWNhdXNlIGdyYXBoIGhhcyBzcXVhcmUgb3IgcG9ydHJhaXQgb3JpZW50YXRpb24sXG4gIC8vIGxlbmd0aCBkaWZmZXJlbmNlIGlzIG1pbmltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIGluc2VydCBmcm9tIGIuXG4gIC8vIENvcnJlc3BvbmRpbmcgZm9yd2FyZCBhbmQgcmV2ZXJzZSBkaWFnb25hbHMgaW4gZ3JhcGhcbiAgLy8gZGVwZW5kIG9uIGxlbmd0aCBkaWZmZXJlbmNlIG9mIHRoZSBzZXF1ZW5jZXM6XG4gIC8vIGtGID0ga1IgLSBiYURlbHRhTGVuZ3RoXG4gIC8vIGtSID0ga0YgKyBiYURlbHRhTGVuZ3RoXG5cbiAgY29uc3QgYmFEZWx0YUxlbmd0aCA9IGJMZW5ndGggLSBhTGVuZ3RoOyAvLyBPcHRpbWl6YXRpb246IG1heCBkaWFnb25hbCBpbiBncmFwaCBpbnRlcnNlY3RzIGNvcm5lciBvZiBzaG9ydGVyIHNpZGUuXG5cbiAgbGV0IGlNYXhGID0gYUxlbmd0aDtcbiAgbGV0IGlNYXhSID0gYUxlbmd0aDsgLy8gSW5pdGlhbGl6ZSBubyBjaGFuZ2VzIHlldCBpbiBmb3J3YXJkIG9yIHJldmVyc2UgZGlyZWN0aW9uOlxuXG4gIGFJbmRleGVzRlswXSA9IGFTdGFydCAtIDE7IC8vIGF0IG9wZW4gc3RhcnQgb2YgaW50ZXJ2YWwsIG91dHNpZGUgY2xvc2VkIHN0YXJ0XG5cbiAgYUluZGV4ZXNSWzBdID0gYUVuZDsgLy8gYXQgb3BlbiBlbmQgb2YgaW50ZXJ2YWxcblxuICBpZiAoYmFEZWx0YUxlbmd0aCAlIDIgPT09IDApIHtcbiAgICAvLyBUaGUgbnVtYmVyIG9mIGNoYW5nZXMgaW4gcGF0aHMgaXMgMiAqIGQgaWYgbGVuZ3RoIGRpZmZlcmVuY2UgaXMgZXZlbi5cbiAgICBjb25zdCBkTWluID0gKG5DaGFuZ2UgfHwgYmFEZWx0YUxlbmd0aCkgLyAyO1xuICAgIGNvbnN0IGRNYXggPSAoYUxlbmd0aCArIGJMZW5ndGgpIC8gMjtcblxuICAgIGZvciAobGV0IGQgPSAxOyBkIDw9IGRNYXg7IGQgKz0gMSkge1xuICAgICAgaU1heEYgPSBleHRlbmRQYXRoc0YoZCwgYUVuZCwgYkVuZCwgYkYsIGlzQ29tbW9uLCBhSW5kZXhlc0YsIGlNYXhGKTtcblxuICAgICAgaWYgKGQgPCBkTWluKSB7XG4gICAgICAgIGlNYXhSID0gZXh0ZW5kUGF0aHNSKGQsIGFTdGFydCwgYlN0YXJ0LCBiUiwgaXNDb21tb24sIGFJbmRleGVzUiwgaU1heFIpO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgLy8gSWYgYSByZXZlcnNlIHBhdGggb3ZlcmxhcHMgYSBmb3J3YXJkIHBhdGggaW4gdGhlIHNhbWUgZGlhZ29uYWwsXG4gICAgICAgIC8vIHJldHVybiBhIGRpdmlzaW9uIG9mIHRoZSBpbmRleCBpbnRlcnZhbHMgYXQgdGhlIG1pZGRsZSBjaGFuZ2UuXG4gICAgICAgIGV4dGVuZE92ZXJsYXBwYWJsZVBhdGhzUihcbiAgICAgICAgICBkLFxuICAgICAgICAgIGFTdGFydCxcbiAgICAgICAgICBhRW5kLFxuICAgICAgICAgIGJTdGFydCxcbiAgICAgICAgICBiRW5kLFxuICAgICAgICAgIGlzQ29tbW9uLFxuICAgICAgICAgIGFJbmRleGVzRixcbiAgICAgICAgICBpTWF4RixcbiAgICAgICAgICBhSW5kZXhlc1IsXG4gICAgICAgICAgaU1heFIsXG4gICAgICAgICAgZGl2aXNpb25cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhlIG51bWJlciBvZiBjaGFuZ2VzIGluIHBhdGhzIGlzIDIgKiBkIC0gMSBpZiBsZW5ndGggZGlmZmVyZW5jZSBpcyBvZGQuXG4gICAgY29uc3QgZE1pbiA9ICgobkNoYW5nZSB8fCBiYURlbHRhTGVuZ3RoKSArIDEpIC8gMjtcbiAgICBjb25zdCBkTWF4ID0gKGFMZW5ndGggKyBiTGVuZ3RoICsgMSkgLyAyOyAvLyBVbnJvbGwgZmlyc3QgaGFsZiBpdGVyYXRpb24gc28gbG9vcCBleHRlbmRzIHRoZSByZWxldmFudCBwYWlycyBvZiBwYXRocy5cbiAgICAvLyBCZWNhdXNlIG9mIGludmFyaWFudCB0aGF0IGludGVydmFscyBoYXZlIG5vIGNvbW1vbiBpdGVtcyBhdCBzdGFydCBvciBlbmQsXG4gICAgLy8gYW5kIGxpbWl0YXRpb24gbm90IHRvIGNhbGwgZGl2aWRlIHdpdGggZW1wdHkgaW50ZXJ2YWxzLFxuICAgIC8vIHRoZXJlZm9yZSBpdCBjYW5ub3QgYmUgY2FsbGVkIGlmIGEgZm9yd2FyZCBwYXRoIHdpdGggb25lIGNoYW5nZVxuICAgIC8vIHdvdWxkIG92ZXJsYXAgYSByZXZlcnNlIHBhdGggd2l0aCBubyBjaGFuZ2VzLCBldmVuIGlmIGRNaW4gPT09IDEuXG5cbiAgICBsZXQgZCA9IDE7XG4gICAgaU1heEYgPSBleHRlbmRQYXRoc0YoZCwgYUVuZCwgYkVuZCwgYkYsIGlzQ29tbW9uLCBhSW5kZXhlc0YsIGlNYXhGKTtcblxuICAgIGZvciAoZCArPSAxOyBkIDw9IGRNYXg7IGQgKz0gMSkge1xuICAgICAgaU1heFIgPSBleHRlbmRQYXRoc1IoXG4gICAgICAgIGQgLSAxLFxuICAgICAgICBhU3RhcnQsXG4gICAgICAgIGJTdGFydCxcbiAgICAgICAgYlIsXG4gICAgICAgIGlzQ29tbW9uLFxuICAgICAgICBhSW5kZXhlc1IsXG4gICAgICAgIGlNYXhSXG4gICAgICApO1xuXG4gICAgICBpZiAoZCA8IGRNaW4pIHtcbiAgICAgICAgaU1heEYgPSBleHRlbmRQYXRoc0YoZCwgYUVuZCwgYkVuZCwgYkYsIGlzQ29tbW9uLCBhSW5kZXhlc0YsIGlNYXhGKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIC8vIElmIGEgZm9yd2FyZCBwYXRoIG92ZXJsYXBzIGEgcmV2ZXJzZSBwYXRoIGluIHRoZSBzYW1lIGRpYWdvbmFsLFxuICAgICAgICAvLyByZXR1cm4gYSBkaXZpc2lvbiBvZiB0aGUgaW5kZXggaW50ZXJ2YWxzIGF0IHRoZSBtaWRkbGUgY2hhbmdlLlxuICAgICAgICBleHRlbmRPdmVybGFwcGFibGVQYXRoc0YoXG4gICAgICAgICAgZCxcbiAgICAgICAgICBhU3RhcnQsXG4gICAgICAgICAgYUVuZCxcbiAgICAgICAgICBiU3RhcnQsXG4gICAgICAgICAgYkVuZCxcbiAgICAgICAgICBpc0NvbW1vbixcbiAgICAgICAgICBhSW5kZXhlc0YsXG4gICAgICAgICAgaU1heEYsXG4gICAgICAgICAgYUluZGV4ZXNSLFxuICAgICAgICAgIGlNYXhSLFxuICAgICAgICAgIGRpdmlzaW9uXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIGAke3BrZ306IG5vIG92ZXJsYXAgYVN0YXJ0PSR7YVN0YXJ0fSBhRW5kPSR7YUVuZH0gYlN0YXJ0PSR7YlN0YXJ0fSBiRW5kPSR7YkVuZH1gXG4gICk7XG59OyAvLyBHaXZlbiBpbmRleCBpbnRlcnZhbHMgYW5kIGlucHV0IGZ1bmN0aW9uIHRvIGNvbXBhcmUgaXRlbXMgYXQgaW5kZXhlcyxcbi8vIHJldHVybiBieSBvdXRwdXQgZnVuY3Rpb24gdGhlIG51bWJlciBvZiBhZGphY2VudCBpdGVtcyBhbmQgc3RhcnRpbmcgaW5kZXhlc1xuLy8gb2YgZWFjaCBjb21tb24gc3Vic2VxdWVuY2UuIERpdmlkZSBhbmQgY29ucXVlciB3aXRoIG9ubHkgbGluZWFyIHNwYWNlLlxuLy9cbi8vIFRoZSBpbmRleCBpbnRlcnZhbHMgYXJlIGhhbGYgb3BlbiBbc3RhcnQsIGVuZCkgbGlrZSBhcnJheSBzbGljZSBtZXRob2QuXG4vLyBETyBOT1QgQ0FMTCBpZiBzdGFydCA9PT0gZW5kLCBiZWNhdXNlIGludGVydmFsIGNhbm5vdCBjb250YWluIGNvbW1vbiBpdGVtc1xuLy8gYW5kIGJlY2F1c2UgZGl2aWRlIGZ1bmN0aW9uIHdpbGwgdGhyb3cgdGhlIOKAnG5vIG92ZXJsYXDigJ0gZXJyb3IuXG5cbmNvbnN0IGZpbmRTdWJzZXF1ZW5jZXMgPSAoXG4gIG5DaGFuZ2UsXG4gIGFTdGFydCxcbiAgYUVuZCxcbiAgYlN0YXJ0LFxuICBiRW5kLFxuICB0cmFuc3Bvc2VkLFxuICBjYWxsYmFja3MsXG4gIGFJbmRleGVzRixcbiAgYUluZGV4ZXNSLFxuICBkaXZpc2lvbiAvLyB0ZW1wb3JhcnkgbWVtb3J5LCBub3QgaW5wdXQgbm9yIG91dHB1dFxuKSA9PiB7XG4gIGlmIChiRW5kIC0gYlN0YXJ0IDwgYUVuZCAtIGFTdGFydCkge1xuICAgIC8vIFRyYW5zcG9zZSBncmFwaCBzbyBpdCBoYXMgcG9ydHJhaXQgaW5zdGVhZCBvZiBsYW5kc2NhcGUgb3JpZW50YXRpb24uXG4gICAgLy8gQWx3YXlzIGNvbXBhcmUgc2hvcnRlciB0byBsb25nZXIgc2VxdWVuY2UgZm9yIGNvbnNpc3RlbmN5IGFuZCBvcHRpbWl6YXRpb24uXG4gICAgdHJhbnNwb3NlZCA9ICF0cmFuc3Bvc2VkO1xuXG4gICAgaWYgKHRyYW5zcG9zZWQgJiYgY2FsbGJhY2tzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gTGF6aWx5IHdyYXAgY2FsbGJhY2sgZnVuY3Rpb25zIHRvIHN3YXAgYXJncyBpZiBncmFwaCBpcyB0cmFuc3Bvc2VkLlxuICAgICAgY29uc3QgX2NhbGxiYWNrcyQgPSBjYWxsYmFja3NbMF0sXG4gICAgICAgIGZvdW5kU3Vic2VxdWVuY2UgPSBfY2FsbGJhY2tzJC5mb3VuZFN1YnNlcXVlbmNlLFxuICAgICAgICBpc0NvbW1vbiA9IF9jYWxsYmFja3MkLmlzQ29tbW9uO1xuICAgICAgY2FsbGJhY2tzWzFdID0ge1xuICAgICAgICBmb3VuZFN1YnNlcXVlbmNlOiAoZnVuY3Rpb24oX2ZvdW5kU3Vic2VxdWVuY2UpIHtcbiAgICAgICAgICBmdW5jdGlvbiBmb3VuZFN1YnNlcXVlbmNlKF94LCBfeDIsIF94Mykge1xuICAgICAgICAgICAgcmV0dXJuIF9mb3VuZFN1YnNlcXVlbmNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm91bmRTdWJzZXF1ZW5jZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9mb3VuZFN1YnNlcXVlbmNlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybiBmb3VuZFN1YnNlcXVlbmNlO1xuICAgICAgICB9KSgobkNvbW1vbiwgYkNvbW1vbiwgYUNvbW1vbikgPT4ge1xuICAgICAgICAgIGZvdW5kU3Vic2VxdWVuY2UobkNvbW1vbiwgYUNvbW1vbiwgYkNvbW1vbik7XG4gICAgICAgIH0pLFxuICAgICAgICBpc0NvbW1vbjogKGZ1bmN0aW9uKF9pc0NvbW1vbikge1xuICAgICAgICAgIGZ1bmN0aW9uIGlzQ29tbW9uKF94NCwgX3g1KSB7XG4gICAgICAgICAgICByZXR1cm4gX2lzQ29tbW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNDb21tb24udG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfaXNDb21tb24udG9TdHJpbmcoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIGlzQ29tbW9uO1xuICAgICAgICB9KSgoYkluZGV4LCBhSW5kZXgpID0+IGlzQ29tbW9uKGFJbmRleCwgYkluZGV4KSlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgdFN0YXJ0ID0gYVN0YXJ0O1xuICAgIGNvbnN0IHRFbmQgPSBhRW5kO1xuICAgIGFTdGFydCA9IGJTdGFydDtcbiAgICBhRW5kID0gYkVuZDtcbiAgICBiU3RhcnQgPSB0U3RhcnQ7XG4gICAgYkVuZCA9IHRFbmQ7XG4gIH1cblxuICBjb25zdCBfY2FsbGJhY2tzID0gY2FsbGJhY2tzW3RyYW5zcG9zZWQgPyAxIDogMF0sXG4gICAgZm91bmRTdWJzZXF1ZW5jZSA9IF9jYWxsYmFja3MuZm91bmRTdWJzZXF1ZW5jZSxcbiAgICBpc0NvbW1vbiA9IF9jYWxsYmFja3MuaXNDb21tb247IC8vIERpdmlkZSB0aGUgaW5kZXggaW50ZXJ2YWxzIGF0IHRoZSBtaWRkbGUgY2hhbmdlLlxuXG4gIGRpdmlkZShcbiAgICBuQ2hhbmdlLFxuICAgIGFTdGFydCxcbiAgICBhRW5kLFxuICAgIGJTdGFydCxcbiAgICBiRW5kLFxuICAgIGlzQ29tbW9uLFxuICAgIGFJbmRleGVzRixcbiAgICBhSW5kZXhlc1IsXG4gICAgZGl2aXNpb25cbiAgKTtcbiAgY29uc3QgbkNoYW5nZVByZWNlZGluZyA9IGRpdmlzaW9uLm5DaGFuZ2VQcmVjZWRpbmcsXG4gICAgYUVuZFByZWNlZGluZyA9IGRpdmlzaW9uLmFFbmRQcmVjZWRpbmcsXG4gICAgYkVuZFByZWNlZGluZyA9IGRpdmlzaW9uLmJFbmRQcmVjZWRpbmcsXG4gICAgbkNvbW1vblByZWNlZGluZyA9IGRpdmlzaW9uLm5Db21tb25QcmVjZWRpbmcsXG4gICAgYUNvbW1vblByZWNlZGluZyA9IGRpdmlzaW9uLmFDb21tb25QcmVjZWRpbmcsXG4gICAgYkNvbW1vblByZWNlZGluZyA9IGRpdmlzaW9uLmJDb21tb25QcmVjZWRpbmcsXG4gICAgbkNvbW1vbkZvbGxvd2luZyA9IGRpdmlzaW9uLm5Db21tb25Gb2xsb3dpbmcsXG4gICAgYUNvbW1vbkZvbGxvd2luZyA9IGRpdmlzaW9uLmFDb21tb25Gb2xsb3dpbmcsXG4gICAgYkNvbW1vbkZvbGxvd2luZyA9IGRpdmlzaW9uLmJDb21tb25Gb2xsb3dpbmcsXG4gICAgbkNoYW5nZUZvbGxvd2luZyA9IGRpdmlzaW9uLm5DaGFuZ2VGb2xsb3dpbmcsXG4gICAgYVN0YXJ0Rm9sbG93aW5nID0gZGl2aXNpb24uYVN0YXJ0Rm9sbG93aW5nLFxuICAgIGJTdGFydEZvbGxvd2luZyA9IGRpdmlzaW9uLmJTdGFydEZvbGxvd2luZzsgLy8gVW5sZXNzIGVpdGhlciBpbmRleCBpbnRlcnZhbCBpcyBlbXB0eSwgdGhleSBtaWdodCBjb250YWluIGNvbW1vbiBpdGVtcy5cblxuICBpZiAoYVN0YXJ0IDwgYUVuZFByZWNlZGluZyAmJiBiU3RhcnQgPCBiRW5kUHJlY2VkaW5nKSB7XG4gICAgLy8gUmVjdXJzZWx5IGZpbmQgYW5kIHJldHVybiBjb21tb24gc3Vic2VxdWVuY2VzIHByZWNlZGluZyB0aGUgZGl2aXNpb24uXG4gICAgZmluZFN1YnNlcXVlbmNlcyhcbiAgICAgIG5DaGFuZ2VQcmVjZWRpbmcsXG4gICAgICBhU3RhcnQsXG4gICAgICBhRW5kUHJlY2VkaW5nLFxuICAgICAgYlN0YXJ0LFxuICAgICAgYkVuZFByZWNlZGluZyxcbiAgICAgIHRyYW5zcG9zZWQsXG4gICAgICBjYWxsYmFja3MsXG4gICAgICBhSW5kZXhlc0YsXG4gICAgICBhSW5kZXhlc1IsXG4gICAgICBkaXZpc2lvblxuICAgICk7XG4gIH0gLy8gUmV0dXJuIGNvbW1vbiBzdWJzZXF1ZW5jZXMgdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIG1pZGRsZSBjaGFuZ2UuXG5cbiAgaWYgKG5Db21tb25QcmVjZWRpbmcgIT09IDApIHtcbiAgICBmb3VuZFN1YnNlcXVlbmNlKG5Db21tb25QcmVjZWRpbmcsIGFDb21tb25QcmVjZWRpbmcsIGJDb21tb25QcmVjZWRpbmcpO1xuICB9XG5cbiAgaWYgKG5Db21tb25Gb2xsb3dpbmcgIT09IDApIHtcbiAgICBmb3VuZFN1YnNlcXVlbmNlKG5Db21tb25Gb2xsb3dpbmcsIGFDb21tb25Gb2xsb3dpbmcsIGJDb21tb25Gb2xsb3dpbmcpO1xuICB9IC8vIFVubGVzcyBlaXRoZXIgaW5kZXggaW50ZXJ2YWwgaXMgZW1wdHksIHRoZXkgbWlnaHQgY29udGFpbiBjb21tb24gaXRlbXMuXG5cbiAgaWYgKGFTdGFydEZvbGxvd2luZyA8IGFFbmQgJiYgYlN0YXJ0Rm9sbG93aW5nIDwgYkVuZCkge1xuICAgIC8vIFJlY3Vyc2VseSBmaW5kIGFuZCByZXR1cm4gY29tbW9uIHN1YnNlcXVlbmNlcyBmb2xsb3dpbmcgdGhlIGRpdmlzaW9uLlxuICAgIGZpbmRTdWJzZXF1ZW5jZXMoXG4gICAgICBuQ2hhbmdlRm9sbG93aW5nLFxuICAgICAgYVN0YXJ0Rm9sbG93aW5nLFxuICAgICAgYUVuZCxcbiAgICAgIGJTdGFydEZvbGxvd2luZyxcbiAgICAgIGJFbmQsXG4gICAgICB0cmFuc3Bvc2VkLFxuICAgICAgY2FsbGJhY2tzLFxuICAgICAgYUluZGV4ZXNGLFxuICAgICAgYUluZGV4ZXNSLFxuICAgICAgZGl2aXNpb25cbiAgICApO1xuICB9XG59O1xuXG5jb25zdCB2YWxpZGF0ZUxlbmd0aCA9IChuYW1lLCBhcmcpID0+IHtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiBhcmc7XG5cbiAgaWYgKHR5cGUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHtwa2d9OiAke25hbWV9IHR5cGVvZiAke3R5cGV9IGlzIG5vdCBhIG51bWJlcmApO1xuICB9XG5cbiAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihhcmcpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYCR7cGtnfTogJHtuYW1lfSB2YWx1ZSAke2FyZ30gaXMgbm90IGEgc2FmZSBpbnRlZ2VyYCk7XG4gIH1cblxuICBpZiAoYXJnIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGAke3BrZ306ICR7bmFtZX0gdmFsdWUgJHthcmd9IGlzIGEgbmVnYXRpdmUgaW50ZWdlcmApO1xuICB9XG59O1xuXG5jb25zdCB2YWxpZGF0ZUNhbGxiYWNrID0gKG5hbWUsIGFyZykgPT4ge1xuICBjb25zdCB0eXBlID0gdHlwZW9mIGFyZztcblxuICBpZiAodHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7cGtnfTogJHtuYW1lfSB0eXBlb2YgJHt0eXBlfSBpcyBub3QgYSBmdW5jdGlvbmApO1xuICB9XG59OyAvLyBDb21wYXJlIGl0ZW1zIGluIHR3byBzZXF1ZW5jZXMgdG8gZmluZCBhIGxvbmdlc3QgY29tbW9uIHN1YnNlcXVlbmNlLlxuLy8gR2l2ZW4gbGVuZ3RocyBvZiBzZXF1ZW5jZXMgYW5kIGlucHV0IGZ1bmN0aW9uIHRvIGNvbXBhcmUgaXRlbXMgYXQgaW5kZXhlcyxcbi8vIHJldHVybiBieSBvdXRwdXQgZnVuY3Rpb24gdGhlIG51bWJlciBvZiBhZGphY2VudCBpdGVtcyBhbmQgc3RhcnRpbmcgaW5kZXhlc1xuLy8gb2YgZWFjaCBjb21tb24gc3Vic2VxdWVuY2UuXG5cbnZhciBfZGVmYXVsdCA9IChhTGVuZ3RoLCBiTGVuZ3RoLCBpc0NvbW1vbiwgZm91bmRTdWJzZXF1ZW5jZSkgPT4ge1xuICB2YWxpZGF0ZUxlbmd0aCgnYUxlbmd0aCcsIGFMZW5ndGgpO1xuICB2YWxpZGF0ZUxlbmd0aCgnYkxlbmd0aCcsIGJMZW5ndGgpO1xuICB2YWxpZGF0ZUNhbGxiYWNrKCdpc0NvbW1vbicsIGlzQ29tbW9uKTtcbiAgdmFsaWRhdGVDYWxsYmFjaygnZm91bmRTdWJzZXF1ZW5jZScsIGZvdW5kU3Vic2VxdWVuY2UpOyAvLyBDb3VudCBjb21tb24gaXRlbXMgZnJvbSB0aGUgc3RhcnQgaW4gdGhlIGZvcndhcmQgZGlyZWN0aW9uLlxuXG4gIGNvbnN0IG5Db21tb25GID0gY291bnRDb21tb25JdGVtc0YoMCwgYUxlbmd0aCwgMCwgYkxlbmd0aCwgaXNDb21tb24pO1xuXG4gIGlmIChuQ29tbW9uRiAhPT0gMCkge1xuICAgIGZvdW5kU3Vic2VxdWVuY2UobkNvbW1vbkYsIDAsIDApO1xuICB9IC8vIFVubGVzcyBib3RoIHNlcXVlbmNlcyBjb25zaXN0IG9mIGNvbW1vbiBpdGVtcyBvbmx5LFxuICAvLyBmaW5kIGNvbW1vbiBpdGVtcyBpbiB0aGUgaGFsZi10cmltbWVkIGluZGV4IGludGVydmFscy5cblxuICBpZiAoYUxlbmd0aCAhPT0gbkNvbW1vbkYgfHwgYkxlbmd0aCAhPT0gbkNvbW1vbkYpIHtcbiAgICAvLyBJbnZhcmlhbnQ6IGludGVydmFscyBkbyBub3QgaGF2ZSBjb21tb24gaXRlbXMgYXQgdGhlIHN0YXJ0LlxuICAgIC8vIFRoZSBzdGFydCBvZiBhbiBpbmRleCBpbnRlcnZhbCBpcyBjbG9zZWQgbGlrZSBhcnJheSBzbGljZSBtZXRob2QuXG4gICAgY29uc3QgYVN0YXJ0ID0gbkNvbW1vbkY7XG4gICAgY29uc3QgYlN0YXJ0ID0gbkNvbW1vbkY7IC8vIENvdW50IGNvbW1vbiBpdGVtcyBmcm9tIHRoZSBlbmQgaW4gdGhlIHJldmVyc2UgZGlyZWN0aW9uLlxuXG4gICAgY29uc3QgbkNvbW1vblIgPSBjb3VudENvbW1vbkl0ZW1zUihcbiAgICAgIGFTdGFydCxcbiAgICAgIGFMZW5ndGggLSAxLFxuICAgICAgYlN0YXJ0LFxuICAgICAgYkxlbmd0aCAtIDEsXG4gICAgICBpc0NvbW1vblxuICAgICk7IC8vIEludmFyaWFudDogaW50ZXJ2YWxzIGRvIG5vdCBoYXZlIGNvbW1vbiBpdGVtcyBhdCB0aGUgZW5kLlxuICAgIC8vIFRoZSBlbmQgb2YgYW4gaW5kZXggaW50ZXJ2YWwgaXMgb3BlbiBsaWtlIGFycmF5IHNsaWNlIG1ldGhvZC5cblxuICAgIGNvbnN0IGFFbmQgPSBhTGVuZ3RoIC0gbkNvbW1vblI7XG4gICAgY29uc3QgYkVuZCA9IGJMZW5ndGggLSBuQ29tbW9uUjsgLy8gVW5sZXNzIG9uZSBzZXF1ZW5jZSBjb25zaXN0cyBvZiBjb21tb24gaXRlbXMgb25seSxcbiAgICAvLyB0aGVyZWZvcmUgdGhlIG90aGVyIHRyaW1tZWQgaW5kZXggaW50ZXJ2YWwgY29uc2lzdHMgb2YgY2hhbmdlcyBvbmx5LFxuICAgIC8vIGZpbmQgY29tbW9uIGl0ZW1zIGluIHRoZSB0cmltbWVkIGluZGV4IGludGVydmFscy5cblxuICAgIGNvbnN0IG5Db21tb25GUiA9IG5Db21tb25GICsgbkNvbW1vblI7XG5cbiAgICBpZiAoYUxlbmd0aCAhPT0gbkNvbW1vbkZSICYmIGJMZW5ndGggIT09IG5Db21tb25GUikge1xuICAgICAgY29uc3QgbkNoYW5nZSA9IDA7IC8vIG51bWJlciBvZiBjaGFuZ2UgaXRlbXMgaXMgbm90IHlldCBrbm93blxuXG4gICAgICBjb25zdCB0cmFuc3Bvc2VkID0gZmFsc2U7IC8vIGNhbGwgdGhlIG9yaWdpbmFsIHVud3JhcHBlZCBmdW5jdGlvbnNcblxuICAgICAgY29uc3QgY2FsbGJhY2tzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgZm91bmRTdWJzZXF1ZW5jZSxcbiAgICAgICAgICBpc0NvbW1vblxuICAgICAgICB9XG4gICAgICBdOyAvLyBJbmRleGVzIGluIHNlcXVlbmNlIGEgb2YgbGFzdCBwb2ludHMgaW4gZnVydGhlc3QgcmVhY2hpbmcgcGF0aHNcbiAgICAgIC8vIGZyb20gb3V0c2lkZSB0aGUgc3RhcnQgYXQgdG9wIGxlZnQgaW4gdGhlIGZvcndhcmQgZGlyZWN0aW9uOlxuXG4gICAgICBjb25zdCBhSW5kZXhlc0YgPSBbTk9UX1lFVF9TRVRdOyAvLyBmcm9tIHRoZSBlbmQgYXQgYm90dG9tIHJpZ2h0IGluIHRoZSByZXZlcnNlIGRpcmVjdGlvbjpcblxuICAgICAgY29uc3QgYUluZGV4ZXNSID0gW05PVF9ZRVRfU0VUXTsgLy8gSW5pdGlhbGl6ZSBvbmUgb2JqZWN0IGFzIG91dHB1dCBvZiBhbGwgY2FsbHMgdG8gZGl2aWRlIGZ1bmN0aW9uLlxuXG4gICAgICBjb25zdCBkaXZpc2lvbiA9IHtcbiAgICAgICAgYUNvbW1vbkZvbGxvd2luZzogTk9UX1lFVF9TRVQsXG4gICAgICAgIGFDb21tb25QcmVjZWRpbmc6IE5PVF9ZRVRfU0VULFxuICAgICAgICBhRW5kUHJlY2VkaW5nOiBOT1RfWUVUX1NFVCxcbiAgICAgICAgYVN0YXJ0Rm9sbG93aW5nOiBOT1RfWUVUX1NFVCxcbiAgICAgICAgYkNvbW1vbkZvbGxvd2luZzogTk9UX1lFVF9TRVQsXG4gICAgICAgIGJDb21tb25QcmVjZWRpbmc6IE5PVF9ZRVRfU0VULFxuICAgICAgICBiRW5kUHJlY2VkaW5nOiBOT1RfWUVUX1NFVCxcbiAgICAgICAgYlN0YXJ0Rm9sbG93aW5nOiBOT1RfWUVUX1NFVCxcbiAgICAgICAgbkNoYW5nZUZvbGxvd2luZzogTk9UX1lFVF9TRVQsXG4gICAgICAgIG5DaGFuZ2VQcmVjZWRpbmc6IE5PVF9ZRVRfU0VULFxuICAgICAgICBuQ29tbW9uRm9sbG93aW5nOiBOT1RfWUVUX1NFVCxcbiAgICAgICAgbkNvbW1vblByZWNlZGluZzogTk9UX1lFVF9TRVRcbiAgICAgIH07IC8vIEZpbmQgYW5kIHJldHVybiBjb21tb24gc3Vic2VxdWVuY2VzIGluIHRoZSB0cmltbWVkIGluZGV4IGludGVydmFscy5cblxuICAgICAgZmluZFN1YnNlcXVlbmNlcyhcbiAgICAgICAgbkNoYW5nZSxcbiAgICAgICAgYVN0YXJ0LFxuICAgICAgICBhRW5kLFxuICAgICAgICBiU3RhcnQsXG4gICAgICAgIGJFbmQsXG4gICAgICAgIHRyYW5zcG9zZWQsXG4gICAgICAgIGNhbGxiYWNrcyxcbiAgICAgICAgYUluZGV4ZXNGLFxuICAgICAgICBhSW5kZXhlc1IsXG4gICAgICAgIGRpdmlzaW9uXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChuQ29tbW9uUiAhPT0gMCkge1xuICAgICAgZm91bmRTdWJzZXF1ZW5jZShuQ29tbW9uUiwgYUVuZCwgYkVuZCk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbiJdfQ==