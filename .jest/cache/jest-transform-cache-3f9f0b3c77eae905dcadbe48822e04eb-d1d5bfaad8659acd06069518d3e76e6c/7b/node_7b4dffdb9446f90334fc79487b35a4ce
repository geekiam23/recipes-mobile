753120c02292f8b8c343725642c3f1a4
var tty = require('tty');

var util = require('util');

exports.init = init;
exports.log = log;
exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.destroy = util.deprecate(function () {}, 'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
exports.colors = [6, 2, 3, 4, 5, 1];

try {
  var supportsColor = require('supports-color');

  if (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {
    exports.colors = [20, 21, 26, 27, 32, 33, 38, 39, 40, 41, 42, 43, 44, 45, 56, 57, 62, 63, 68, 69, 74, 75, 76, 77, 78, 79, 80, 81, 92, 93, 98, 99, 112, 113, 128, 129, 134, 135, 148, 149, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 178, 179, 184, 185, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 214, 215, 220, 221];
  }
} catch (error) {}

exports.inspectOpts = Object.keys(process.env).filter(function (key) {
  return /^debug_/i.test(key);
}).reduce(function (obj, key) {
  var prop = key.substring(6).toLowerCase().replace(/_([a-z])/g, function (_, k) {
    return k.toUpperCase();
  });
  var val = process.env[key];

  if (/^(yes|on|true|enabled)$/i.test(val)) {
    val = true;
  } else if (/^(no|off|false|disabled)$/i.test(val)) {
    val = false;
  } else if (val === 'null') {
    val = null;
  } else {
    val = Number(val);
  }

  obj[prop] = val;
  return obj;
}, {});

function useColors() {
  return 'colors' in exports.inspectOpts ? Boolean(exports.inspectOpts.colors) : tty.isatty(process.stderr.fd);
}

function formatArgs(args) {
  var name = this.namespace,
      useColors = this.useColors;

  if (useColors) {
    var c = this.color;
    var colorCode = "\x1B[3" + (c < 8 ? c : '8;5;' + c);
    var prefix = "  " + colorCode + ";1m" + name + " \x1B[0m";
    args[0] = prefix + args[0].split('\n').join('\n' + prefix);
    args.push(colorCode + 'm+' + module.exports.humanize(this.diff) + "\x1B[0m");
  } else {
    args[0] = getDate() + name + ' ' + args[0];
  }
}

function getDate() {
  if (exports.inspectOpts.hideDate) {
    return '';
  }

  return new Date().toISOString() + ' ';
}

function log() {
  return process.stderr.write(util.format.apply(util, arguments) + '\n');
}

function save(namespaces) {
  if (namespaces) {
    process.env.DEBUG = namespaces;
  } else {
    delete process.env.DEBUG;
  }
}

function load() {
  return process.env.DEBUG;
}

function init(debug) {
  debug.inspectOpts = {};
  var keys = Object.keys(exports.inspectOpts);

  for (var i = 0; i < keys.length; i++) {
    debug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];
  }
}

module.exports = require("./common")(exports);
var formatters = module.exports.formatters;

formatters.o = function (v) {
  this.inspectOpts.colors = this.useColors;
  return util.inspect(v, this.inspectOpts).split('\n').map(function (str) {
    return str.trim();
  }).join(' ');
};

formatters.O = function (v) {
  this.inspectOpts.colors = this.useColors;
  return util.inspect(v, this.inspectOpts);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGUuanMiXSwibmFtZXMiOlsidHR5IiwicmVxdWlyZSIsInV0aWwiLCJleHBvcnRzIiwiaW5pdCIsImxvZyIsImZvcm1hdEFyZ3MiLCJzYXZlIiwibG9hZCIsInVzZUNvbG9ycyIsImRlc3Ryb3kiLCJkZXByZWNhdGUiLCJjb2xvcnMiLCJzdXBwb3J0c0NvbG9yIiwic3RkZXJyIiwibGV2ZWwiLCJlcnJvciIsImluc3BlY3RPcHRzIiwiT2JqZWN0Iiwia2V5cyIsInByb2Nlc3MiLCJlbnYiLCJmaWx0ZXIiLCJrZXkiLCJ0ZXN0IiwicmVkdWNlIiwib2JqIiwicHJvcCIsInN1YnN0cmluZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIl8iLCJrIiwidG9VcHBlckNhc2UiLCJ2YWwiLCJOdW1iZXIiLCJCb29sZWFuIiwiaXNhdHR5IiwiZmQiLCJhcmdzIiwibmFtZSIsIm5hbWVzcGFjZSIsImMiLCJjb2xvciIsImNvbG9yQ29kZSIsInByZWZpeCIsInNwbGl0Iiwiam9pbiIsInB1c2giLCJtb2R1bGUiLCJodW1hbml6ZSIsImRpZmYiLCJnZXREYXRlIiwiaGlkZURhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ3cml0ZSIsImZvcm1hdCIsIm5hbWVzcGFjZXMiLCJERUJVRyIsImRlYnVnIiwiaSIsImxlbmd0aCIsImZvcm1hdHRlcnMiLCJvIiwidiIsImluc3BlY3QiLCJtYXAiLCJzdHIiLCJ0cmltIiwiTyJdLCJtYXBwaW5ncyI6IkFBSUEsSUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBRCxDQUFuQjs7QUFDQSxJQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQU1BRSxPQUFPLENBQUNDLElBQVIsR0FBZUEsSUFBZjtBQUNBRCxPQUFPLENBQUNFLEdBQVIsR0FBY0EsR0FBZDtBQUNBRixPQUFPLENBQUNHLFVBQVIsR0FBcUJBLFVBQXJCO0FBQ0FILE9BQU8sQ0FBQ0ksSUFBUixHQUFlQSxJQUFmO0FBQ0FKLE9BQU8sQ0FB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LE1BQWpCLEdBQTBCLEtBQUtILFNBQS9CO0FBQ0EsU0FBT1AsSUFBSSxDQUFDZ0UsT0FBTCxDQUFhRCxDQUFiLEVBQWdCLEtBQUtoRCxXQUFyQixDQUFQO0FBQ0EsQ0FIRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG5jb25zdCB0dHkgPSByZXF1aXJlKCd0dHknKTtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgTm9kZS5qcyBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5pbml0ID0gaW5pdDtcbmV4cG9ydHMubG9nID0gbG9nO1xuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLmRlc3Ryb3kgPSB1dGlsLmRlcHJlY2F0ZShcblx0KCkgPT4ge30sXG5cdCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJ1xuKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbNiwgMiwgMywgNCwgNSwgMV07XG5cbnRyeSB7XG5cdC8vIE9wdGlvbmFsIGRlcGVuZGVuY3kgKGFzIGluLCBkb2Vzbid0IG5lZWQgdG8gYmUgaW5zdGFsbGVkLCBOT1QgbGlrZSBvcHRpb25hbERlcGVuZGVuY2llcyBpbiBwYWNrYWdlLmpzb24pXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcblx0Y29uc3Qgc3VwcG9ydHNDb2xvciA9IHJlcXVpcmUoJ3N1cHBvcnRzLWNvbG9yJyk7XG5cblx0aWYgKHN1cHBvcnRzQ29sb3IgJiYgKHN1cHBvcnRzQ29sb3Iuc3RkZXJyIHx8IHN1cHBvcnRzQ29sb3IpLmxldmVsID49IDIpIHtcblx0XHRleHBvcnRzLmNvbG9ycyA9IFtcblx0XHRcdDIwLFxuXHRcdFx0MjEsXG5cdFx0XHQyNixcblx0XHRcdDI3LFxuXHRcdFx0MzIsXG5cdFx0XHQzMyxcblx0XHRcdDM4LFxuXHRcdFx0MzksXG5cdFx0XHQ0MCxcblx0XHRcdDQxLFxuXHRcdFx0NDIsXG5cdFx0XHQ0Myxcblx0XHRcdDQ0LFxuXHRcdFx0NDUsXG5cdFx0XHQ1Nixcblx0XHRcdDU3LFxuXHRcdFx0NjIsXG5cdFx0XHQ2Myxcblx0XHRcdDY4LFxuXHRcdFx0NjksXG5cdFx0XHQ3NCxcblx0XHRcdDc1LFxuXHRcdFx0NzYsXG5cdFx0XHQ3Nyxcblx0XHRcdDc4LFxuXHRcdFx0NzksXG5cdFx0XHQ4MCxcblx0XHRcdDgxLFxuXHRcdFx0OTIsXG5cdFx0XHQ5Myxcblx0XHRcdDk4LFxuXHRcdFx0OTksXG5cdFx0XHQxMTIsXG5cdFx0XHQxMTMsXG5cdFx0XHQxMjgsXG5cdFx0XHQxMjksXG5cdFx0XHQxMzQsXG5cdFx0XHQxMzUsXG5cdFx0XHQxNDgsXG5cdFx0XHQxNDksXG5cdFx0XHQxNjAsXG5cdFx0XHQxNjEsXG5cdFx0XHQxNjIsXG5cdFx0XHQxNjMsXG5cdFx0XHQxNjQsXG5cdFx0XHQxNjUsXG5cdFx0XHQxNjYsXG5cdFx0XHQxNjcsXG5cdFx0XHQxNjgsXG5cdFx0XHQxNjksXG5cdFx0XHQxNzAsXG5cdFx0XHQxNzEsXG5cdFx0XHQxNzIsXG5cdFx0XHQxNzMsXG5cdFx0XHQxNzgsXG5cdFx0XHQxNzksXG5cdFx0XHQxODQsXG5cdFx0XHQxODUsXG5cdFx0XHQxOTYsXG5cdFx0XHQxOTcsXG5cdFx0XHQxOTgsXG5cdFx0XHQxOTksXG5cdFx0XHQyMDAsXG5cdFx0XHQyMDEsXG5cdFx0XHQyMDIsXG5cdFx0XHQyMDMsXG5cdFx0XHQyMDQsXG5cdFx0XHQyMDUsXG5cdFx0XHQyMDYsXG5cdFx0XHQyMDcsXG5cdFx0XHQyMDgsXG5cdFx0XHQyMDksXG5cdFx0XHQyMTQsXG5cdFx0XHQyMTUsXG5cdFx0XHQyMjAsXG5cdFx0XHQyMjFcblx0XHRdO1xuXHR9XG59IGNhdGNoIChlcnJvcikge1xuXHQvLyBTd2FsbG93IC0gd2Ugb25seSBjYXJlIGlmIGBzdXBwb3J0cy1jb2xvcmAgaXMgYXZhaWxhYmxlOyBpdCBkb2Vzbid0IGhhdmUgdG8gYmUuXG59XG5cbi8qKlxuICogQnVpbGQgdXAgdGhlIGRlZmF1bHQgYGluc3BlY3RPcHRzYCBvYmplY3QgZnJvbSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICpcbiAqICAgJCBERUJVR19DT0xPUlM9bm8gREVCVUdfREVQVEg9MTAgREVCVUdfU0hPV19ISURERU49ZW5hYmxlZCBub2RlIHNjcmlwdC5qc1xuICovXG5cbmV4cG9ydHMuaW5zcGVjdE9wdHMgPSBPYmplY3Qua2V5cyhwcm9jZXNzLmVudikuZmlsdGVyKGtleSA9PiB7XG5cdHJldHVybiAvXmRlYnVnXy9pLnRlc3Qoa2V5KTtcbn0pLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcblx0Ly8gQ2FtZWwtY2FzZVxuXHRjb25zdCBwcm9wID0ga2V5XG5cdFx0LnN1YnN0cmluZyg2KVxuXHRcdC50b0xvd2VyQ2FzZSgpXG5cdFx0LnJlcGxhY2UoL18oW2Etel0pL2csIChfLCBrKSA9PiB7XG5cdFx0XHRyZXR1cm4gay50b1VwcGVyQ2FzZSgpO1xuXHRcdH0pO1xuXG5cdC8vIENvZXJjZSBzdHJpbmcgdmFsdWUgaW50byBKUyB2YWx1ZVxuXHRsZXQgdmFsID0gcHJvY2Vzcy5lbnZba2V5XTtcblx0aWYgKC9eKHllc3xvbnx0cnVlfGVuYWJsZWQpJC9pLnRlc3QodmFsKSkge1xuXHRcdHZhbCA9IHRydWU7XG5cdH0gZWxzZSBpZiAoL14obm98b2ZmfGZhbHNlfGRpc2FibGVkKSQvaS50ZXN0KHZhbCkpIHtcblx0XHR2YWwgPSBmYWxzZTtcblx0fSBlbHNlIGlmICh2YWwgPT09ICdudWxsJykge1xuXHRcdHZhbCA9IG51bGw7XG5cdH0gZWxzZSB7XG5cdFx0dmFsID0gTnVtYmVyKHZhbCk7XG5cdH1cblxuXHRvYmpbcHJvcF0gPSB2YWw7XG5cdHJldHVybiBvYmo7XG59LCB7fSk7XG5cbi8qKlxuICogSXMgc3Rkb3V0IGEgVFRZPyBDb2xvcmVkIG91dHB1dCBpcyBlbmFibGVkIHdoZW4gYHRydWVgLlxuICovXG5cbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0cmV0dXJuICdjb2xvcnMnIGluIGV4cG9ydHMuaW5zcGVjdE9wdHMgP1xuXHRcdEJvb2xlYW4oZXhwb3J0cy5pbnNwZWN0T3B0cy5jb2xvcnMpIDpcblx0XHR0dHkuaXNhdHR5KHByb2Nlc3Muc3RkZXJyLmZkKTtcbn1cblxuLyoqXG4gKiBBZGRzIEFOU0kgY29sb3IgZXNjYXBlIGNvZGVzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0Y29uc3Qge25hbWVzcGFjZTogbmFtZSwgdXNlQ29sb3JzfSA9IHRoaXM7XG5cblx0aWYgKHVzZUNvbG9ycykge1xuXHRcdGNvbnN0IGMgPSB0aGlzLmNvbG9yO1xuXHRcdGNvbnN0IGNvbG9yQ29kZSA9ICdcXHUwMDFCWzMnICsgKGMgPCA4ID8gYyA6ICc4OzU7JyArIGMpO1xuXHRcdGNvbnN0IHByZWZpeCA9IGAgICR7Y29sb3JDb2RlfTsxbSR7bmFtZX0gXFx1MDAxQlswbWA7XG5cblx0XHRhcmdzWzBdID0gcHJlZml4ICsgYXJnc1swXS5zcGxpdCgnXFxuJykuam9pbignXFxuJyArIHByZWZpeCk7XG5cdFx0YXJncy5wdXNoKGNvbG9yQ29kZSArICdtKycgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpICsgJ1xcdTAwMUJbMG0nKTtcblx0fSBlbHNlIHtcblx0XHRhcmdzWzBdID0gZ2V0RGF0ZSgpICsgbmFtZSArICcgJyArIGFyZ3NbMF07XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0RGF0ZSgpIHtcblx0aWYgKGV4cG9ydHMuaW5zcGVjdE9wdHMuaGlkZURhdGUpIHtcblx0XHRyZXR1cm4gJyc7XG5cdH1cblx0cmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSArICcgJztcbn1cblxuLyoqXG4gKiBJbnZva2VzIGB1dGlsLmZvcm1hdCgpYCB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzIGFuZCB3cml0ZXMgdG8gc3RkZXJyLlxuICovXG5cbmZ1bmN0aW9uIGxvZyguLi5hcmdzKSB7XG5cdHJldHVybiBwcm9jZXNzLnN0ZGVyci53cml0ZSh1dGlsLmZvcm1hdCguLi5hcmdzKSArICdcXG4nKTtcbn1cblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHRpZiAobmFtZXNwYWNlcykge1xuXHRcdHByb2Nlc3MuZW52LkRFQlVHID0gbmFtZXNwYWNlcztcblx0fSBlbHNlIHtcblx0XHQvLyBJZiB5b3Ugc2V0IGEgcHJvY2Vzcy5lbnYgZmllbGQgdG8gbnVsbCBvciB1bmRlZmluZWQsIGl0IGdldHMgY2FzdCB0byB0aGVcblx0XHQvLyBzdHJpbmcgJ251bGwnIG9yICd1bmRlZmluZWQnLiBKdXN0IGRlbGV0ZSBpbnN0ZWFkLlxuXHRcdGRlbGV0ZSBwcm9jZXNzLmVudi5ERUJVRztcblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvYWQoKSB7XG5cdHJldHVybiBwcm9jZXNzLmVudi5ERUJVRztcbn1cblxuLyoqXG4gKiBJbml0IGxvZ2ljIGZvciBgZGVidWdgIGluc3RhbmNlcy5cbiAqXG4gKiBDcmVhdGUgYSBuZXcgYGluc3BlY3RPcHRzYCBvYmplY3QgaW4gY2FzZSBgdXNlQ29sb3JzYCBpcyBzZXRcbiAqIGRpZmZlcmVudGx5IGZvciBhIHBhcnRpY3VsYXIgYGRlYnVnYCBpbnN0YW5jZS5cbiAqL1xuXG5mdW5jdGlvbiBpbml0KGRlYnVnKSB7XG5cdGRlYnVnLmluc3BlY3RPcHRzID0ge307XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGV4cG9ydHMuaW5zcGVjdE9wdHMpO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRkZWJ1Zy5pbnNwZWN0T3B0c1trZXlzW2ldXSA9IGV4cG9ydHMuaW5zcGVjdE9wdHNba2V5c1tpXV07XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJW8gdG8gYHV0aWwuaW5zcGVjdCgpYCwgYWxsIG9uIGEgc2luZ2xlIGxpbmUuXG4gKi9cblxuZm9ybWF0dGVycy5vID0gZnVuY3Rpb24gKHYpIHtcblx0dGhpcy5pbnNwZWN0T3B0cy5jb2xvcnMgPSB0aGlzLnVzZUNvbG9ycztcblx0cmV0dXJuIHV0aWwuaW5zcGVjdCh2LCB0aGlzLmluc3BlY3RPcHRzKVxuXHRcdC5zcGxpdCgnXFxuJylcblx0XHQubWFwKHN0ciA9PiBzdHIudHJpbSgpKVxuXHRcdC5qb2luKCcgJyk7XG59O1xuXG4vKipcbiAqIE1hcCAlTyB0byBgdXRpbC5pbnNwZWN0KClgLCBhbGxvd2luZyBtdWx0aXBsZSBsaW5lcyBpZiBuZWVkZWQuXG4gKi9cblxuZm9ybWF0dGVycy5PID0gZnVuY3Rpb24gKHYpIHtcblx0dGhpcy5pbnNwZWN0T3B0cy5jb2xvcnMgPSB0aGlzLnVzZUNvbG9ycztcblx0cmV0dXJuIHV0aWwuaW5zcGVjdCh2LCB0aGlzLmluc3BlY3RPcHRzKTtcbn07XG4iXX0=