2616dab4f7c656b53289e5eddebc2a8f
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault2(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault2(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault2(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault2(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault2(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault2(require("@babel/runtime/helpers/getPrototypeOf"));

var _excluded = ["enabled", "active", "activityState", "statusBarColor"],
    _excluded2 = ["active", "activityState", "style", "enabled", "onComponentRef"],
    _excluded3 = ["enabled"];

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var _react = _interopRequireDefault(require("react"));

var _reactNative = require("react-native");

var _processColor = _interopRequireDefault(require("react-native/Libraries/StyleSheet/processColor"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var isPlatformSupported = _reactNative.Platform.OS === 'ios' || _reactNative.Platform.OS === 'android';
var ENABLE_SCREENS = isPlatformSupported;

function enableScreens() {
  var shouldEnableScreens = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
  ENABLE_SCREENS = isPlatformSupported && shouldEnableScreens;

  if (ENABLE_SCREENS && !_reactNative.UIManager.getViewManagerConfig('RNSScreen')) {
    console.error("Screen native module hasn't been linked. Please check the react-native-screens README for more details");
  }
}

var shouldUseActivityState = true;

function screensEnabled() {
  return ENABLE_SCREENS;
}

var NativeScreenValue;
var NativeScreenContainerValue;
var NativeScreenStack;
var NativeScreenStackHeaderConfig;
var NativeScreenStackHeaderSubview;
var AnimatedNativeScreen;
var NativeSearchBar;
var ScreensNativeModules = {
  get NativeScreen() {
    NativeScreenValue = NativeScreenValue || (0, _reactNative.requireNativeComponent)('RNSScreen');
    return NativeScreenValue;
  },

  get NativeScreenContainer() {
    NativeScreenContainerValue = NativeScreenContainerValue || (0, _reactNative.requireNativeComponent)('RNSScreenContainer');
    return NativeScreenContainerValue;
  },

  get NativeScreenStack() {
    NativeScreenStack = NativeScreenStack || (0, _reactNative.requireNativeComponent)('RNSScreenStack');
    return NativeScreenStack;
  },

  get NativeScreenStackHeaderConfig() {
    NativeScreenStackHeaderConfig = NativeScreenStackHeaderConfig || (0, _reactNative.requireNativeComponent)('RNSScreenStackHeaderConfig');
    return NativeScreenStackHeaderConfig;
  },

  get NativeScreenStackHeaderSubview() {
    NativeScreenStackHeaderSubview = NativeScreenStackHeaderSubview || (0, _reactNative.requireNativeComponent)('RNSScreenStackHeaderSubview');
    return NativeScreenStackHeaderSubview;
  },

  get NativeSearchBar() {
    NativeSearchBar = NativeSearchBar || (0, _reactNative.requireNativeComponent)('RNSSearchBar');
    return NativeSearchBar;
  }

};

var Screen = function (_react$default$Compon) {
  (0, _inherits2.default)(Screen, _react$default$Compon);

  var _super = _createSuper(Screen);

  function Screen() {
    var _this;

    (0, _classCallCheck2.default)(this, Screen);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _defineProperty((0, _assertThisInitialized2.default)(_this), "ref", null);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "setRef", function (ref) {
      var _this$props$onCompone, _this$props;

      _this.ref = ref;
      (_this$props$onCompone = (_this$props = _this.props).onComponentRef) === null || _this$props$onCompone === void 0 ? void 0 : _this$props$onCompone.call(_this$props, ref);
    });

    return _this;
  }

  (0, _createClass2.default)(Screen, [{
    key: "setNativeProps",
    value: function setNativeProps(props) {
      var _this$ref;

      (_this$ref = this.ref) === null || _this$ref === void 0 ? void 0 : _this$ref.setNativeProps(props);
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props$enabled = this.props.enabled,
          enabled = _this$props$enabled === void 0 ? ENABLE_SCREENS : _this$props$enabled;

      if (enabled && isPlatformSupported) {
        AnimatedNativeScreen = AnimatedNativeScreen || _reactNative.Animated.createAnimatedComponent(ScreensNativeModules.NativeScreen);
        var _this$props2 = this.props,
            _enabled = _this$props2.enabled,
            active = _this$props2.active,
            activityState = _this$props2.activityState,
            statusBarColor = _this$props2.statusBarColor,
            rest = (0, _objectWithoutProperties2.default)(_this$props2, _excluded);

        if (active !== undefined && activityState === undefined) {
          console.warn('It appears that you are using old version of react-navigation library. Please update @react-navigation/bottom-tabs, @react-navigation/stack and @react-navigation/drawer to version 5.10.0 or above to take full advantage of new functionality added to react-native-screens');
          activityState = active !== 0 ? 2 : 0;
        }

        var processedColor = (0, _processColor.default)(statusBarColor);
        return _react.default.createElement(AnimatedNativeScreen, _extends({}, rest, {
          statusBarColor: processedColor,
          activityState: activityState,
          ref: this.setRef
        }));
      } else {
        var _this$props3 = this.props,
            _active = _this$props3.active,
            _activityState = _this$props3.activityState,
            style = _this$props3.style,
            _enabled2 = _this$props3.enabled,
            onComponentRef = _this$props3.onComponentRef,
            _rest = (0, _objectWithoutProperties2.default)(_this$props3, _excluded2);

        if (_active !== undefined && _activityState === undefined) {
          _activityState = _active !== 0 ? 2 : 0;
        }

        return _react.default.createElement(_reactNative.Animated.View, _extends({
          style: [style, {
            display: _activityState !== 0 ? 'flex' : 'none'
          }],
          ref: this.setRef
        }, _rest));
      }
    }
  }]);
  return Screen;
}(_react.default.Component);

var ScreenContainer = function (_react$default$Compon2) {
  (0, _inherits2.default)(ScreenContainer, _react$default$Compon2);

  var _super2 = _createSuper(ScreenContainer);

  function ScreenContainer() {
    (0, _classCallCheck2.default)(this, ScreenContainer);
    return _super2.apply(this, arguments);
  }

  (0, _createClass2.default)(ScreenContainer, [{
    key: "render",
    value: function render() {
      var _this$props4 = this.props,
          _this$props4$enabled = _this$props4.enabled,
          enabled = _this$props4$enabled === void 0 ? ENABLE_SCREENS : _this$props4$enabled,
          rest = (0, _objectWithoutProperties2.default)(_this$props4, _excluded3);

      if (enabled && isPlatformSupported) {
        return _react.default.createElement(ScreensNativeModules.NativeScreenContainer, rest);
      }

      return _react.default.createElement(_reactNative.View, rest);
    }
  }]);
  return ScreenContainer;
}(_react.default.Component);

var styles = _reactNative.StyleSheet.create({
  headerSubview: {
    position: 'absolute',
    top: 0,
    right: 0,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center'
  }
});

var ScreenStackHeaderBackButtonImage = function ScreenStackHeaderBackButtonImage(props) {
  return _react.default.createElement(ScreensNativeModules.NativeScreenStackHeaderSubview, {
    type: "back",
    style: styles.headerSubview
  }, _react.default.createElement(_reactNative.Image, _extends({
    resizeMode: "center",
    fadeDuration: 0
  }, props)));
};

var ScreenStackHeaderRightView = function ScreenStackHeaderRightView(props) {
  return _react.default.createElement(ScreensNativeModules.NativeScreenStackHeaderSubview, _extends({}, props, {
    type: "right",
    style: styles.headerSubview
  }));
};

var ScreenStackHeaderLeftView = function ScreenStackHeaderLeftView(props) {
  return _react.default.createElement(ScreensNativeModules.NativeScreenStackHeaderSubview, _extends({}, props, {
    type: "left",
    style: styles.headerSubview
  }));
};

var ScreenStackHeaderCenterView = function ScreenStackHeaderCenterView(props) {
  return _react.default.createElement(ScreensNativeModules.NativeScreenStackHeaderSubview, _extends({}, props, {
    type: "center",
    style: styles.headerSubview
  }));
};

var ScreenStackHeaderSearchBarView = function ScreenStackHeaderSearchBarView(props) {
  return _react.default.createElement(ScreensNativeModules.NativeScreenStackHeaderSubview, _extends({}, props, {
    type: "searchBar",
    style: styles.headerSubview
  }));
};

module.exports = {
  Screen: Screen,
  ScreenContainer: ScreenContainer,

  get NativeScreen() {
    return ScreensNativeModules.NativeScreen;
  },

  get NativeScreenContainer() {
    return ScreensNativeModules.NativeScreenContainer;
  },

  get ScreenStack() {
    return ScreensNativeModules.NativeScreenStack;
  },

  get ScreenStackHeaderConfig() {
    return ScreensNativeModules.NativeScreenStackHeaderConfig;
  },

  get ScreenStackHeaderSubview() {
    return ScreensNativeModules.NativeScreenStackHeaderSubview;
  },

  get SearchBar() {
    if (_reactNative.Platform.OS !== 'ios') {
      console.warn('Importing SearchBar is only valid on iOS devices.');
      return _reactNative.View;
    }

    return ScreensNativeModules.NativeSearchBar;
  },

  ScreenStackHeaderBackButtonImage: ScreenStackHeaderBackButtonImage,
  ScreenStackHeaderRightView: ScreenStackHeaderRightView,
  ScreenStackHeaderLeftView: ScreenStackHeaderLeftView,
  ScreenStackHeaderCenterView: ScreenStackHeaderCenterView,
  ScreenStackHeaderSearchBarView: ScreenStackHeaderSearchBarView,
  enableScreens: enableScreens,
  screensEnabled: screensEnabled,
  shouldUseActivityState: shouldUseActivityState
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4Lm5hdGl2ZS50c3giXSwibmFtZXMiOlsiaXNQbGF0Zm9ybVN1cHBvcnRlZCIsIlBsYXRmb3JtIiwiRU5BQkxFX1NDUkVFTlMiLCJzaG91bGRFbmFibGVTY3JlZW5zIiwiVUlNYW5hZ2VyIiwiY29uc29sZSIsInNob3VsZFVzZUFjdGl2aXR5U3RhdGUiLCJTY3JlZW5zTmF0aXZlTW9kdWxlcyIsIk5hdGl2ZVNjcmVlblZhbHVlIiwiTmF0aXZlU2NyZWVuQ29udGFpbmVyVmFsdWUiLCJOYXRpdmVTY3JlZW5TdGFjayIsIk5hdGl2ZVNjcmVlblN0YWNrSGVhZGVyQ29uZmlnIiwiTmF0aXZlU2NyZWVuU3RhY2tIZWFkZXJTdWJ2aWV3IiwiTmF0aXZlU2VhcmNoQmFyIiwiUmVhY3QiLCJzZXROYXRpdmVQcm9wcyIsInJlZiIsInJlbmRlciIsImVuYWJsZWQiLCJBbmltYXRlZE5hdGl2ZVNjcmVlbiIsIkFuaW1hdGVkIiwicmVzdCIsImFjdGl2ZSIsImFjdGl2aXR5U3RhdGUiLCJwcm9jZXNzZWRDb2xvciIsInNldFJlZiIsImRpc3BsYXkiLCJzdHlsZXMiLCJoZWFkZXJTdWJ2aWV3IiwicG9zaXRpb24iLCJ0b3AiLCJyaWdodCIsImZsZXhEaXJlY3Rpb24iLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJTY3JlZW5TdGFja0hlYWRlckJhY2tCdXR0b25JbWFnZSIsInByb3BzIiwiU2NyZWVuU3RhY2tIZWFkZXJSaWdodFZpZXciLCJTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3IiwiU2NyZWVuU3RhY2tIZWFkZXJDZW50ZXJWaWV3IiwiU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3IiwibW9kdWxlIiwiU2NyZWVuIiwiU2NyZWVuQ29udGFpbmVyIiwiVmlldyIsImVuYWJsZVNjcmVlbnMiLCJzY3JlZW5zRW5hYmxlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLE1BQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFlBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQWFBLElBQUEsYUFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLGdEQUFBLENBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsSUFBTUEsbUJBQW1CLEdBQUdDLFlBQUFBLENBQUFBLFFBQUFBLENBQUFBLEVBQUFBLEtBQUFBLEtBQUFBLElBQXlCQSxZQUFBQSxDQUFBQSxRQUFBQSxDQUFBQSxFQUFBQSxLQUFyRCxTQUFBO0FBRUEsSUFBSUMsY0FBYyxHQUFsQixtQkFBQTs7QUFFQSxTQUFBLGFBQUEsR0FBeUQ7QUFBQSxNQUFsQ0MsbUJBQWtDLHVFQUF6RCxJQUF5RDtBQUN2REQsRUFBQUEsY0FBYyxHQUFHRixtQkFBbUIsSUFBcENFLG1CQUFBQTs7QUFDQSxNQUFJQSxjQUFjLElBQUksQ0FBQ0UsWUFBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsb0JBQUFBLENBQXZCLFdBQXVCQSxDQUF2QixFQUFvRTtBQUNsRUMsSUFBQUEsT0FBTyxDQUFQQSxLQUFBQTtBQUdEO0FBR0g7O0FBQ0EsSUFBTUMsc0JBQXNCLEdBQTVCLElBQUE7O0FBRUEsU0FBQSxjQUFBLEdBQW1DO0FBQ2pDLFNBQUEsY0FBQTtBQUdGOztBQUVBLElBQUEsaUJBQUE7QUFDQSxJQUFBLDBCQUFBO0FBQ0EsSUFBQSxpQkFBQTtBQUNBLElBQUEsNkJBQUE7QUFDQSxJQUFBLDhCQUFBO0FBR0EsSUFBQSxvQkFBQTtBQUNBLElBQUEsZUFBQTtBQUVBLElBQU1DLG9CQUFvQixHQUFHO0FBQzNCLE1BQUEsWUFBQSxHQUFtQjtBQUNqQkMsSUFBQUEsaUJBQWlCLEdBQ2ZBLGlCQUFpQixJQUFJLENBQUEsR0FBQSxZQUFBLENBQUEsc0JBQUEsRUFEdkJBLFdBQ3VCLENBRHZCQTtBQUVBLFdBQUEsaUJBQUE7QUFKeUIsR0FBQTs7QUFPM0IsTUFBQSxxQkFBQSxHQUE0QjtBQUMxQkMsSUFBQUEsMEJBQTBCLEdBQ3hCQSwwQkFBMEIsSUFDMUIsQ0FBQSxHQUFBLFlBQUEsQ0FBQSxzQkFBQSxFQUZGQSxvQkFFRSxDQUZGQTtBQUdBLFdBQUEsMEJBQUE7QUFYeUIsR0FBQTs7QUFjM0IsTUFBQSxpQkFBQSxHQUF3QjtBQUN0QkMsSUFBQUEsaUJBQWlCLEdBQ2ZBLGlCQUFpQixJQUFJLENBQUEsR0FBQSxZQUFBLENBQUEsc0JBQUEsRUFEdkJBLGdCQUN1QixDQUR2QkE7QUFFQSxXQUFBLGlCQUFBO0FBakJ5QixHQUFBOztBQW9CM0IsTUFBQSw2QkFBQSxHQUFvQztBQUNsQ0MsSUFBQUEsNkJBQTZCLEdBQzNCQSw2QkFBNkIsSUFDN0IsQ0FBQSxHQUFBLFlBQUEsQ0FBQSxzQkFBQSxFQUZGQSw0QkFFRSxDQUZGQTtBQUdBLFdBQUEsNkJBQUE7QUF4QnlCLEdBQUE7O0FBMkIzQixNQUFBLDhCQUFBLEdBQXFDO0FBQ25DQyxJQUFBQSw4QkFBOEIsR0FDNUJBLDhCQUE4QixJQUM5QixDQUFBLEdBQUEsWUFBQSxDQUFBLHNCQUFBLEVBRkZBLDZCQUVFLENBRkZBO0FBR0EsV0FBQSw4QkFBQTtBQS9CeUIsR0FBQTs7QUFrQzNCLE1BQUEsZUFBQSxHQUFzQjtBQUNwQkMsSUFBQUEsZUFBZSxHQUFHQSxlQUFlLElBQUksQ0FBQSxHQUFBLFlBQUEsQ0FBQSxzQkFBQSxFQUFyQ0EsY0FBcUMsQ0FBckNBO0FBQ0EsV0FBQSxlQUFBO0FBQ0Q7O0FBckMwQixDQUE3Qjs7SUF3Q0EsTTs7Ozs7QUFBa0Qsb0JBQUE7QUFBQTs7QUFBQTs7QUFBQSxzQ0FBQSxJQUFBO0FBQUEsTUFBQSxJQUFBO0FBQUE7O0FBQUEsb0RBQUEsSUFBQTs7QUFBQSxJQUFBLGVBQUEsOENBQUEsS0FBQSxFQUFBLElBQUEsQ0FBQTs7QUFBQSxJQUFBLGVBQUEsOENBQUEsUUFBQSxFQU90Q0csVUFBQUEsR0FBRCxFQUFxRDtBQUFBLFVBQUEscUJBQUEsRUFBQSxXQUFBOztBQUM1RCxZQUFBLEdBQUEsR0FBQSxHQUFBO0FBQ0EsT0FBQSxxQkFBQSxHQUFBLENBQUEsV0FBQSxHQUFBLE1BQUEsS0FBQSxFQUFBLGNBQUEsTUFBQSxJQUFBLElBQUEscUJBQUEsS0FBQSxLQUFBLENBQUEsR0FBQSxLQUFBLENBQUEsR0FBQSxxQkFBQSxDQUFBLElBQUEsQ0FBQSxXQUFBLEVBQUEsR0FBQSxDQUFBO0FBVDhDLEtBQUEsQ0FBQTs7QUFBQTtBQUFBOzs7O1dBR2hERCx3QkFBYyxLQUFkQSxFQUF5QztBQUFBLFVBQUEsU0FBQTs7QUFDdkMsT0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLE1BQUEsSUFBQSxJQUFBLFNBQUEsS0FBQSxLQUFBLENBQUEsR0FBQSxLQUFBLENBQUEsR0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLEtBQUEsQ0FBQTtBQUNEOzs7V0FPREUsa0JBQVM7QUFDUCxnQ0FBcUMsS0FBckMsS0FBQSxDQUFRQyxPQUFSO0FBQUEsVUFBUUEsT0FBUixvQ0FBa0JoQixjQUFsQjs7QUFFQSxVQUFJZ0IsT0FBTyxJQUFYLG1CQUFBLEVBQW9DO0FBQ2xDQyxRQUFBQSxvQkFBb0IsR0FDbEJBLG9CQUFvQixJQUNwQkMsWUFBQUEsQ0FBQUEsUUFBQUEsQ0FBQUEsdUJBQUFBLENBQWlDYixvQkFBb0IsQ0FGdkRZLFlBRUVDLENBRkZEO0FBSUEsMkJBV0ksS0FYSixLQUFBO0FBQUEsWUFBSSxRQUFKLGdCQUFJLE9BQUo7QUFBQSxZQUFJLE1BQUosZ0JBQUksTUFBSjtBQUFBLFlBQUksYUFBSixnQkFBSSxhQUFKO0FBQUEsWUFBSSxjQUFKLGdCQUFJLGNBQUo7QUFBQSxZQVVLRSxJQVZMOztBQWFBLFlBQUlDLE1BQU0sS0FBTkEsU0FBQUEsSUFBd0JDLGFBQWEsS0FBekMsU0FBQSxFQUF5RDtBQUN2RGxCLFVBQUFBLE9BQU8sQ0FBUEEsSUFBQUEsQ0FBQUEsK1FBQUFBO0FBR0FrQixVQUFBQSxhQUFhLEdBQUdELE1BQU0sS0FBTkEsQ0FBQUEsR0FBQUEsQ0FBQUEsR0FKdUMsQ0FJdkRDO0FBQ0Q7O0FBRUQsWUFBTUMsY0FBYyxHQUFHLENBQUEsR0FBQSxhQUFBLENBQUEsT0FBQSxFQUF2QixjQUF1QixDQUF2QjtBQUVBLGVBQ0UsTUFBQSxDQUFBLE9BQUEsQ0FBQSxhQUFBLENBQUEsb0JBQUEsRUFBQSxRQUFBLENBQUEsRUFBQSxFQUFBLElBQUEsRUFBQTtBQUVFLFVBQUEsY0FBYyxFQUZoQixjQUFBO0FBR0UsVUFBQSxhQUFhLEVBSGYsYUFBQTtBQUlFLFVBQUEsR0FBRyxFQUFFLEtBQUtDO0FBSlosU0FBQSxDQUFBLENBREY7QUEzQkYsT0FBQSxNQW1DTztBQUVMLDJCQVNJLEtBVEosS0FBQTtBQUFBLFlBQUksT0FBSixnQkFBSSxNQUFKO0FBQUEsWUFBSSxjQUFKLGdCQUFJLGFBQUo7QUFBQSxZQUFJLEtBQUosZ0JBQUksS0FBSjtBQUFBLFlBQUksU0FBSixnQkFBSSxPQUFKO0FBQUEsWUFBSSxjQUFKLGdCQUFJLGNBQUo7QUFBQSxZQVFLSixLQVJMOztBQVdBLFlBQUlDLE9BQU0sS0FBTkEsU0FBQUEsSUFBd0JDLGNBQWEsS0FBekMsU0FBQSxFQUF5RDtBQUN2REEsVUFBQUEsY0FBYSxHQUFHRCxPQUFNLEtBQU5BLENBQUFBLEdBQUFBLENBQUFBLEdBQWhCQyxDQUFBQTtBQUNEOztBQUNELGVBQ0UsTUFBQSxDQUFBLE9BQUEsQ0FBQSxhQUFBLENBQUMsWUFBQSxDQUFELFFBQUMsQ0FBRCxJQUFBLEVBQUEsUUFBQSxDQUFBO0FBQ0UsVUFBQSxLQUFLLEVBQUUsQ0FBQSxLQUFBLEVBQVE7QUFBRUcsWUFBQUEsT0FBTyxFQUFFSCxjQUFhLEtBQWJBLENBQUFBLEdBQUFBLE1BQUFBLEdBQStCO0FBQTFDLFdBQVIsQ0FEVDtBQUVFLFVBQUEsR0FBRyxFQUFFLEtBQUtFO0FBRlosU0FBQSxFQURGLEtBQ0UsQ0FBQSxDQURGO0FBT0Q7QUFDRjs7O0VBMUVrQlgsTUFBQUEsQ0FBQUEsT0FBQUEsQ0FBckIsUzs7SUE2RUEsZTs7Ozs7Ozs7Ozs7O1dBQ0VHLGtCQUFTO0FBQ1AseUJBQThDLEtBQTlDLEtBQUE7QUFBQSw4Q0FBUUMsT0FBUjtBQUFBLFVBQVFBLE9BQVIscUNBQU0sY0FBTjtBQUFBLFVBQXFDRyxJQUFyQzs7QUFFQSxVQUFJSCxPQUFPLElBQVgsbUJBQUEsRUFBb0M7QUFDbEMsZUFBTyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxvQkFBRCxDQUFBLHFCQUFBLEVBQVAsSUFBTyxDQUFQO0FBQ0Q7O0FBRUQsYUFBTyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxZQUFBLENBQUQsSUFBQSxFQUFQLElBQU8sQ0FBUDtBQUNEOzs7RUFUMkJKLE1BQUFBLENBQUFBLE9BQUFBLENBQTlCLFM7O0FBWUEsSUFBTWEsTUFBTSxHQUFHLFlBQUEsQ0FBQSxVQUFBLENBQUEsTUFBQSxDQUFrQjtBQUMvQkMsRUFBQUEsYUFBYSxFQUFFO0FBQ2JDLElBQUFBLFFBQVEsRUFESyxVQUFBO0FBRWJDLElBQUFBLEdBQUcsRUFGVSxDQUFBO0FBR2JDLElBQUFBLEtBQUssRUFIUSxDQUFBO0FBSWJDLElBQUFBLGFBQWEsRUFKQSxLQUFBO0FBS2JDLElBQUFBLFVBQVUsRUFMRyxRQUFBO0FBTWJDLElBQUFBLGNBQWMsRUFBRTtBQU5IO0FBRGdCLENBQWxCLENBQWY7O0FBV0EsSUFBTUMsZ0NBQWdDLEdBQUlDLFNBQXBDRCxnQ0FBb0NDLENBQUFBLEtBQUQ7QUFBQSxTQUN2QyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxvQkFBRCxDQUFBLDhCQUFBLEVBQUE7QUFDRSxJQUFBLElBQUksRUFETixNQUFBO0FBRUUsSUFBQSxLQUFLLEVBQUVULE1BQU0sQ0FBQ0M7QUFGaEIsR0FBQSxFQUdFLE1BQUEsQ0FBQSxPQUFBLENBQUEsYUFBQSxDQUFDLFlBQUEsQ0FBRCxLQUFBLEVBQUEsUUFBQSxDQUFBO0FBQU8sSUFBQSxVQUFVLEVBQWpCLFFBQUE7QUFBMkIsSUFBQSxZQUFZLEVBQUU7QUFBekMsR0FBQSxFQUpKLEtBSUksQ0FBQSxDQUhGLENBRHVDO0FBQUEsQ0FBekM7O0FBUUEsSUFBTVMsMEJBQTBCLEdBQzlCRCxTQURJQywwQkFDSkQsQ0FBQUEsS0FEaUM7QUFBQSxTQUdqQyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxvQkFBRCxDQUFBLDhCQUFBLEVBQUEsUUFBQSxDQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUE7QUFFRSxJQUFBLElBQUksRUFGTixPQUFBO0FBR0UsSUFBQSxLQUFLLEVBQUVULE1BQU0sQ0FBQ0M7QUFIaEIsR0FBQSxDQUFBLENBSGlDO0FBQUEsQ0FBbkM7O0FBVUEsSUFBTVUseUJBQXlCLEdBQzdCRixTQURJRSx5QkFDSkYsQ0FBQUEsS0FEZ0M7QUFBQSxTQUdoQyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxvQkFBRCxDQUFBLDhCQUFBLEVBQUEsUUFBQSxDQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUE7QUFFRSxJQUFBLElBQUksRUFGTixNQUFBO0FBR0UsSUFBQSxLQUFLLEVBQUVULE1BQU0sQ0FBQ0M7QUFIaEIsR0FBQSxDQUFBLENBSGdDO0FBQUEsQ0FBbEM7O0FBVUEsSUFBTVcsMkJBQTJCLEdBQy9CSCxTQURJRywyQkFDSkgsQ0FBQUEsS0FEa0M7QUFBQSxTQUdsQyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxvQkFBRCxDQUFBLDhCQUFBLEVBQUEsUUFBQSxDQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUE7QUFFRSxJQUFBLElBQUksRUFGTixRQUFBO0FBR0UsSUFBQSxLQUFLLEVBQUVULE1BQU0sQ0FBQ0M7QUFIaEIsR0FBQSxDQUFBLENBSGtDO0FBQUEsQ0FBcEM7O0FBVUEsSUFBTVksOEJBQThCLEdBQ2xDSixTQURJSSw4QkFDSkosQ0FBQUEsS0FEcUM7QUFBQSxTQUdyQyxNQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxvQkFBRCxDQUFBLDhCQUFBLEVBQUEsUUFBQSxDQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUE7QUFFRSxJQUFBLElBQUksRUFGTixXQUFBO0FBR0UsSUFBQSxLQUFLLEVBQUVULE1BQU0sQ0FBQ0M7QUFIaEIsR0FBQSxDQUFBLENBSHFDO0FBQUEsQ0FBdkM7O0FBd0JBYSxNQUFNLENBQU5BLE9BQUFBLEdBQWlCO0FBR2ZDLEVBQUFBLE1BSGUsRUFHZkEsTUFIZTtBQUlmQyxFQUFBQSxlQUplLEVBSWZBLGVBSmU7O0FBTWYsTUFBQSxZQUFBLEdBQW1CO0FBQ2pCLFdBQU9wQyxvQkFBb0IsQ0FBM0IsWUFBQTtBQVBhLEdBQUE7O0FBVWYsTUFBQSxxQkFBQSxHQUE0QjtBQUMxQixXQUFPQSxvQkFBb0IsQ0FBM0IscUJBQUE7QUFYYSxHQUFBOztBQWNmLE1BQUEsV0FBQSxHQUFrQjtBQUNoQixXQUFPQSxvQkFBb0IsQ0FBM0IsaUJBQUE7QUFmYSxHQUFBOztBQWlCZixNQUFBLHVCQUFBLEdBQThCO0FBQzVCLFdBQU9BLG9CQUFvQixDQUEzQiw2QkFBQTtBQWxCYSxHQUFBOztBQW9CZixNQUFBLHdCQUFBLEdBQStCO0FBQzdCLFdBQU9BLG9CQUFvQixDQUEzQiw4QkFBQTtBQXJCYSxHQUFBOztBQXVCZixNQUFBLFNBQUEsR0FBZ0I7QUFDZCxRQUFJTixZQUFBQSxDQUFBQSxRQUFBQSxDQUFBQSxFQUFBQSxLQUFKLEtBQUEsRUFBMkI7QUFDekJJLE1BQUFBLE9BQU8sQ0FBUEEsSUFBQUEsQ0FBQUEsbURBQUFBO0FBQ0EsYUFBT3VDLFlBQUFBLENBQVAsSUFBQTtBQUNEOztBQUVELFdBQU9yQyxvQkFBb0IsQ0FBM0IsZUFBQTtBQTdCYSxHQUFBOztBQWlDZjRCLEVBQUFBLGdDQWpDZSxFQWlDZkEsZ0NBakNlO0FBa0NmRSxFQUFBQSwwQkFsQ2UsRUFrQ2ZBLDBCQWxDZTtBQW1DZkMsRUFBQUEseUJBbkNlLEVBbUNmQSx5QkFuQ2U7QUFvQ2ZDLEVBQUFBLDJCQXBDZSxFQW9DZkEsMkJBcENlO0FBcUNmQyxFQUFBQSw4QkFyQ2UsRUFxQ2ZBLDhCQXJDZTtBQXVDZkssRUFBQUEsYUF2Q2UsRUF1Q2ZBLGFBdkNlO0FBd0NmQyxFQUFBQSxjQXhDZSxFQXdDZkEsY0F4Q2U7QUF5Q2Z4QyxFQUFBQSxzQkFBQUEsRUFBQUE7QUF6Q2UsQ0FBakJtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBBbmltYXRlZCxcbiAgSW1hZ2UsXG4gIEltYWdlUHJvcHMsXG4gIFBsYXRmb3JtLFxuICByZXF1aXJlTmF0aXZlQ29tcG9uZW50LFxuICBTdHlsZVNoZWV0LFxuICBVSU1hbmFnZXIsXG4gIFZpZXcsXG4gIFZpZXdQcm9wcyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbi8vIEB0cy1pZ25vcmUgR2V0dGluZyBwcml2YXRlIGNvbXBvbmVudFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9kZWZhdWx0XG5pbXBvcnQgcHJvY2Vzc0NvbG9yIGZyb20gJ3JlYWN0LW5hdGl2ZS9MaWJyYXJpZXMvU3R5bGVTaGVldC9wcm9jZXNzQ29sb3InO1xuXG5pbXBvcnQge1xuICBTdGFja1ByZXNlbnRhdGlvblR5cGVzLFxuICBTdGFja0FuaW1hdGlvblR5cGVzLFxuICBCbHVyRWZmZWN0VHlwZXMsXG4gIFNjcmVlblJlcGxhY2VUeXBlcyxcbiAgU2NyZWVuT3JpZW50YXRpb25UeXBlcyxcbiAgSGVhZGVyU3Vidmlld1R5cGVzLFxuICBTY3JlZW5Qcm9wcyxcbiAgU2NyZWVuQ29udGFpbmVyUHJvcHMsXG4gIFNjcmVlblN0YWNrUHJvcHMsXG4gIFNjcmVlblN0YWNrSGVhZGVyQ29uZmlnUHJvcHMsXG4gIFNlYXJjaEJhclByb3BzLFxufSBmcm9tICcuL3R5cGVzJztcblxuLy8gd2ViIGltcGxlbWVudGF0aW9uIGlzIHRha2VuIGZyb20gYGluZGV4LnRzeGBcbmNvbnN0IGlzUGxhdGZvcm1TdXBwb3J0ZWQgPSBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgfHwgUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJztcblxubGV0IEVOQUJMRV9TQ1JFRU5TID0gaXNQbGF0Zm9ybVN1cHBvcnRlZDtcblxuZnVuY3Rpb24gZW5hYmxlU2NyZWVucyhzaG91bGRFbmFibGVTY3JlZW5zID0gdHJ1ZSk6IHZvaWQge1xuICBFTkFCTEVfU0NSRUVOUyA9IGlzUGxhdGZvcm1TdXBwb3J0ZWQgJiYgc2hvdWxkRW5hYmxlU2NyZWVucztcbiAgaWYgKEVOQUJMRV9TQ1JFRU5TICYmICFVSU1hbmFnZXIuZ2V0Vmlld01hbmFnZXJDb25maWcoJ1JOU1NjcmVlbicpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIGBTY3JlZW4gbmF0aXZlIG1vZHVsZSBoYXNuJ3QgYmVlbiBsaW5rZWQuIFBsZWFzZSBjaGVjayB0aGUgcmVhY3QtbmF0aXZlLXNjcmVlbnMgUkVBRE1FIGZvciBtb3JlIGRldGFpbHNgXG4gICAgKTtcbiAgfVxufVxuXG4vLyBjb25zdCB0aGF0IHRlbGxzIGlmIHRoZSBsaWJyYXJ5IHNob3VsZCB1c2UgbmV3IGltcGxlbWVudGF0aW9uLCB3aWxsIGJlIHVuZGVmaW5lZCBmb3Igb2xkZXIgdmVyc2lvbnNcbmNvbnN0IHNob3VsZFVzZUFjdGl2aXR5U3RhdGUgPSB0cnVlO1xuXG5mdW5jdGlvbiBzY3JlZW5zRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuIEVOQUJMRV9TQ1JFRU5TO1xufVxuXG4vLyBXZSBpbml0aWFsaXplIHRoZXNlIGxhemlseSBzbyB0aGF0IGltcG9ydGluZyB0aGUgbW9kdWxlIGRvZXNuJ3QgdGhyb3cgZXJyb3Igd2hlbiBub3QgbGlua2VkXG4vLyBUaGlzIGlzIG5lY2Vzc2FyeSBjb3ogbGlicmFyaWVzIHN1Y2ggYXMgUmVhY3QgTmF2aWdhdGlvbiBpbXBvcnQgdGhlIGxpYnJhcnkgd2hlcmUgaXQgbWF5IG5vdCBiZSBlbmFibGVkXG5sZXQgTmF0aXZlU2NyZWVuVmFsdWU6IFJlYWN0LkNvbXBvbmVudFR5cGU8U2NyZWVuUHJvcHM+O1xubGV0IE5hdGl2ZVNjcmVlbkNvbnRhaW5lclZhbHVlOiBSZWFjdC5Db21wb25lbnRUeXBlPFNjcmVlbkNvbnRhaW5lclByb3BzPjtcbmxldCBOYXRpdmVTY3JlZW5TdGFjazogUmVhY3QuQ29tcG9uZW50VHlwZTxTY3JlZW5TdGFja1Byb3BzPjtcbmxldCBOYXRpdmVTY3JlZW5TdGFja0hlYWRlckNvbmZpZzogUmVhY3QuQ29tcG9uZW50VHlwZTxTY3JlZW5TdGFja0hlYWRlckNvbmZpZ1Byb3BzPjtcbmxldCBOYXRpdmVTY3JlZW5TdGFja0hlYWRlclN1YnZpZXc6IFJlYWN0LkNvbXBvbmVudFR5cGU8UmVhY3QuUHJvcHNXaXRoQ2hpbGRyZW48XG4gIFZpZXdQcm9wcyAmIHsgdHlwZT86IEhlYWRlclN1YnZpZXdUeXBlcyB9XG4+PjtcbmxldCBBbmltYXRlZE5hdGl2ZVNjcmVlbjogUmVhY3QuQ29tcG9uZW50VHlwZTxTY3JlZW5Qcm9wcz47XG5sZXQgTmF0aXZlU2VhcmNoQmFyOiBSZWFjdC5Db21wb25lbnRUeXBlPFNlYXJjaEJhclByb3BzPjtcblxuY29uc3QgU2NyZWVuc05hdGl2ZU1vZHVsZXMgPSB7XG4gIGdldCBOYXRpdmVTY3JlZW4oKSB7XG4gICAgTmF0aXZlU2NyZWVuVmFsdWUgPVxuICAgICAgTmF0aXZlU2NyZWVuVmFsdWUgfHwgcmVxdWlyZU5hdGl2ZUNvbXBvbmVudCgnUk5TU2NyZWVuJyk7XG4gICAgcmV0dXJuIE5hdGl2ZVNjcmVlblZhbHVlO1xuICB9LFxuXG4gIGdldCBOYXRpdmVTY3JlZW5Db250YWluZXIoKSB7XG4gICAgTmF0aXZlU2NyZWVuQ29udGFpbmVyVmFsdWUgPVxuICAgICAgTmF0aXZlU2NyZWVuQ29udGFpbmVyVmFsdWUgfHxcbiAgICAgIHJlcXVpcmVOYXRpdmVDb21wb25lbnQoJ1JOU1NjcmVlbkNvbnRhaW5lcicpO1xuICAgIHJldHVybiBOYXRpdmVTY3JlZW5Db250YWluZXJWYWx1ZTtcbiAgfSxcblxuICBnZXQgTmF0aXZlU2NyZWVuU3RhY2soKSB7XG4gICAgTmF0aXZlU2NyZWVuU3RhY2sgPVxuICAgICAgTmF0aXZlU2NyZWVuU3RhY2sgfHwgcmVxdWlyZU5hdGl2ZUNvbXBvbmVudCgnUk5TU2NyZWVuU3RhY2snKTtcbiAgICByZXR1cm4gTmF0aXZlU2NyZWVuU3RhY2s7XG4gIH0sXG5cbiAgZ2V0IE5hdGl2ZVNjcmVlblN0YWNrSGVhZGVyQ29uZmlnKCkge1xuICAgIE5hdGl2ZVNjcmVlblN0YWNrSGVhZGVyQ29uZmlnID1cbiAgICAgIE5hdGl2ZVNjcmVlblN0YWNrSGVhZGVyQ29uZmlnIHx8XG4gICAgICByZXF1aXJlTmF0aXZlQ29tcG9uZW50KCdSTlNTY3JlZW5TdGFja0hlYWRlckNvbmZpZycpO1xuICAgIHJldHVybiBOYXRpdmVTY3JlZW5TdGFja0hlYWRlckNvbmZpZztcbiAgfSxcblxuICBnZXQgTmF0aXZlU2NyZWVuU3RhY2tIZWFkZXJTdWJ2aWV3KCkge1xuICAgIE5hdGl2ZVNjcmVlblN0YWNrSGVhZGVyU3VidmlldyA9XG4gICAgICBOYXRpdmVTY3JlZW5TdGFja0hlYWRlclN1YnZpZXcgfHxcbiAgICAgIHJlcXVpcmVOYXRpdmVDb21wb25lbnQoJ1JOU1NjcmVlblN0YWNrSGVhZGVyU3VidmlldycpO1xuICAgIHJldHVybiBOYXRpdmVTY3JlZW5TdGFja0hlYWRlclN1YnZpZXc7XG4gIH0sXG5cbiAgZ2V0IE5hdGl2ZVNlYXJjaEJhcigpIHtcbiAgICBOYXRpdmVTZWFyY2hCYXIgPSBOYXRpdmVTZWFyY2hCYXIgfHwgcmVxdWlyZU5hdGl2ZUNvbXBvbmVudCgnUk5TU2VhcmNoQmFyJyk7XG4gICAgcmV0dXJuIE5hdGl2ZVNlYXJjaEJhcjtcbiAgfSxcbn07XG5cbmNsYXNzIFNjcmVlbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxTY3JlZW5Qcm9wcz4ge1xuICBwcml2YXRlIHJlZjogUmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlldz4gfCBudWxsID0gbnVsbDtcblxuICBzZXROYXRpdmVQcm9wcyhwcm9wczogU2NyZWVuUHJvcHMpOiB2b2lkIHtcbiAgICB0aGlzLnJlZj8uc2V0TmF0aXZlUHJvcHMocHJvcHMpO1xuICB9XG5cbiAgc2V0UmVmID0gKHJlZjogUmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlldz4gfCBudWxsKTogdm9pZCA9PiB7XG4gICAgdGhpcy5yZWYgPSByZWY7XG4gICAgdGhpcy5wcm9wcy5vbkNvbXBvbmVudFJlZj8uKHJlZik7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZW5hYmxlZCA9IEVOQUJMRV9TQ1JFRU5TIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKGVuYWJsZWQgJiYgaXNQbGF0Zm9ybVN1cHBvcnRlZCkge1xuICAgICAgQW5pbWF0ZWROYXRpdmVTY3JlZW4gPVxuICAgICAgICBBbmltYXRlZE5hdGl2ZVNjcmVlbiB8fFxuICAgICAgICBBbmltYXRlZC5jcmVhdGVBbmltYXRlZENvbXBvbmVudChTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW4pO1xuXG4gICAgICBsZXQge1xuICAgICAgICAvLyBGaWx0ZXIgb3V0IGFjdGl2ZSBwcm9wIGluIHRoaXMgY2FzZSBiZWNhdXNlIGl0IGlzIHVudXNlZCBhbmRcbiAgICAgICAgLy8gY2FuIGNhdXNlIHByb2JsZW1zIGRlcGVuZGluZyBvbiByZWFjdC1uYXRpdmUgdmVyc2lvbjpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LW5hdmlnYXRpb24vcmVhY3QtbmF2aWdhdGlvbi9pc3N1ZXMvNDg4NlxuICAgICAgICAvLyBzYW1lIGZvciBlbmFibGVkIHByb3BcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICBlbmFibGVkLFxuICAgICAgICBhY3RpdmUsXG4gICAgICAgIGFjdGl2aXR5U3RhdGUsXG4gICAgICAgIHN0YXR1c0JhckNvbG9yLFxuICAgICAgICAuLi5yZXN0XG4gICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgaWYgKGFjdGl2ZSAhPT0gdW5kZWZpbmVkICYmIGFjdGl2aXR5U3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ0l0IGFwcGVhcnMgdGhhdCB5b3UgYXJlIHVzaW5nIG9sZCB2ZXJzaW9uIG9mIHJlYWN0LW5hdmlnYXRpb24gbGlicmFyeS4gUGxlYXNlIHVwZGF0ZSBAcmVhY3QtbmF2aWdhdGlvbi9ib3R0b20tdGFicywgQHJlYWN0LW5hdmlnYXRpb24vc3RhY2sgYW5kIEByZWFjdC1uYXZpZ2F0aW9uL2RyYXdlciB0byB2ZXJzaW9uIDUuMTAuMCBvciBhYm92ZSB0byB0YWtlIGZ1bGwgYWR2YW50YWdlIG9mIG5ldyBmdW5jdGlvbmFsaXR5IGFkZGVkIHRvIHJlYWN0LW5hdGl2ZS1zY3JlZW5zJ1xuICAgICAgICApO1xuICAgICAgICBhY3Rpdml0eVN0YXRlID0gYWN0aXZlICE9PSAwID8gMiA6IDA7IC8vIGluIHRoZSBuZXcgdmVyc2lvbiwgd2UgbmVlZCBvbmUgb2YgdGhlIHNjcmVlbnMgdG8gaGF2ZSB2YWx1ZSBvZiAyIGFmdGVyIHRoZSB0cmFuc2l0aW9uXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKHN0YXR1c0JhckNvbG9yKTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFuaW1hdGVkTmF0aXZlU2NyZWVuXG4gICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgc3RhdHVzQmFyQ29sb3I9e3Byb2Nlc3NlZENvbG9yfVxuICAgICAgICAgIGFjdGl2aXR5U3RhdGU9e2FjdGl2aXR5U3RhdGV9XG4gICAgICAgICAgcmVmPXt0aGlzLnNldFJlZn1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNhbWUgcmVhc29uIGFzIGFib3ZlXG4gICAgICBsZXQge1xuICAgICAgICBhY3RpdmUsXG4gICAgICAgIGFjdGl2aXR5U3RhdGUsXG4gICAgICAgIHN0eWxlLFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgIGVuYWJsZWQsXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgb25Db21wb25lbnRSZWYsXG4gICAgICAgIC4uLnJlc3RcbiAgICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICBpZiAoYWN0aXZlICE9PSB1bmRlZmluZWQgJiYgYWN0aXZpdHlTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFjdGl2aXR5U3RhdGUgPSBhY3RpdmUgIT09IDAgPyAyIDogMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgICAgc3R5bGU9e1tzdHlsZSwgeyBkaXNwbGF5OiBhY3Rpdml0eVN0YXRlICE9PSAwID8gJ2ZsZXgnIDogJ25vbmUnIH1dfVxuICAgICAgICAgIHJlZj17dGhpcy5zZXRSZWZ9XG4gICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBTY3JlZW5Db250YWluZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8U2NyZWVuQ29udGFpbmVyUHJvcHM+IHtcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZW5hYmxlZCA9IEVOQUJMRV9TQ1JFRU5TLCAuLi5yZXN0IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKGVuYWJsZWQgJiYgaXNQbGF0Zm9ybVN1cHBvcnRlZCkge1xuICAgICAgcmV0dXJuIDxTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5Db250YWluZXIgey4uLnJlc3R9IC8+O1xuICAgIH1cblxuICAgIHJldHVybiA8VmlldyB7Li4ucmVzdH0gLz47XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBoZWFkZXJTdWJ2aWV3OiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgfSxcbn0pO1xuXG5jb25zdCBTY3JlZW5TdGFja0hlYWRlckJhY2tCdXR0b25JbWFnZSA9IChwcm9wczogSW1hZ2VQcm9wcyk6IEpTWC5FbGVtZW50ID0+IChcbiAgPFNjcmVlbnNOYXRpdmVNb2R1bGVzLk5hdGl2ZVNjcmVlblN0YWNrSGVhZGVyU3Vidmlld1xuICAgIHR5cGU9XCJiYWNrXCJcbiAgICBzdHlsZT17c3R5bGVzLmhlYWRlclN1YnZpZXd9PlxuICAgIDxJbWFnZSByZXNpemVNb2RlPVwiY2VudGVyXCIgZmFkZUR1cmF0aW9uPXswfSB7Li4ucHJvcHN9IC8+XG4gIDwvU2NyZWVuc05hdGl2ZU1vZHVsZXMuTmF0aXZlU2NyZWVuU3RhY2tIZWFkZXJTdWJ2aWV3PlxuKTtcblxuY29uc3QgU2NyZWVuU3RhY2tIZWFkZXJSaWdodFZpZXcgPSAoXG4gIHByb3BzOiBSZWFjdC5Qcm9wc1dpdGhDaGlsZHJlbjxWaWV3UHJvcHM+XG4pOiBKU1guRWxlbWVudCA9PiAoXG4gIDxTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5TdGFja0hlYWRlclN1YnZpZXdcbiAgICB7Li4ucHJvcHN9XG4gICAgdHlwZT1cInJpZ2h0XCJcbiAgICBzdHlsZT17c3R5bGVzLmhlYWRlclN1YnZpZXd9XG4gIC8+XG4pO1xuXG5jb25zdCBTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3ID0gKFxuICBwcm9wczogUmVhY3QuUHJvcHNXaXRoQ2hpbGRyZW48Vmlld1Byb3BzPlxuKTogSlNYLkVsZW1lbnQgPT4gKFxuICA8U2NyZWVuc05hdGl2ZU1vZHVsZXMuTmF0aXZlU2NyZWVuU3RhY2tIZWFkZXJTdWJ2aWV3XG4gICAgey4uLnByb3BzfVxuICAgIHR5cGU9XCJsZWZ0XCJcbiAgICBzdHlsZT17c3R5bGVzLmhlYWRlclN1YnZpZXd9XG4gIC8+XG4pO1xuXG5jb25zdCBTY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXcgPSAoXG4gIHByb3BzOiBSZWFjdC5Qcm9wc1dpdGhDaGlsZHJlbjxWaWV3UHJvcHM+XG4pOiBKU1guRWxlbWVudCA9PiAoXG4gIDxTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5TdGFja0hlYWRlclN1YnZpZXdcbiAgICB7Li4ucHJvcHN9XG4gICAgdHlwZT1cImNlbnRlclwiXG4gICAgc3R5bGU9e3N0eWxlcy5oZWFkZXJTdWJ2aWV3fVxuICAvPlxuKTtcblxuY29uc3QgU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3ID0gKFxuICBwcm9wczogUmVhY3QuUHJvcHNXaXRoQ2hpbGRyZW48U2VhcmNoQmFyUHJvcHM+XG4pOiBKU1guRWxlbWVudCA9PiAoXG4gIDxTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5TdGFja0hlYWRlclN1YnZpZXdcbiAgICB7Li4ucHJvcHN9XG4gICAgdHlwZT1cInNlYXJjaEJhclwiXG4gICAgc3R5bGU9e3N0eWxlcy5oZWFkZXJTdWJ2aWV3fVxuICAvPlxuKTtcblxuZXhwb3J0IHR5cGUge1xuICBTdGFja1ByZXNlbnRhdGlvblR5cGVzLFxuICBTdGFja0FuaW1hdGlvblR5cGVzLFxuICBCbHVyRWZmZWN0VHlwZXMsXG4gIFNjcmVlblJlcGxhY2VUeXBlcyxcbiAgU2NyZWVuT3JpZW50YXRpb25UeXBlcyxcbiAgSGVhZGVyU3Vidmlld1R5cGVzLFxuICBTY3JlZW5Qcm9wcyxcbiAgU2NyZWVuQ29udGFpbmVyUHJvcHMsXG4gIFNjcmVlblN0YWNrUHJvcHMsXG4gIFNjcmVlblN0YWNrSGVhZGVyQ29uZmlnUHJvcHMsXG4gIFNlYXJjaEJhclByb3BzLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIHRoZXNlIGFyZSBjbGFzc2VzIHNvIHRoZXkgYXJlIG5vdCBldmFsdWF0ZWQgdW50aWwgdXNlZFxuICAvLyBzbyBubyBuZWVkIHRvIHVzZSBnZXR0ZXJzIGZvciB0aGVtXG4gIFNjcmVlbixcbiAgU2NyZWVuQ29udGFpbmVyLFxuXG4gIGdldCBOYXRpdmVTY3JlZW4oKSB7XG4gICAgcmV0dXJuIFNjcmVlbnNOYXRpdmVNb2R1bGVzLk5hdGl2ZVNjcmVlbjtcbiAgfSxcblxuICBnZXQgTmF0aXZlU2NyZWVuQ29udGFpbmVyKCkge1xuICAgIHJldHVybiBTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5Db250YWluZXI7XG4gIH0sXG5cbiAgZ2V0IFNjcmVlblN0YWNrKCkge1xuICAgIHJldHVybiBTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5TdGFjaztcbiAgfSxcbiAgZ2V0IFNjcmVlblN0YWNrSGVhZGVyQ29uZmlnKCkge1xuICAgIHJldHVybiBTY3JlZW5zTmF0aXZlTW9kdWxlcy5OYXRpdmVTY3JlZW5TdGFja0hlYWRlckNvbmZpZztcbiAgfSxcbiAgZ2V0IFNjcmVlblN0YWNrSGVhZGVyU3VidmlldygpIHtcbiAgICByZXR1cm4gU2NyZWVuc05hdGl2ZU1vZHVsZXMuTmF0aXZlU2NyZWVuU3RhY2tIZWFkZXJTdWJ2aWV3O1xuICB9LFxuICBnZXQgU2VhcmNoQmFyKCkge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2lvcycpIHtcbiAgICAgIGNvbnNvbGUud2FybignSW1wb3J0aW5nIFNlYXJjaEJhciBpcyBvbmx5IHZhbGlkIG9uIGlPUyBkZXZpY2VzLicpO1xuICAgICAgcmV0dXJuIFZpZXc7XG4gICAgfVxuXG4gICAgcmV0dXJuIFNjcmVlbnNOYXRpdmVNb2R1bGVzLk5hdGl2ZVNlYXJjaEJhcjtcbiAgfSxcbiAgLy8gdGhlc2UgYXJlIGZ1bmN0aW9ucyBhbmQgd2lsbCBub3QgYmUgZXZhbHVhdGVkIHVudGlsIHVzZWRcbiAgLy8gc28gbm8gbmVlZCB0byB1c2UgZ2V0dGVycyBmb3IgdGhlbVxuICBTY3JlZW5TdGFja0hlYWRlckJhY2tCdXR0b25JbWFnZSxcbiAgU2NyZWVuU3RhY2tIZWFkZXJSaWdodFZpZXcsXG4gIFNjcmVlblN0YWNrSGVhZGVyTGVmdFZpZXcsXG4gIFNjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldyxcbiAgU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3LFxuXG4gIGVuYWJsZVNjcmVlbnMsXG4gIHNjcmVlbnNFbmFibGVkLFxuICBzaG91bGRVc2VBY3Rpdml0eVN0YXRlLFxufTtcbiJdfQ==