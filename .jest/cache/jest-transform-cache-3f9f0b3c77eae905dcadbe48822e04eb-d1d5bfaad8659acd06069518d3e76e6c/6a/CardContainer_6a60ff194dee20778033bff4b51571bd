f4a3b6a9882402814a715568be10bbc7
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _native = require("@react-navigation/native");

var _Card = _interopRequireDefault(require("./Card"));

var _HeaderHeightContext = _interopRequireDefault(require("../../utils/HeaderHeightContext"));

var _HeaderShownContext = _interopRequireDefault(require("../../utils/HeaderShownContext"));

var _PreviousSceneContext = _interopRequireDefault(require("../../utils/PreviousSceneContext"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

var EPSILON = 0.1;

function CardContainer(_ref) {
  var active = _ref.active,
      cardOverlay = _ref.cardOverlay,
      cardOverlayEnabled = _ref.cardOverlayEnabled,
      cardShadowEnabled = _ref.cardShadowEnabled,
      cardStyle = _ref.cardStyle,
      cardStyleInterpolator = _ref.cardStyleInterpolator,
      closing = _ref.closing,
      gesture = _ref.gesture,
      focused = _ref.focused,
      gestureDirection = _ref.gestureDirection,
      gestureEnabled = _ref.gestureEnabled,
      gestureResponseDistance = _ref.gestureResponseDistance,
      gestureVelocityImpact = _ref.gestureVelocityImpact,
      getPreviousScene = _ref.getPreviousScene,
      getFocusedRoute = _ref.getFocusedRoute,
      mode = _ref.mode,
      headerMode = _ref.headerMode,
      headerShown = _ref.headerShown,
      headerStyleInterpolator = _ref.headerStyleInterpolator,
      hasAbsoluteHeader = _ref.hasAbsoluteHeader,
      headerHeight = _ref.headerHeight,
      onHeaderHeightChange = _ref.onHeaderHeightChange,
      isParentHeaderShown = _ref.isParentHeaderShown,
      index = _ref.index,
      layout = _ref.layout,
      onCloseRoute = _ref.onCloseRoute,
      onOpenRoute = _ref.onOpenRoute,
      onPageChangeCancel = _ref.onPageChangeCancel,
      onPageChangeConfirm = _ref.onPageChangeConfirm,
      onPageChangeStart = _ref.onPageChangeStart,
      onGestureCancel = _ref.onGestureCancel,
      onGestureEnd = _ref.onGestureEnd,
      onGestureStart = _ref.onGestureStart,
      onTransitionEnd = _ref.onTransitionEnd,
      onTransitionStart = _ref.onTransitionStart,
      renderHeader = _ref.renderHeader,
      renderScene = _ref.renderScene,
      safeAreaInsetBottom = _ref.safeAreaInsetBottom,
      safeAreaInsetLeft = _ref.safeAreaInsetLeft,
      safeAreaInsetRight = _ref.safeAreaInsetRight,
      safeAreaInsetTop = _ref.safeAreaInsetTop,
      scene = _ref.scene,
      transitionSpec = _ref.transitionSpec;

  var handleOpen = function handleOpen() {
    var route = scene.route;
    onTransitionEnd === null || onTransitionEnd === void 0 ? void 0 : onTransitionEnd({
      route: route
    }, false);
    onOpenRoute({
      route: route
    });
  };

  var handleClose = function handleClose() {
    var route = scene.route;
    onTransitionEnd === null || onTransitionEnd === void 0 ? void 0 : onTransitionEnd({
      route: route
    }, true);
    onCloseRoute({
      route: route
    });
  };

  var handleGestureBegin = function handleGestureBegin() {
    var route = scene.route;
    onPageChangeStart === null || onPageChangeStart === void 0 ? void 0 : onPageChangeStart();
    onGestureStart === null || onGestureStart === void 0 ? void 0 : onGestureStart({
      route: route
    });
  };

  var handleGestureCanceled = function handleGestureCanceled() {
    var route = scene.route;
    onPageChangeCancel === null || onPageChangeCancel === void 0 ? void 0 : onPageChangeCancel();
    onGestureCancel === null || onGestureCancel === void 0 ? void 0 : onGestureCancel({
      route: route
    });
  };

  var handleGestureEnd = function handleGestureEnd() {
    var route = scene.route;
    onGestureEnd === null || onGestureEnd === void 0 ? void 0 : onGestureEnd({
      route: route
    });
  };

  var handleTransition = function handleTransition(_ref2) {
    var closing = _ref2.closing,
        gesture = _ref2.gesture;
    var route = scene.route;

    if (!gesture) {
      onPageChangeConfirm === null || onPageChangeConfirm === void 0 ? void 0 : onPageChangeConfirm(true);
    } else if (active && closing) {
      onPageChangeConfirm === null || onPageChangeConfirm === void 0 ? void 0 : onPageChangeConfirm(false);
    } else {
      onPageChangeCancel === null || onPageChangeCancel === void 0 ? void 0 : onPageChangeCancel();
    }

    onTransitionStart === null || onTransitionStart === void 0 ? void 0 : onTransitionStart({
      route: route
    }, closing);
  };

  var insets = {
    top: safeAreaInsetTop,
    right: safeAreaInsetRight,
    bottom: safeAreaInsetBottom,
    left: safeAreaInsetLeft
  };

  var _ref3 = (0, _native.useTheme)(),
      colors = _ref3.colors;

  var _React$useState = React.useState('box-none'),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      pointerEvents = _React$useState2[0],
      setPointerEvents = _React$useState2[1];

  React.useEffect(function () {
    var _scene$progress$next, _scene$progress$next$;

    var listener = (_scene$progress$next = scene.progress.next) === null || _scene$progress$next === void 0 ? void 0 : (_scene$progress$next$ = _scene$progress$next.addListener) === null || _scene$progress$next$ === void 0 ? void 0 : _scene$progress$next$.call(_scene$progress$next, function (_ref4) {
      var value = _ref4.value;
      setPointerEvents(value <= EPSILON ? 'box-none' : 'none');
    });
    return function () {
      if (listener) {
        var _scene$progress$next2, _scene$progress$next3;

        (_scene$progress$next2 = scene.progress.next) === null || _scene$progress$next2 === void 0 ? void 0 : (_scene$progress$next3 = _scene$progress$next2.removeListener) === null || _scene$progress$next3 === void 0 ? void 0 : _scene$progress$next3.call(_scene$progress$next2, listener);
      }
    };
  }, [pointerEvents, scene.progress.next]);
  var isCurrentHeaderShown = headerMode !== 'none' && headerShown !== false;
  var previousScene = getPreviousScene({
    route: scene.route
  });
  return React.createElement(_Card.default, {
    index: index,
    gestureDirection: gestureDirection,
    layout: layout,
    insets: insets,
    gesture: gesture,
    current: scene.progress.current,
    next: scene.progress.next,
    closing: closing,
    onOpen: handleOpen,
    onClose: handleClose,
    overlay: cardOverlay,
    overlayEnabled: cardOverlayEnabled,
    shadowEnabled: cardShadowEnabled,
    onTransition: handleTransition,
    onGestureBegin: handleGestureBegin,
    onGestureCanceled: handleGestureCanceled,
    onGestureEnd: handleGestureEnd,
    gestureEnabled: gestureEnabled,
    gestureResponseDistance: gestureResponseDistance,
    gestureVelocityImpact: gestureVelocityImpact,
    transitionSpec: transitionSpec,
    styleInterpolator: cardStyleInterpolator,
    accessibilityElementsHidden: !focused,
    importantForAccessibility: focused ? 'auto' : 'no-hide-descendants',
    pointerEvents: active ? 'box-none' : pointerEvents,
    pageOverflowEnabled: headerMode === 'screen' && mode === 'card',
    containerStyle: hasAbsoluteHeader ? {
      marginTop: headerHeight
    } : null,
    contentStyle: [{
      backgroundColor: colors.background
    }, cardStyle],
    style: [{
      overflow: active ? undefined : 'hidden'
    }, _reactNative.StyleSheet.absoluteFill]
  }, React.createElement(_reactNative.View, {
    style: styles.container
  }, React.createElement(_reactNative.View, {
    style: styles.scene
  }, React.createElement(_PreviousSceneContext.default.Provider, {
    value: previousScene
  }, React.createElement(_HeaderShownContext.default.Provider, {
    value: isParentHeaderShown || isCurrentHeaderShown
  }, React.createElement(_HeaderHeightContext.default.Provider, {
    value: headerHeight
  }, renderScene({
    route: scene.route
  }))))), headerMode === 'screen' ? renderHeader({
    mode: 'screen',
    layout: layout,
    insets: insets,
    scenes: [previousScene, scene],
    getPreviousScene: getPreviousScene,
    getFocusedRoute: getFocusedRoute,
    gestureDirection: gestureDirection,
    styleInterpolator: headerStyleInterpolator,
    onContentHeightChange: onHeaderHeightChange
  }) : null));
}

var _default = React.memo(CardContainer);

exports.default = _default;

var styles = _reactNative.StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: 'column-reverse'
  },
  scene: {
    flex: 1
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhcmRDb250YWluZXIudHN4Il0sIm5hbWVzIjpbIkVQU0lMT04iLCJ0cmFuc2l0aW9uU3BlYyIsImhhbmRsZU9wZW4iLCJyb3V0ZSIsIm9uVHJhbnNpdGlvbkVuZCIsIm9uT3BlblJvdXRlIiwiaGFuZGxlQ2xvc2UiLCJvbkNsb3NlUm91dGUiLCJoYW5kbGVHZXN0dXJlQmVnaW4iLCJvblBhZ2VDaGFuZ2VTdGFydCIsIm9uR2VzdHVyZVN0YXJ0IiwiaGFuZGxlR2VzdHVyZUNhbmNlbGVkIiwib25QYWdlQ2hhbmdlQ2FuY2VsIiwib25HZXN0dXJlQ2FuY2VsIiwiaGFuZGxlR2VzdHVyZUVuZCIsIm9uR2VzdHVyZUVuZCIsImhhbmRsZVRyYW5zaXRpb24iLCJnZXN0dXJlIiwib25QYWdlQ2hhbmdlQ29uZmlybSIsImFjdGl2ZSIsIm9uVHJhbnNpdGlvblN0YXJ0IiwiaW5zZXRzIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0Iiwic2FmZUFyZWFJbnNldExlZnQiLCJjb2xvcnMiLCJSZWFjdCIsImxpc3RlbmVyIiwidmFsdWUiLCJzZXRQb2ludGVyRXZlbnRzIiwic2NlbmUiLCJpc0N1cnJlbnRIZWFkZXJTaG93biIsImhlYWRlck1vZGUiLCJoZWFkZXJTaG93biIsInByZXZpb3VzU2NlbmUiLCJnZXRQcmV2aW91c1NjZW5lIiwiZm9jdXNlZCIsIm1vZGUiLCJoYXNBYnNvbHV0ZUhlYWRlciIsIm1hcmdpblRvcCIsImhlYWRlckhlaWdodCIsImJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmQiLCJvdmVyZmxvdyIsIlN0eWxlU2hlZXQiLCJzdHlsZXMiLCJjb250YWluZXIiLCJpc1BhcmVudEhlYWRlclNob3duIiwicmVuZGVyU2NlbmUiLCJyZW5kZXJIZWFkZXIiLCJsYXlvdXQiLCJzY2VuZXMiLCJnZXRGb2N1c2VkUm91dGUiLCJnZXN0dXJlRGlyZWN0aW9uIiwic3R5bGVJbnRlcnBvbGF0b3IiLCJvbkNvbnRlbnRIZWlnaHRDaGFuZ2UiLCJvbkhl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QUFBLGdCQVBXLEVBT1hBLGdCQVBXO0FBUVhDLElBQUFBLGlCQUFpQixFQVJOLHVCQUFBO0FBU1hDLElBQUFBLHFCQUFxQixFQUFFQztBQVRaLEdBQUQsQ0FEZixHQW5EUCxJQXVDSSxDQXRDRixDQURGO0FBbUVEOztlQUVjOUIsS0FBSyxDQUFMQSxJQUFBQSxDQUFBQSxhQUFBQSxDOzs7O0FBRWYsSUFBTW1CLE1BQU0sR0FBRyxZQUFBLENBQUEsVUFBQSxDQUFBLE1BQUEsQ0FBa0I7QUFDL0JDLEVBQUFBLFNBQVMsRUFBRTtBQUNUVyxJQUFBQSxJQUFJLEVBREssQ0FBQTtBQUVUQyxJQUFBQSxhQUFhLEVBQUU7QUFGTixHQURvQjtBQUsvQjVCLEVBQUFBLEtBQUssRUFBRTtBQUNMMkIsSUFBQUEsSUFBSSxFQUFFO0FBREQ7QUFMd0IsQ0FBbEIsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEFuaW1hdGVkLCBWaWV3LCBTdHlsZVNoZWV0LCBTdHlsZVByb3AsIFZpZXdTdHlsZSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgeyBSb3V0ZSwgdXNlVGhlbWUgfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0IHR5cGUgeyBQcm9wcyBhcyBIZWFkZXJDb250YWluZXJQcm9wcyB9IGZyb20gJy4uL0hlYWRlci9IZWFkZXJDb250YWluZXInO1xuaW1wb3J0IENhcmQgZnJvbSAnLi9DYXJkJztcbmltcG9ydCBIZWFkZXJIZWlnaHRDb250ZXh0IGZyb20gJy4uLy4uL3V0aWxzL0hlYWRlckhlaWdodENvbnRleHQnO1xuaW1wb3J0IEhlYWRlclNob3duQ29udGV4dCBmcm9tICcuLi8uLi91dGlscy9IZWFkZXJTaG93bkNvbnRleHQnO1xuaW1wb3J0IFByZXZpb3VzU2NlbmVDb250ZXh0IGZyb20gJy4uLy4uL3V0aWxzL1ByZXZpb3VzU2NlbmVDb250ZXh0JztcbmltcG9ydCB0eXBlIHtcbiAgU2NlbmUsXG4gIExheW91dCxcbiAgU3RhY2tIZWFkZXJNb2RlLFxuICBTdGFja0NhcmRNb2RlLFxuICBUcmFuc2l0aW9uUHJlc2V0LFxufSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbnR5cGUgUHJvcHMgPSBUcmFuc2l0aW9uUHJlc2V0ICYge1xuICBpbmRleDogbnVtYmVyO1xuICBhY3RpdmU6IGJvb2xlYW47XG4gIGZvY3VzZWQ6IGJvb2xlYW47XG4gIGNsb3Npbmc6IGJvb2xlYW47XG4gIGxheW91dDogTGF5b3V0O1xuICBnZXN0dXJlOiBBbmltYXRlZC5WYWx1ZTtcbiAgc2NlbmU6IFNjZW5lPFJvdXRlPHN0cmluZz4+O1xuICBzYWZlQXJlYUluc2V0VG9wOiBudW1iZXI7XG4gIHNhZmVBcmVhSW5zZXRSaWdodDogbnVtYmVyO1xuICBzYWZlQXJlYUluc2V0Qm90dG9tOiBudW1iZXI7XG4gIHNhZmVBcmVhSW5zZXRMZWZ0OiBudW1iZXI7XG4gIGNhcmRPdmVybGF5PzogKHByb3BzOiB7XG4gICAgc3R5bGU6IEFuaW1hdGVkLldpdGhBbmltYXRlZFZhbHVlPFN0eWxlUHJvcDxWaWV3U3R5bGU+PjtcbiAgfSkgPT4gUmVhY3QuUmVhY3ROb2RlO1xuICBjYXJkT3ZlcmxheUVuYWJsZWQ/OiBib29sZWFuO1xuICBjYXJkU2hhZG93RW5hYmxlZD86IGJvb2xlYW47XG4gIGNhcmRTdHlsZT86IFN0eWxlUHJvcDxWaWV3U3R5bGU+O1xuICBnZXRQcmV2aW91c1NjZW5lOiAocHJvcHM6IHtcbiAgICByb3V0ZTogUm91dGU8c3RyaW5nPjtcbiAgfSkgPT4gU2NlbmU8Um91dGU8c3RyaW5nPj4gfCB1bmRlZmluZWQ7XG4gIGdldEZvY3VzZWRSb3V0ZTogKCkgPT4gUm91dGU8c3RyaW5nPjtcbiAgcmVuZGVySGVhZGVyOiAocHJvcHM6IEhlYWRlckNvbnRhaW5lclByb3BzKSA9PiBSZWFjdC5SZWFjdE5vZGU7XG4gIHJlbmRlclNjZW5lOiAocHJvcHM6IHsgcm91dGU6IFJvdXRlPHN0cmluZz4gfSkgPT4gUmVhY3QuUmVhY3ROb2RlO1xuICBvbk9wZW5Sb3V0ZTogKHByb3BzOiB7IHJvdXRlOiBSb3V0ZTxzdHJpbmc+IH0pID0+IHZvaWQ7XG4gIG9uQ2xvc2VSb3V0ZTogKHByb3BzOiB7IHJvdXRlOiBSb3V0ZTxzdHJpbmc+IH0pID0+IHZvaWQ7XG4gIG9uVHJhbnNpdGlvblN0YXJ0PzogKFxuICAgIHByb3BzOiB7IHJvdXRlOiBSb3V0ZTxzdHJpbmc+IH0sXG4gICAgY2xvc2luZzogYm9vbGVhblxuICApID0+IHZvaWQ7XG4gIG9uVHJhbnNpdGlvbkVuZD86IChwcm9wczogeyByb3V0ZTogUm91dGU8c3RyaW5nPiB9LCBjbG9zaW5nOiBib29sZWFuKSA9PiB2b2lkO1xuICBvblBhZ2VDaGFuZ2VTdGFydD86ICgpID0+IHZvaWQ7XG4gIG9uUGFnZUNoYW5nZUNvbmZpcm0/OiAoZm9yY2U6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIG9uUGFnZUNoYW5nZUNhbmNlbD86ICgpID0+IHZvaWQ7XG4gIG9uR2VzdHVyZVN0YXJ0PzogKHByb3BzOiB7IHJvdXRlOiBSb3V0ZTxzdHJpbmc+IH0pID0+IHZvaWQ7XG4gIG9uR2VzdHVyZUVuZD86IChwcm9wczogeyByb3V0ZTogUm91dGU8c3RyaW5nPiB9KSA9PiB2b2lkO1xuICBvbkdlc3R1cmVDYW5jZWw/OiAocHJvcHM6IHsgcm91dGU6IFJvdXRlPHN0cmluZz4gfSkgPT4gdm9pZDtcbiAgZ2VzdHVyZUVuYWJsZWQ/OiBib29sZWFuO1xuICBnZXN0dXJlUmVzcG9uc2VEaXN0YW5jZT86IHtcbiAgICB2ZXJ0aWNhbD86IG51bWJlcjtcbiAgICBob3Jpem9udGFsPzogbnVtYmVyO1xuICB9O1xuICBnZXN0dXJlVmVsb2NpdHlJbXBhY3Q/OiBudW1iZXI7XG4gIG1vZGU6IFN0YWNrQ2FyZE1vZGU7XG4gIGhlYWRlck1vZGU6IFN0YWNrSGVhZGVyTW9kZTtcbiAgaGVhZGVyU2hvd246IGJvb2xlYW47XG4gIGhhc0Fic29sdXRlSGVhZGVyOiBib29sZWFuO1xuICBoZWFkZXJIZWlnaHQ6IG51bWJlcjtcbiAgb25IZWFkZXJIZWlnaHRDaGFuZ2U6IChwcm9wczoge1xuICAgIHJvdXRlOiBSb3V0ZTxzdHJpbmc+O1xuICAgIGhlaWdodDogbnVtYmVyO1xuICB9KSA9PiB2b2lkO1xuICBpc1BhcmVudEhlYWRlclNob3duOiBib29sZWFuO1xufTtcblxuY29uc3QgRVBTSUxPTiA9IDAuMTtcblxuZnVuY3Rpb24gQ2FyZENvbnRhaW5lcih7XG4gIGFjdGl2ZSxcbiAgY2FyZE92ZXJsYXksXG4gIGNhcmRPdmVybGF5RW5hYmxlZCxcbiAgY2FyZFNoYWRvd0VuYWJsZWQsXG4gIGNhcmRTdHlsZSxcbiAgY2FyZFN0eWxlSW50ZXJwb2xhdG9yLFxuICBjbG9zaW5nLFxuICBnZXN0dXJlLFxuICBmb2N1c2VkLFxuICBnZXN0dXJlRGlyZWN0aW9uLFxuICBnZXN0dXJlRW5hYmxlZCxcbiAgZ2VzdHVyZVJlc3BvbnNlRGlzdGFuY2UsXG4gIGdlc3R1cmVWZWxvY2l0eUltcGFjdCxcbiAgZ2V0UHJldmlvdXNTY2VuZSxcbiAgZ2V0Rm9jdXNlZFJvdXRlLFxuICBtb2RlLFxuICBoZWFkZXJNb2RlLFxuICBoZWFkZXJTaG93bixcbiAgaGVhZGVyU3R5bGVJbnRlcnBvbGF0b3IsXG4gIGhhc0Fic29sdXRlSGVhZGVyLFxuICBoZWFkZXJIZWlnaHQsXG4gIG9uSGVhZGVySGVpZ2h0Q2hhbmdlLFxuICBpc1BhcmVudEhlYWRlclNob3duLFxuICBpbmRleCxcbiAgbGF5b3V0LFxuICBvbkNsb3NlUm91dGUsXG4gIG9uT3BlblJvdXRlLFxuICBvblBhZ2VDaGFuZ2VDYW5jZWwsXG4gIG9uUGFnZUNoYW5nZUNvbmZpcm0sXG4gIG9uUGFnZUNoYW5nZVN0YXJ0LFxuICBvbkdlc3R1cmVDYW5jZWwsXG4gIG9uR2VzdHVyZUVuZCxcbiAgb25HZXN0dXJlU3RhcnQsXG4gIG9uVHJhbnNpdGlvbkVuZCxcbiAgb25UcmFuc2l0aW9uU3RhcnQsXG4gIHJlbmRlckhlYWRlcixcbiAgcmVuZGVyU2NlbmUsXG4gIHNhZmVBcmVhSW5zZXRCb3R0b20sXG4gIHNhZmVBcmVhSW5zZXRMZWZ0LFxuICBzYWZlQXJlYUluc2V0UmlnaHQsXG4gIHNhZmVBcmVhSW5zZXRUb3AsXG4gIHNjZW5lLFxuICB0cmFuc2l0aW9uU3BlYyxcbn06IFByb3BzKSB7XG4gIGNvbnN0IGhhbmRsZU9wZW4gPSAoKSA9PiB7XG4gICAgY29uc3QgeyByb3V0ZSB9ID0gc2NlbmU7XG5cbiAgICBvblRyYW5zaXRpb25FbmQ/Lih7IHJvdXRlIH0sIGZhbHNlKTtcbiAgICBvbk9wZW5Sb3V0ZSh7IHJvdXRlIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcm91dGUgfSA9IHNjZW5lO1xuXG4gICAgb25UcmFuc2l0aW9uRW5kPy4oeyByb3V0ZSB9LCB0cnVlKTtcbiAgICBvbkNsb3NlUm91dGUoeyByb3V0ZSB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVHZXN0dXJlQmVnaW4gPSAoKSA9PiB7XG4gICAgY29uc3QgeyByb3V0ZSB9ID0gc2NlbmU7XG5cbiAgICBvblBhZ2VDaGFuZ2VTdGFydD8uKCk7XG4gICAgb25HZXN0dXJlU3RhcnQ/Lih7IHJvdXRlIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUdlc3R1cmVDYW5jZWxlZCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHJvdXRlIH0gPSBzY2VuZTtcblxuICAgIG9uUGFnZUNoYW5nZUNhbmNlbD8uKCk7XG4gICAgb25HZXN0dXJlQ2FuY2VsPy4oeyByb3V0ZSB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVHZXN0dXJlRW5kID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcm91dGUgfSA9IHNjZW5lO1xuXG4gICAgb25HZXN0dXJlRW5kPy4oeyByb3V0ZSB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVUcmFuc2l0aW9uID0gKHtcbiAgICBjbG9zaW5nLFxuICAgIGdlc3R1cmUsXG4gIH06IHtcbiAgICBjbG9zaW5nOiBib29sZWFuO1xuICAgIGdlc3R1cmU6IGJvb2xlYW47XG4gIH0pID0+IHtcbiAgICBjb25zdCB7IHJvdXRlIH0gPSBzY2VuZTtcblxuICAgIGlmICghZ2VzdHVyZSkge1xuICAgICAgb25QYWdlQ2hhbmdlQ29uZmlybT8uKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoYWN0aXZlICYmIGNsb3NpbmcpIHtcbiAgICAgIG9uUGFnZUNoYW5nZUNvbmZpcm0/LihmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uUGFnZUNoYW5nZUNhbmNlbD8uKCk7XG4gICAgfVxuXG4gICAgb25UcmFuc2l0aW9uU3RhcnQ/Lih7IHJvdXRlIH0sIGNsb3NpbmcpO1xuICB9O1xuXG4gIGNvbnN0IGluc2V0cyA9IHtcbiAgICB0b3A6IHNhZmVBcmVhSW5zZXRUb3AsXG4gICAgcmlnaHQ6IHNhZmVBcmVhSW5zZXRSaWdodCxcbiAgICBib3R0b206IHNhZmVBcmVhSW5zZXRCb3R0b20sXG4gICAgbGVmdDogc2FmZUFyZWFJbnNldExlZnQsXG4gIH07XG5cbiAgY29uc3QgeyBjb2xvcnMgfSA9IHVzZVRoZW1lKCk7XG5cbiAgY29uc3QgW3BvaW50ZXJFdmVudHMsIHNldFBvaW50ZXJFdmVudHNdID0gUmVhY3QudXNlU3RhdGU8J2JveC1ub25lJyB8ICdub25lJz4oXG4gICAgJ2JveC1ub25lJ1xuICApO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIG9wdGlvbmFsbHkgaGFzIGFkZExpc3RlbmVyLCBidXQgdGhlIHR5cGUgZGVmcyBkb24ndCB0aGluayBzb1xuICAgIGNvbnN0IGxpc3RlbmVyID0gc2NlbmUucHJvZ3Jlc3MubmV4dD8uYWRkTGlzdGVuZXI/LihcbiAgICAgICh7IHZhbHVlIH06IHsgdmFsdWU6IG51bWJlciB9KSA9PiB7XG4gICAgICAgIHNldFBvaW50ZXJFdmVudHModmFsdWUgPD0gRVBTSUxPTiA/ICdib3gtbm9uZScgOiAnbm9uZScpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEFuaW1hdGVkSW50ZXJwb2xhdGlvbiBvcHRpb25hbGx5IGhhcyByZW1vdmVkTGlzdGVuZXIsIGJ1dCB0aGUgdHlwZSBkZWZzIGRvbid0IHRoaW5rIHNvXG4gICAgICAgIHNjZW5lLnByb2dyZXNzLm5leHQ/LnJlbW92ZUxpc3RlbmVyPy4obGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtwb2ludGVyRXZlbnRzLCBzY2VuZS5wcm9ncmVzcy5uZXh0XSk7XG5cbiAgY29uc3QgaXNDdXJyZW50SGVhZGVyU2hvd24gPSBoZWFkZXJNb2RlICE9PSAnbm9uZScgJiYgaGVhZGVyU2hvd24gIT09IGZhbHNlO1xuICBjb25zdCBwcmV2aW91c1NjZW5lID0gZ2V0UHJldmlvdXNTY2VuZSh7IHJvdXRlOiBzY2VuZS5yb3V0ZSB9KTtcblxuICByZXR1cm4gKFxuICAgIDxDYXJkXG4gICAgICBpbmRleD17aW5kZXh9XG4gICAgICBnZXN0dXJlRGlyZWN0aW9uPXtnZXN0dXJlRGlyZWN0aW9ufVxuICAgICAgbGF5b3V0PXtsYXlvdXR9XG4gICAgICBpbnNldHM9e2luc2V0c31cbiAgICAgIGdlc3R1cmU9e2dlc3R1cmV9XG4gICAgICBjdXJyZW50PXtzY2VuZS5wcm9ncmVzcy5jdXJyZW50fVxuICAgICAgbmV4dD17c2NlbmUucHJvZ3Jlc3MubmV4dH1cbiAgICAgIGNsb3Npbmc9e2Nsb3Npbmd9XG4gICAgICBvbk9wZW49e2hhbmRsZU9wZW59XG4gICAgICBvbkNsb3NlPXtoYW5kbGVDbG9zZX1cbiAgICAgIG92ZXJsYXk9e2NhcmRPdmVybGF5fVxuICAgICAgb3ZlcmxheUVuYWJsZWQ9e2NhcmRPdmVybGF5RW5hYmxlZH1cbiAgICAgIHNoYWRvd0VuYWJsZWQ9e2NhcmRTaGFkb3dFbmFibGVkfVxuICAgICAgb25UcmFuc2l0aW9uPXtoYW5kbGVUcmFuc2l0aW9ufVxuICAgICAgb25HZXN0dXJlQmVnaW49e2hhbmRsZUdlc3R1cmVCZWdpbn1cbiAgICAgIG9uR2VzdHVyZUNhbmNlbGVkPXtoYW5kbGVHZXN0dXJlQ2FuY2VsZWR9XG4gICAgICBvbkdlc3R1cmVFbmQ9e2hhbmRsZUdlc3R1cmVFbmR9XG4gICAgICBnZXN0dXJlRW5hYmxlZD17Z2VzdHVyZUVuYWJsZWR9XG4gICAgICBnZXN0dXJlUmVzcG9uc2VEaXN0YW5jZT17Z2VzdHVyZVJlc3BvbnNlRGlzdGFuY2V9XG4gICAgICBnZXN0dXJlVmVsb2NpdHlJbXBhY3Q9e2dlc3R1cmVWZWxvY2l0eUltcGFjdH1cbiAgICAgIHRyYW5zaXRpb25TcGVjPXt0cmFuc2l0aW9uU3BlY31cbiAgICAgIHN0eWxlSW50ZXJwb2xhdG9yPXtjYXJkU3R5bGVJbnRlcnBvbGF0b3J9XG4gICAgICBhY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW49eyFmb2N1c2VkfVxuICAgICAgaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eT17Zm9jdXNlZCA/ICdhdXRvJyA6ICduby1oaWRlLWRlc2NlbmRhbnRzJ31cbiAgICAgIHBvaW50ZXJFdmVudHM9e2FjdGl2ZSA/ICdib3gtbm9uZScgOiBwb2ludGVyRXZlbnRzfVxuICAgICAgcGFnZU92ZXJmbG93RW5hYmxlZD17aGVhZGVyTW9kZSA9PT0gJ3NjcmVlbicgJiYgbW9kZSA9PT0gJ2NhcmQnfVxuICAgICAgY29udGFpbmVyU3R5bGU9e2hhc0Fic29sdXRlSGVhZGVyID8geyBtYXJnaW5Ub3A6IGhlYWRlckhlaWdodCB9IDogbnVsbH1cbiAgICAgIGNvbnRlbnRTdHlsZT17W3sgYmFja2dyb3VuZENvbG9yOiBjb2xvcnMuYmFja2dyb3VuZCB9LCBjYXJkU3R5bGVdfVxuICAgICAgc3R5bGU9e1tcbiAgICAgICAge1xuICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGF2b2lkIHVuZm9jdXNlZCBsYXJnZXIgcGFnZXMgaW5jcmVhc2luZyBzY3JvbGwgYXJlYVxuICAgICAgICAgIC8vIFRoZSBpc3N1ZSBjYW4gYmUgc2VlbiBvbiB0aGUgd2ViIHdoZW4gYSBzbWFsbGVyIHNjcmVlbiBpcyBwdXNoZWQgb3ZlciBhIGxhcmdlciBvbmVcbiAgICAgICAgICBvdmVyZmxvdzogYWN0aXZlID8gdW5kZWZpbmVkIDogJ2hpZGRlbicsXG4gICAgICAgIH0sXG4gICAgICAgIFN0eWxlU2hlZXQuYWJzb2x1dGVGaWxsLFxuICAgICAgXX1cbiAgICA+XG4gICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuc2NlbmV9PlxuICAgICAgICAgIDxQcmV2aW91c1NjZW5lQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17cHJldmlvdXNTY2VuZX0+XG4gICAgICAgICAgICA8SGVhZGVyU2hvd25Db250ZXh0LlByb3ZpZGVyXG4gICAgICAgICAgICAgIHZhbHVlPXtpc1BhcmVudEhlYWRlclNob3duIHx8IGlzQ3VycmVudEhlYWRlclNob3dufVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SGVhZGVySGVpZ2h0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17aGVhZGVySGVpZ2h0fT5cbiAgICAgICAgICAgICAgICB7cmVuZGVyU2NlbmUoeyByb3V0ZTogc2NlbmUucm91dGUgfSl9XG4gICAgICAgICAgICAgIDwvSGVhZGVySGVpZ2h0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICAgIDwvSGVhZGVyU2hvd25Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgICAgIDwvUHJldmlvdXNTY2VuZUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgIDwvVmlldz5cbiAgICAgICAge2hlYWRlck1vZGUgPT09ICdzY3JlZW4nXG4gICAgICAgICAgPyByZW5kZXJIZWFkZXIoe1xuICAgICAgICAgICAgICBtb2RlOiAnc2NyZWVuJyxcbiAgICAgICAgICAgICAgbGF5b3V0LFxuICAgICAgICAgICAgICBpbnNldHMsXG4gICAgICAgICAgICAgIHNjZW5lczogW3ByZXZpb3VzU2NlbmUsIHNjZW5lXSxcbiAgICAgICAgICAgICAgZ2V0UHJldmlvdXNTY2VuZSxcbiAgICAgICAgICAgICAgZ2V0Rm9jdXNlZFJvdXRlLFxuICAgICAgICAgICAgICBnZXN0dXJlRGlyZWN0aW9uLFxuICAgICAgICAgICAgICBzdHlsZUludGVycG9sYXRvcjogaGVhZGVyU3R5bGVJbnRlcnBvbGF0b3IsXG4gICAgICAgICAgICAgIG9uQ29udGVudEhlaWdodENoYW5nZTogb25IZWFkZXJIZWlnaHRDaGFuZ2UsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogbnVsbH1cbiAgICAgIDwvVmlldz5cbiAgICA8L0NhcmQ+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oQ2FyZENvbnRhaW5lcik7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uLXJldmVyc2UnLFxuICB9LFxuICBzY2VuZToge1xuICAgIGZsZXg6IDEsXG4gIH0sXG59KTtcbiJdfQ==