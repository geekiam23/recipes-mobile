eea55948a8bb4d33cceccbb93bf3035e
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = exports.serialize = exports.test = void 0;

var _collections = require("../collections");

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    var ownKeys = Object.keys(source);

    if (typeof Object.getOwnPropertySymbols === 'function') {
      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {
        return Object.getOwnPropertyDescriptor(source, sym).enumerable;
      }));
    }

    ownKeys.forEach(function (key) {
      _defineProperty(target, key, source[key]);
    });
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var SPACE = ' ';
var OBJECT_NAMES = ['DOMStringMap', 'NamedNodeMap'];
var ARRAY_REGEXP = /^(HTML\w*Collection|NodeList)$/;

var testName = function testName(name) {
  return OBJECT_NAMES.indexOf(name) !== -1 || ARRAY_REGEXP.test(name);
};

var test = function test(val) {
  return val && val.constructor && val.constructor.name && testName(val.constructor.name);
};

exports.test = test;

var propsReducer = function propsReducer(props, attribute) {
  props[attribute.name] = attribute.value;
  return props;
};

var serialize = function serialize(collection, config, indentation, depth, refs, printer) {
  var name = collection.constructor.name;

  if (++depth > config.maxDepth) {
    return '[' + name + ']';
  }

  return (config.min ? '' : name + SPACE) + (OBJECT_NAMES.indexOf(name) !== -1 ? '{' + (0, _collections.printObjectProperties)(name === 'NamedNodeMap' ? Array.prototype.reduce.call(collection, propsReducer, {}) : _objectSpread({}, collection), config, indentation, depth, refs, printer) + '}' : '[' + (0, _collections.printListItems)(Array.from(collection), config, indentation, depth, refs, printer) + ']');
};

exports.serialize = serialize;
var plugin = {
  serialize: serialize,
  test: test
};
var _default = plugin;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRPTUNvbGxlY3Rpb24uanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJkZWZhdWx0Iiwic2VyaWFsaXplIiwidGVzdCIsIl9jb2xsZWN0aW9ucyIsInJlcXVpcmUiLCJfb2JqZWN0U3ByZWFkIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiY29uY2F0IiwiZmlsdGVyIiwic3ltIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImZvckVhY2giLCJrZXkiLCJfZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIlNQQUNFIiwiT0JKRUNUX05BTUVTIiwiQVJSQVlfUkVHRVhQIiwidGVzdE5hbWUiLCJuYW1lIiwiaW5kZXhPZiIsInZhbCIsImNvbnN0cnVjdG9yIiwicHJvcHNSZWR1Y2VyIiwicHJvcHMiLCJhdHRyaWJ1dGUiLCJjb2xsZWN0aW9uIiwiY29uZmlnIiwiaW5kZW50YXRpb24iLCJkZXB0aCIsInJlZnMiLCJwcmludGVyIiwibWF4RGVwdGgiLCJtaW4iLCJwcmludE9iamVjdFByb3BlcnRpZXMiLCJBcnJheSIsInByb3RvdHlwZSIsInJlZHVjZSIsImNhbGwiLCJwcmludExpc3RJdGVtcyIsImZyb20iLCJwbHVnaW4iLCJfZGVmYXVsdCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLEVBQUFBLEtBQUssRUFBRTtBQURvQyxDQUE3QztBQUdBRCxPQUFPLENBQUNFLE9BQVIsR0FBa0JGLE9BQU8sQ0FBQ0csU0FBUixHQUFvQkgsT0FBTyxDQUFDSSxJQUFSLEdBQWUsS0FBSyxDQUExRDs7QUFFQSxJQUFJQyxZQUFZLEdBQUdDLE9B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QWtCb0QsUUFBbEIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5zZXJpYWxpemUgPSBleHBvcnRzLnRlc3QgPSB2b2lkIDA7XG5cbnZhciBfY29sbGVjdGlvbnMgPSByZXF1aXJlKCcuLi9jb2xsZWN0aW9ucycpO1xuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuICAgIHZhciBvd25LZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICBpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG93bktleXMgPSBvd25LZXlzLmNvbmNhdChcbiAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbihzeW0pIHtcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIG93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuY29uc3QgU1BBQ0UgPSAnICc7XG5jb25zdCBPQkpFQ1RfTkFNRVMgPSBbJ0RPTVN0cmluZ01hcCcsICdOYW1lZE5vZGVNYXAnXTtcbmNvbnN0IEFSUkFZX1JFR0VYUCA9IC9eKEhUTUxcXHcqQ29sbGVjdGlvbnxOb2RlTGlzdCkkLztcblxuY29uc3QgdGVzdE5hbWUgPSBuYW1lID0+XG4gIE9CSkVDVF9OQU1FUy5pbmRleE9mKG5hbWUpICE9PSAtMSB8fCBBUlJBWV9SRUdFWFAudGVzdChuYW1lKTtcblxuY29uc3QgdGVzdCA9IHZhbCA9PlxuICB2YWwgJiZcbiAgdmFsLmNvbnN0cnVjdG9yICYmXG4gIHZhbC5jb25zdHJ1Y3Rvci5uYW1lICYmXG4gIHRlc3ROYW1lKHZhbC5jb25zdHJ1Y3Rvci5uYW1lKTsgLy8gQ29udmVydCBhcnJheSBvZiBhdHRyaWJ1dGUgb2JqZWN0cyB0byBwcm9wcyBvYmplY3QuXG5cbmV4cG9ydHMudGVzdCA9IHRlc3Q7XG5cbmNvbnN0IHByb3BzUmVkdWNlciA9IChwcm9wcywgYXR0cmlidXRlKSA9PiB7XG4gIHByb3BzW2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgcmV0dXJuIHByb3BzO1xufTtcblxuY29uc3Qgc2VyaWFsaXplID0gKGNvbGxlY3Rpb24sIGNvbmZpZywgaW5kZW50YXRpb24sIGRlcHRoLCByZWZzLCBwcmludGVyKSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBjb2xsZWN0aW9uLmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgaWYgKCsrZGVwdGggPiBjb25maWcubWF4RGVwdGgpIHtcbiAgICByZXR1cm4gJ1snICsgbmFtZSArICddJztcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgKGNvbmZpZy5taW4gPyAnJyA6IG5hbWUgKyBTUEFDRSkgK1xuICAgIChPQkpFQ1RfTkFNRVMuaW5kZXhPZihuYW1lKSAhPT0gLTFcbiAgICAgID8gJ3snICtcbiAgICAgICAgKDAsIF9jb2xsZWN0aW9ucy5wcmludE9iamVjdFByb3BlcnRpZXMpKFxuICAgICAgICAgIG5hbWUgPT09ICdOYW1lZE5vZGVNYXAnXG4gICAgICAgICAgICA/IEFycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbChjb2xsZWN0aW9uLCBwcm9wc1JlZHVjZXIsIHt9KVxuICAgICAgICAgICAgOiBfb2JqZWN0U3ByZWFkKHt9LCBjb2xsZWN0aW9uKSxcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgaW5kZW50YXRpb24sXG4gICAgICAgICAgZGVwdGgsXG4gICAgICAgICAgcmVmcyxcbiAgICAgICAgICBwcmludGVyXG4gICAgICAgICkgK1xuICAgICAgICAnfSdcbiAgICAgIDogJ1snICtcbiAgICAgICAgKDAsIF9jb2xsZWN0aW9ucy5wcmludExpc3RJdGVtcykoXG4gICAgICAgICAgQXJyYXkuZnJvbShjb2xsZWN0aW9uKSxcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgaW5kZW50YXRpb24sXG4gICAgICAgICAgZGVwdGgsXG4gICAgICAgICAgcmVmcyxcbiAgICAgICAgICBwcmludGVyXG4gICAgICAgICkgK1xuICAgICAgICAnXScpXG4gICk7XG59O1xuXG5leHBvcnRzLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbmNvbnN0IHBsdWdpbiA9IHtcbiAgc2VyaWFsaXplLFxuICB0ZXN0XG59O1xudmFyIF9kZWZhdWx0ID0gcGx1Z2luO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG4iXX0=