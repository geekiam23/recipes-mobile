{"version":3,"sources":["to-have-style.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","toHaveStyle","_defineProperty2","_extends3","_slicedToArray2","_jestMatcherUtils","_jestDiff","_chalk","_ramda","_utils","isSubset","expected","received","compose","all","_ref","_ref2","default","prop","Array","isArray","mergeAll","toPairs","mergeAllStyles","styles","flatten","printoutStyles","keys","sort","map","JSON","stringify","join","narrow","filter","reduce","obj","_","i","expectedDiff","elementStyles","diffOutput","replace","red","element","style","_element$props$style","_this","checkReactElement","elementStyle","props","pass","message","matcher","isNot","matcherHint"],"mappings":"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","sourcesContent":["var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toHaveStyle = toHaveStyle;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends3 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _jestMatcherUtils = require(\"jest-matcher-utils\");\n\nvar _jestDiff = _interopRequireDefault(require(\"jest-diff\"));\n\nvar _chalk = _interopRequireDefault(require(\"chalk\"));\n\nvar _ramda = require(\"ramda\");\n\nvar _utils = require(\"./utils\");\n\nfunction isSubset(expected, received) {\n  return (0, _ramda.compose)((0, _ramda.all)(function (_ref) {\n    var _ref2 = (0, _slicedToArray2.default)(_ref, 2),\n        prop = _ref2[0],\n        value = _ref2[1];\n\n    return Array.isArray(value) ? isSubset((0, _ramda.mergeAll)(value), (0, _ramda.mergeAll)(received[prop])) : received[prop] === value;\n  }), _ramda.toPairs)(expected);\n}\n\nfunction mergeAllStyles(styles) {\n  return (0, _ramda.compose)(_ramda.mergeAll, _ramda.flatten)(styles);\n}\n\nfunction printoutStyles(styles) {\n  return Object.keys(styles).sort().map(function (prop) {\n    return Array.isArray(styles[prop]) ? prop + \": \" + JSON.stringify(styles[prop], null, 2) + \";\" : prop + \": \" + styles[prop] + \";\";\n  }).join('\\n');\n}\n\nfunction narrow(expected, received) {\n  return Object.keys(received).filter(function (prop) {\n    return expected[prop];\n  }).reduce(function (obj, prop) {\n    return (0, _extends3.default)(obj, (0, _defineProperty2.default)({}, prop, Array.isArray(expected[prop]) && Array.isArray(received[prop]) ? expected[prop].map(function (_, i) {\n      return narrow(expected[prop][i], received[prop][i]);\n    }) : received[prop]));\n  }, {});\n}\n\nfunction expectedDiff(expected, elementStyles) {\n  var received = narrow(expected, elementStyles);\n  var diffOutput = (0, _jestDiff.default)(printoutStyles(expected), printoutStyles(received));\n  return diffOutput.replace(_chalk.default.red('+ Received') + \"\\n\", '');\n}\n\nfunction toHaveStyle(element, style) {\n  var _element$props$style,\n      _this = this;\n\n  (0, _utils.checkReactElement)(element, toHaveStyle, this);\n  var elementStyle = (_element$props$style = element.props.style) != null ? _element$props$style : {};\n  var expected = Array.isArray(style) ? mergeAllStyles(style) : style;\n  var received = Array.isArray(elementStyle) ? mergeAllStyles(elementStyle) : elementStyle;\n  return {\n    pass: isSubset(expected, received),\n    message: function message() {\n      var matcher = (_this.isNot ? '.not' : '') + \".toHaveStyle\";\n      return [(0, _jestMatcherUtils.matcherHint)(matcher, 'element', ''), expectedDiff(expected, received)].join('\\n\\n');\n    }\n  };\n}"]}