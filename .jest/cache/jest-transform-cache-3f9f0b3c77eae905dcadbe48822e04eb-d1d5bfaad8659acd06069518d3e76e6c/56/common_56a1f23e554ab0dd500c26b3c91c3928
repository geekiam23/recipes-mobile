e8d6adf54d15ef1c4b9486d6cfabccb1
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

function setup(env) {
  createDebug.debug = createDebug;
  createDebug.default = createDebug;
  createDebug.coerce = coerce;
  createDebug.disable = disable;
  createDebug.enable = enable;
  createDebug.enabled = enabled;
  createDebug.humanize = require('ms');
  createDebug.destroy = destroy;
  Object.keys(env).forEach(function (key) {
    createDebug[key] = env[key];
  });
  createDebug.names = [];
  createDebug.skips = [];
  createDebug.formatters = {};

  function selectColor(namespace) {
    var hash = 0;

    for (var i = 0; i < namespace.length; i++) {
      hash = (hash << 5) - hash + namespace.charCodeAt(i);
      hash |= 0;
    }

    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
  }

  createDebug.selectColor = selectColor;

  function createDebug(namespace) {
    var prevTime;
    var enableOverride = null;

    function debug() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      if (!debug.enabled) {
        return;
      }

      var self = debug;
      var curr = Number(new Date());
      var ms = curr - (prevTime || curr);
      self.diff = ms;
      self.prev = prevTime;
      self.curr = curr;
      prevTime = curr;
      args[0] = createDebug.coerce(args[0]);

      if (typeof args[0] !== 'string') {
        args.unshift('%O');
      }

      var index = 0;
      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {
        if (match === '%%') {
          return '%';
        }

        index++;
        var formatter = createDebug.formatters[format];

        if (typeof formatter === 'function') {
          var val = args[index];
          match = formatter.call(self, val);
          args.splice(index, 1);
          index--;
        }

        return match;
      });
      createDebug.formatArgs.call(self, args);
      var logFn = self.log || createDebug.log;
      logFn.apply(self, args);
    }

    debug.namespace = namespace;
    debug.useColors = createDebug.useColors();
    debug.color = createDebug.selectColor(namespace);
    debug.extend = extend;
    debug.destroy = createDebug.destroy;
    Object.defineProperty(debug, 'enabled', {
      enumerable: true,
      configurable: false,
      get: function get() {
        return enableOverride === null ? createDebug.enabled(namespace) : enableOverride;
      },
      set: function set(v) {
        enableOverride = v;
      }
    });

    if (typeof createDebug.init === 'function') {
      createDebug.init(debug);
    }

    return debug;
  }

  function extend(namespace, delimiter) {
    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
    newDebug.log = this.log;
    return newDebug;
  }

  function enable(namespaces) {
    createDebug.save(namespaces);
    createDebug.names = [];
    createDebug.skips = [];
    var i;
    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
    var len = split.length;

    for (i = 0; i < len; i++) {
      if (!split[i]) {
        continue;
      }

      namespaces = split[i].replace(/\*/g, '.*?');

      if (namespaces[0] === '-') {
        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
      } else {
        createDebug.names.push(new RegExp('^' + namespaces + '$'));
      }
    }
  }

  function disable() {
    var namespaces = [].concat((0, _toConsumableArray2.default)(createDebug.names.map(toNamespace)), (0, _toConsumableArray2.default)(createDebug.skips.map(toNamespace).map(function (namespace) {
      return '-' + namespace;
    }))).join(',');
    createDebug.enable('');
    return namespaces;
  }

  function enabled(name) {
    if (name[name.length - 1] === '*') {
      return true;
    }

    var i;
    var len;

    for (i = 0, len = createDebug.skips.length; i < len; i++) {
      if (createDebug.skips[i].test(name)) {
        return false;
      }
    }

    for (i = 0, len = createDebug.names.length; i < len; i++) {
      if (createDebug.names[i].test(name)) {
        return true;
      }
    }

    return false;
  }

  function toNamespace(regexp) {
    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\.\*\?$/, '*');
  }

  function coerce(val) {
    if (val instanceof Error) {
      return val.stack || val.message;
    }

    return val;
  }

  function destroy() {
    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');
  }

  createDebug.enable(createDebug.load());
  return createDebug;
}

module.exports = setup;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJzZXR1cCIsImVudiIsImNyZWF0ZURlYnVnIiwiZGVidWciLCJkZWZhdWx0IiwiY29lcmNlIiwiZGlzYWJsZSIsImVuYWJsZSIsImVuYWJsZWQiLCJodW1hbml6ZSIsInJlcXVpcmUiLCJkZXN0cm95IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJuYW1lcyIsInNraXBzIiwiZm9ybWF0dGVycyIsInNlbGVjdENvbG9yIiwibmFtZXNwYWNlIiwiaGFzaCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwiY29sb3JzIiwiTWF0aCIsImFicyIsInByZXZUaW1lIiwiZW5hYmxlT3ZlcnJpZGUiLCJhcmdzIiwic2VsZiIsImN1cnIiLCJOdW1iZXIiLCJEYXRlIiwibXMiLCJkaWZmIiwicHJldiIsInVuc2hpZnQiLCJpbmRleCIsInJlcGxhY2UiLCJtYXRjaCIsImZvcm1hdCIsImZvcm1hdHRlciIsInZhbCIsImNhbGwiLCJzcGxpY2UiLCJmb3JtYXRBcmdzIiwibG9nRm4iLCJsb2ciLCJhcHBseSIsInVzZUNvbG9ycyIsImNvbG9yIiwiZXh0ZW5kIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiZ2V0Iiwic2V0IiwidiIsImluaXQiLCJkZWxpbWl0ZXIiLCJuZXdEZWJ1ZyIsIm5hbWVzcGFjZXMiLCJzYXZlIiwic3BsaXQiLCJsZW4iLCJwdXNoIiwiUmVnRXhwIiwic3Vic3RyIiwibWFwIiwidG9OYW1lc3BhY2UiLCJqb2luIiwibmFtZSIsInRlc3QiLCJyZWdleHAiLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIkVycm9yIiwic3RhY2siLCJtZXNzYWdlIiwiY29uc29sZSIsIndhcm4iLCJsb2FkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7OztBQU1BLFNBQVNBLEtBQVQsQ0FBZUMsR0FBZixFQUFvQjtBQUNuQkMsRUFBQUEsV0FBVyxDQUFDQyxLQUFa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RUFBcUI7QUFDcEIsUUFBSUEsR0FBRyxZQUFZa0MsS0FBbkIsRUFBMEI7QUFDekIsYUFBT2xDLEdBQUcsQ0FBQ21DLEtBQUosSUFBYW5DLEdBQUcsQ0FBQ29DLE9BQXhCO0FBQ0E7O0FBQ0QsV0FBT3BDLEdBQVA7QUFDQTs7QUFNRCxXQUFTakMsT0FBVCxHQUFtQjtBQUNsQnNFLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLHVJQUFiO0FBQ0E7O0FBRURoRixFQUFBQSxXQUFXLENBQUNLLE1BQVosQ0FBbUJMLFdBQVcsQ0FBQ2lGLElBQVosRUFBbkI7QUFFQSxTQUFPakYsV0FBUDtBQUNBOztBQUVEa0YsTUFBTSxDQUFDQyxPQUFQLEdBQWlCckYsS0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IGVuYWJsZU92ZXJyaWRlID09PSBudWxsID8gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpIDogZW5hYmxlT3ZlcnJpZGUsXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRsZXQgaTtcblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdFx0Y29uc3QgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoIXNwbGl0W2ldKSB7XG5cdFx0XHRcdC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblxuXHRcdFx0aWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcy5tYXAodG9OYW1lc3BhY2UpLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKHRvTmFtZXNwYWNlKS5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGlmIChuYW1lW25hbWUubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0bGV0IGk7XG5cdFx0bGV0IGxlbjtcblxuXHRcdGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvbnZlcnQgcmVnZXhwIHRvIG5hbWVzcGFjZVxuXHQqXG5cdCogQHBhcmFtIHtSZWdFeHB9IHJlZ3hlcFxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCkge1xuXHRcdHJldHVybiByZWdleHAudG9TdHJpbmcoKVxuXHRcdFx0LnN1YnN0cmluZygyLCByZWdleHAudG9TdHJpbmcoKS5sZW5ndGggLSAyKVxuXHRcdFx0LnJlcGxhY2UoL1xcLlxcKlxcPyQvLCAnKicpO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiJdfQ==